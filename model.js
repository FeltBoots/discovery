var h1=Object.create,Zo=Object.defineProperty;var p1=Object.getOwnPropertyDescriptor;var g1=Object.getOwnPropertyNames;var m1=Object.getPrototypeOf,v1=Object.prototype.hasOwnProperty;var y1=n=>Zo(n,"__esModule",{value:!0});var ke=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),$t=(n,t)=>{for(var i in t)Zo(n,i,{get:t[i],enumerable:!0})},b1=(n,t,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of g1(t))!v1.call(n,a)&&a!=="default"&&Zo(n,a,{get:()=>t[a],enumerable:!(i=p1(t,a))||i.enumerable});return n},sr=n=>b1(y1(Zo(n!=null?h1(m1(n)):{},"default",n&&n.__esModule&&"default"in n?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n);var Jr=ke((Fa,Ba)=>{(function(n,t){typeof Fa=="object"&&typeof Ba!="undefined"?Ba.exports=t():typeof define=="function"&&define.amd?define(t):(n=n||self,n.CodeMirror=t())})(Fa,function(){"use strict";var n=navigator.userAgent,t=navigator.platform,i=/gecko\/\d/i.test(n),a=/MSIE \d/.test(n),u=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(n),c=/Edge\/(\d+)/.exec(n),d=a||u||c,h=d&&(a?document.documentMode||6:+(c||u)[1]),g=!c&&/WebKit\//.test(n),b=g&&/Qt\/\d+\.\d+/.test(n),x=!c&&/Chrome\//.test(n),C=/Opera\//.test(n),S=/Apple Computer/.test(navigator.vendor),L=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(n),T=/PhantomJS/.test(n),M=S&&(/Mobile\/\w+/.test(n)||navigator.maxTouchPoints>2),N=/Android/.test(n),A=M||N||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(n),j=M||/Mac/.test(t),D=/\bCrOS\b/.test(n),P=/win/i.test(t),R=C&&n.match(/Version\/(\d*\.\d*)/);R&&(R=Number(R[1])),R&&R>=15&&(C=!1,g=!0);var _=j&&(b||C&&(R==null||R<12.11)),$=i||d&&h>=9;function q(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var H=function(e,r){var s=e.className,o=q(r).exec(s);if(o){var l=s.slice(o.index+o[0].length);e.className=s.slice(0,o.index)+(l?o[1]+l:"")}};function K(e){for(var r=e.childNodes.length;r>0;--r)e.removeChild(e.firstChild);return e}function W(e,r){return K(e).appendChild(r)}function U(e,r,s,o){var l=document.createElement(e);if(s&&(l.className=s),o&&(l.style.cssText=o),typeof r=="string")l.appendChild(document.createTextNode(r));else if(r)for(var f=0;f<r.length;++f)l.appendChild(r[f]);return l}function k(e,r,s,o){var l=U(e,r,s,o);return l.setAttribute("role","presentation"),l}var Q;document.createRange?Q=function(e,r,s,o){var l=document.createRange();return l.setEnd(o||e,s),l.setStart(e,r),l}:Q=function(e,r,s){var o=document.body.createTextRange();try{o.moveToElementText(e.parentNode)}catch(l){return o}return o.collapse(!0),o.moveEnd("character",s),o.moveStart("character",r),o};function te(e,r){if(r.nodeType==3&&(r=r.parentNode),e.contains)return e.contains(r);do if(r.nodeType==11&&(r=r.host),r==e)return!0;while(r=r.parentNode)}function fe(){var e;try{e=document.activeElement}catch(r){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function Oe(e,r){var s=e.className;q(r).test(s)||(e.className+=(s?" ":"")+r)}function Be(e,r){for(var s=e.split(" "),o=0;o<s.length;o++)s[o]&&!q(s[o]).test(r)&&(r+=" "+s[o]);return r}var $e=function(e){e.select()};M?$e=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:d&&($e=function(e){try{e.select()}catch(r){}});function Qe(e){var r=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,r)}}function Me(e,r,s){r||(r={});for(var o in e)e.hasOwnProperty(o)&&(s!==!1||!r.hasOwnProperty(o))&&(r[o]=e[o]);return r}function Se(e,r,s,o,l){r==null&&(r=e.search(/[^\s\u00a0]/),r==-1&&(r=e.length));for(var f=o||0,p=l||0;;){var m=e.indexOf("	",f);if(m<0||m>=r)return p+(r-f);p+=m-f,p+=s-p%s,f=m+1}}var be=function(){this.id=null,this.f=null,this.time=0,this.handler=Qe(this.onTimeout,this)};be.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},be.prototype.set=function(e,r){this.f=r;var s=+new Date+e;(!this.id||s<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=s)};function ue(e,r){for(var s=0;s<e.length;++s)if(e[s]==r)return s;return-1}var ge=50,me={toString:function(){return"CodeMirror.Pass"}},xe={scroll:!1},ye={origin:"*mouse"},de={origin:"+move"};function ze(e,r,s){for(var o=0,l=0;;){var f=e.indexOf("	",o);f==-1&&(f=e.length);var p=f-o;if(f==e.length||l+p>=r)return o+Math.min(p,r-l);if(l+=f-o,l+=s-l%s,o=f+1,l>=r)return o}}var Ge=[""];function Ut(e){for(;Ge.length<=e;)Ge.push(He(Ge)+" ");return Ge[e]}function He(e){return e[e.length-1]}function Ye(e,r){for(var s=[],o=0;o<e.length;o++)s[o]=r(e[o],o);return s}function ft(e,r,s){for(var o=0,l=s(r);o<e.length&&s(e[o])<=l;)o++;e.splice(o,0,r)}function At(){}function Rt(e,r){var s;return Object.create?s=Object.create(e):(At.prototype=e,s=new At),r&&Me(r,s),s}var br=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Xe(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||br.test(e))}function B(e,r){return r?r.source.indexOf("\\w")>-1&&Xe(e)?!0:r.test(e):Xe(e)}function V(e){for(var r in e)if(e.hasOwnProperty(r)&&e[r])return!1;return!0}var Z=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Ve(e){return e.charCodeAt(0)>=768&&Z.test(e)}function kt(e,r,s){for(;(s<0?r>0:r<e.length)&&Ve(e.charAt(r));)r+=s;return r}function ar(e,r,s){for(var o=r>s?-1:1;;){if(r==s)return r;var l=(r+s)/2,f=o<0?Math.ceil(l):Math.floor(l);if(f==r)return e(f)?r:s;e(f)?s=f:r=f+o}}function Bn(e,r,s,o){if(!e)return o(r,s,"ltr",0);for(var l=!1,f=0;f<e.length;++f){var p=e[f];(p.from<s&&p.to>r||r==s&&p.to==r)&&(o(Math.max(p.from,r),Math.min(p.to,s),p.level==1?"rtl":"ltr",f),l=!0)}l||o(r,s,"ltr")}var _t=null;function nt(e,r,s){var o;_t=null;for(var l=0;l<e.length;++l){var f=e[l];if(f.from<r&&f.to>r)return l;f.to==r&&(f.from!=f.to&&s=="before"?o=l:_t=l),f.from==r&&(f.from!=f.to&&s!="before"?o=l:_t=l)}return o??_t}var Te=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",r="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function s(y){return y<=247?e.charAt(y):1424<=y&&y<=1524?"R":1536<=y&&y<=1785?r.charAt(y-1536):1774<=y&&y<=2220?"r":8192<=y&&y<=8203?"w":y==8204?"b":"L"}var o=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,l=/[stwN]/,f=/[LRr]/,p=/[Lb1n]/,m=/[1n]/;function v(y,E,I){this.level=y,this.from=E,this.to=I}return function(y,E){var I=E=="ltr"?"L":"R";if(y.length==0||E=="ltr"&&!o.test(y))return!1;for(var F=y.length,z=[],G=0;G<F;++G)z.push(s(y.charCodeAt(G)));for(var re=0,le=I;re<F;++re){var he=z[re];he=="m"?z[re]=le:le=he}for(var ve=0,pe=I;ve<F;++ve){var we=z[ve];we=="1"&&pe=="r"?z[ve]="n":f.test(we)&&(pe=we,we=="r"&&(z[ve]="R"))}for(var Ie=1,Ae=z[0];Ie<F-1;++Ie){var Ue=z[Ie];Ue=="+"&&Ae=="1"&&z[Ie+1]=="1"?z[Ie]="1":Ue==","&&Ae==z[Ie+1]&&(Ae=="1"||Ae=="n")&&(z[Ie]=Ae),Ae=Ue}for(var rt=0;rt<F;++rt){var Tt=z[rt];if(Tt==",")z[rt]="N";else if(Tt=="%"){var ct=void 0;for(ct=rt+1;ct<F&&z[ct]=="%";++ct);for(var or=rt&&z[rt-1]=="!"||ct<F&&z[ct]=="1"?"1":"N",Jt=rt;Jt<ct;++Jt)z[Jt]=or;rt=ct-1}}for(var yt=0,Xt=I;yt<F;++yt){var Nt=z[yt];Xt=="L"&&Nt=="1"?z[yt]="L":f.test(Nt)&&(Xt=Nt)}for(var xt=0;xt<F;++xt)if(l.test(z[xt])){var bt=void 0;for(bt=xt+1;bt<F&&l.test(z[bt]);++bt);for(var pt=(xt?z[xt-1]:I)=="L",er=(bt<F?z[bt]:I)=="L",oi=pt==er?pt?"L":"R":I,fn=xt;fn<bt;++fn)z[fn]=oi;xt=bt-1}for(var Pt=[],_r,Mt=0;Mt<F;)if(p.test(z[Mt])){var Ea=Mt;for(++Mt;Mt<F&&p.test(z[Mt]);++Mt);Pt.push(new v(0,Ea,Mt))}else{var Zr=Mt,On=Pt.length,Dn=E=="rtl"?1:0;for(++Mt;Mt<F&&z[Mt]!="L";++Mt);for(var qt=Zr;qt<Mt;)if(m.test(z[qt])){Zr<qt&&(Pt.splice(On,0,new v(1,Zr,qt)),On+=Dn);var si=qt;for(++qt;qt<Mt&&m.test(z[qt]);++qt);Pt.splice(On,0,new v(2,si,qt)),On+=Dn,Zr=qt}else++qt;Zr<Mt&&Pt.splice(On,0,new v(1,Zr,Mt))}return E=="ltr"&&(Pt[0].level==1&&(_r=y.match(/^\s+/))&&(Pt[0].from=_r[0].length,Pt.unshift(new v(0,0,_r[0].length))),He(Pt).level==1&&(_r=y.match(/\s+$/))&&(He(Pt).to-=_r[0].length,Pt.push(new v(0,F-_r[0].length,F)))),E=="rtl"?Pt.reverse():Pt}}();function Ot(e,r){var s=e.order;return s==null&&(s=e.order=Te(e.text,r)),s}var Ht=[],De=function(e,r,s){if(e.addEventListener)e.addEventListener(r,s,!1);else if(e.attachEvent)e.attachEvent("on"+r,s);else{var o=e._handlers||(e._handlers={});o[r]=(o[r]||Ht).concat(s)}};function dr(e,r){return e._handlers&&e._handlers[r]||Ht}function wt(e,r,s){if(e.removeEventListener)e.removeEventListener(r,s,!1);else if(e.detachEvent)e.detachEvent("on"+r,s);else{var o=e._handlers,l=o&&o[r];if(l){var f=ue(l,s);f>-1&&(o[r]=l.slice(0,f).concat(l.slice(f+1)))}}}function Pe(e,r){var s=dr(e,r);if(!!s.length)for(var o=Array.prototype.slice.call(arguments,2),l=0;l<s.length;++l)s[l].apply(null,o)}function ut(e,r,s){return typeof r=="string"&&(r={type:r,preventDefault:function(){this.defaultPrevented=!0}}),Pe(e,s||r.type,e,r),Ft(r)||r.codemirrorIgnore}function wr(e){var r=e._handlers&&e._handlers.cursorActivity;if(!!r)for(var s=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),o=0;o<r.length;++o)ue(s,r[o])==-1&&s.push(r[o])}function dt(e,r){return dr(e,r).length>0}function Vt(e){e.prototype.on=function(r,s){De(this,r,s)},e.prototype.off=function(r,s){wt(this,r,s)}}function gt(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function xr(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Ft(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==!1}function hr(e){gt(e),xr(e)}function kr(e){return e.target||e.srcElement}function $r(e){var r=e.which;return r==null&&(e.button&1?r=1:e.button&2?r=3:e.button&4&&(r=2)),j&&e.ctrlKey&&r==1&&(r=3),r}var pr=function(){if(d&&h<9)return!1;var e=U("div");return"draggable"in e||"dragDrop"in e}(),Et;function kn(e){if(Et==null){var r=U("span","\u200B");W(e,U("span",[r,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(Et=r.offsetWidth<=1&&r.offsetHeight>2&&!(d&&h<8))}var s=Et?U("span","\u200B"):U("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return s.setAttribute("cm-text",""),s}var mt;function lr(e){if(mt!=null)return mt;var r=W(e,document.createTextNode("A\u062EA")),s=Q(r,0,1).getBoundingClientRect(),o=Q(r,1,2).getBoundingClientRect();return K(e),!s||s.left==s.right?!1:mt=o.right-s.right<3}var Xr=`

b`.split(/\n/).length!=3?function(e){for(var r=0,s=[],o=e.length;r<=o;){var l=e.indexOf(`
`,r);l==-1&&(l=e.length);var f=e.slice(r,e.charAt(l-1)=="\r"?l-1:l),p=f.indexOf("\r");p!=-1?(s.push(f.slice(0,p)),r+=p+1):(s.push(f),r=l+1)}return s}:function(e){return e.split(/\r\n?|\n/)},Ur=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(r){return!1}}:function(e){var r;try{r=e.ownerDocument.selection.createRange()}catch(s){}return!r||r.parentElement()!=e?!1:r.compareEndPoints("StartToEnd",r)!=0},en=function(){var e=U("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),jr=null;function Cr(e){if(jr!=null)return jr;var r=W(e,U("span","x")),s=r.getBoundingClientRect(),o=Q(r,0,1).getBoundingClientRect();return jr=Math.abs(s.left-o.left)>1}var Gt={},Bt={};function Cn(e,r){arguments.length>2&&(r.dependencies=Array.prototype.slice.call(arguments,2)),Gt[e]=r}function gr(e,r){Bt[e]=r}function Ar(e){if(typeof e=="string"&&Bt.hasOwnProperty(e))e=Bt[e];else if(e&&typeof e.name=="string"&&Bt.hasOwnProperty(e.name)){var r=Bt[e.name];typeof r=="string"&&(r={name:r}),e=Rt(r,e),e.name=r.name}else{if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Ar("application/xml");if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Ar("application/json")}return typeof e=="string"?{name:e}:e||{name:"null"}}function tn(e,r){r=Ar(r);var s=Gt[r.name];if(!s)return tn(e,"text/plain");var o=s(e,r);if(Yt.hasOwnProperty(r.name)){var l=Yt[r.name];for(var f in l)!l.hasOwnProperty(f)||(o.hasOwnProperty(f)&&(o["_"+f]=o[f]),o[f]=l[f])}if(o.name=r.name,r.helperType&&(o.helperType=r.helperType),r.modeProps)for(var p in r.modeProps)o[p]=r.modeProps[p];return o}var Yt={};function nr(e,r){var s=Yt.hasOwnProperty(e)?Yt[e]:Yt[e]={};Me(r,s)}function it(e,r){if(r===!0)return r;if(e.copyState)return e.copyState(r);var s={};for(var o in r){var l=r[o];l instanceof Array&&(l=l.concat([])),s[o]=l}return s}function oe(e,r){for(var s;e.innerMode&&(s=e.innerMode(r),!(!s||s.mode==e));)r=s.state,e=s.mode;return s||{mode:e,state:r}}function Ee(e,r,s){return e.startState?e.startState(r,s):!0}var Ne=function(e,r,s){this.pos=this.start=0,this.string=e,this.tabSize=r||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=s};Ne.prototype.eol=function(){return this.pos>=this.string.length},Ne.prototype.sol=function(){return this.pos==this.lineStart},Ne.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ne.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ne.prototype.eat=function(e){var r=this.string.charAt(this.pos),s;if(typeof e=="string"?s=r==e:s=r&&(e.test?e.test(r):e(r)),s)return++this.pos,r},Ne.prototype.eatWhile=function(e){for(var r=this.pos;this.eat(e););return this.pos>r},Ne.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Ne.prototype.skipToEnd=function(){this.pos=this.string.length},Ne.prototype.skipTo=function(e){var r=this.string.indexOf(e,this.pos);if(r>-1)return this.pos=r,!0},Ne.prototype.backUp=function(e){this.pos-=e},Ne.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Se(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Se(this.string,this.lineStart,this.tabSize):0)},Ne.prototype.indentation=function(){return Se(this.string,null,this.tabSize)-(this.lineStart?Se(this.string,this.lineStart,this.tabSize):0)},Ne.prototype.match=function(e,r,s){if(typeof e=="string"){var o=function(p){return s?p.toLowerCase():p},l=this.string.substr(this.pos,e.length);if(o(l)==o(e))return r!==!1&&(this.pos+=e.length),!0}else{var f=this.string.slice(this.pos).match(e);return f&&f.index>0?null:(f&&r!==!1&&(this.pos+=f[0].length),f)}},Ne.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ne.prototype.hideFirstChars=function(e,r){this.lineStart+=e;try{return r()}finally{this.lineStart-=e}},Ne.prototype.lookAhead=function(e){var r=this.lineOracle;return r&&r.lookAhead(e)},Ne.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};function ce(e,r){if(r-=e.first,r<0||r>=e.size)throw new Error("There is no line "+(r+e.first)+" in the document.");for(var s=e;!s.lines;)for(var o=0;;++o){var l=s.children[o],f=l.chunkSize();if(r<f){s=l;break}r-=f}return s.lines[r]}function J(e,r,s){var o=[],l=r.line;return e.iter(r.line,s.line+1,function(f){var p=f.text;l==s.line&&(p=p.slice(0,s.ch)),l==r.line&&(p=p.slice(r.ch)),o.push(p),++l}),o}function Ke(e,r,s){var o=[];return e.iter(r,s,function(l){o.push(l.text)}),o}function Y(e,r){var s=r-e.height;if(s)for(var o=e;o;o=o.parent)o.height+=s}function We(e){if(e.parent==null)return null;for(var r=e.parent,s=ue(r.lines,e),o=r.parent;o;r=o,o=o.parent)for(var l=0;o.children[l]!=r;++l)s+=o.children[l].chunkSize();return s+r.first}function Dt(e,r){var s=e.first;e:do{for(var o=0;o<e.children.length;++o){var l=e.children[o],f=l.height;if(r<f){e=l;continue e}r-=f,s+=l.chunkSize()}return s}while(!e.lines);for(var p=0;p<e.lines.length;++p){var m=e.lines[p],v=m.height;if(r<v)break;r-=v}return s+p}function Je(e,r){return r>=e.first&&r<e.first+e.size}function Or(e,r){return String(e.lineNumberFormatter(r+e.firstLineNumber))}function ie(e,r,s){if(s===void 0&&(s=null),!(this instanceof ie))return new ie(e,r,s);this.line=e,this.ch=r,this.sticky=s}function w(e,r){return e.line-r.line||e.ch-r.ch}function O(e,r){return e.sticky==r.sticky&&w(e,r)==0}function ee(e){return ie(e.line,e.ch)}function ne(e,r){return w(e,r)<0?r:e}function je(e,r){return w(e,r)<0?e:r}function se(e,r){return Math.max(e.first,Math.min(r,e.first+e.size-1))}function ae(e,r){if(r.line<e.first)return ie(e.first,0);var s=e.first+e.size-1;return r.line>s?ie(s,ce(e,s).text.length):Re(r,ce(e,r.line).text.length)}function Re(e,r){var s=e.ch;return s==null||s>r?ie(e.line,r):s<0?ie(e.line,0):e}function Ce(e,r){for(var s=[],o=0;o<r.length;o++)s[o]=ae(e,r[o]);return s}var qe=function(e,r){this.state=e,this.lookAhead=r},ot=function(e,r,s,o){this.state=r,this.doc=e,this.line=s,this.maxLookAhead=o||0,this.baseTokens=null,this.baseTokenPos=1};ot.prototype.lookAhead=function(e){var r=this.doc.getLine(this.line+e);return r!=null&&e>this.maxLookAhead&&(this.maxLookAhead=e),r},ot.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var r=this.baseTokens[this.baseTokenPos+1];return{type:r&&r.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},ot.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ot.fromSaved=function(e,r,s){return r instanceof qe?new ot(e,it(e.mode,r.state),s,r.lookAhead):new ot(e,it(e.mode,r),s)},ot.prototype.save=function(e){var r=e!==!1?it(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new qe(r,this.maxLookAhead):r};function Ze(e,r,s,o){var l=[e.state.modeGen],f={};Pr(e,r.text,e.doc.mode,s,function(y,E){return l.push(y,E)},f,o);for(var p=s.state,m=function(y){s.baseTokens=l;var E=e.state.overlays[y],I=1,F=0;s.state=!0,Pr(e,r.text,E.mode,s,function(z,G){for(var re=I;F<z;){var le=l[I];le>z&&l.splice(I,1,z,l[I+1],le),I+=2,F=Math.min(z,le)}if(!!G)if(E.opaque)l.splice(re,I-re,z,"overlay "+G),I=re+2;else for(;re<I;re+=2){var he=l[re+1];l[re+1]=(he?he+" ":"")+"overlay "+G}},f),s.state=p,s.baseTokens=null,s.baseTokenPos=1},v=0;v<e.state.overlays.length;++v)m(v);return{styles:l,classes:f.bgClass||f.textClass?f:null}}function Sr(e,r,s){if(!r.styles||r.styles[0]!=e.state.modeGen){var o=bi(e,We(r)),l=r.text.length>e.options.maxHighlightLength&&it(e.doc.mode,o.state),f=Ze(e,r,o);l&&(o.state=l),r.stateAfter=o.save(!l),r.styles=f.styles,f.classes?r.styleClasses=f.classes:r.styleClasses&&(r.styleClasses=null),s===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return r.styles}function bi(e,r,s){var o=e.doc,l=e.display;if(!o.mode.startState)return new ot(o,!0,r);var f=xo(e,r,s),p=f>o.first&&ce(o,f-1).stateAfter,m=p?ot.fromSaved(o,p,f):new ot(o,Ee(o.mode),f);return o.iter(f,r,function(v){ht(e,v.text,m);var y=m.line;v.stateAfter=y==r-1||y%5==0||y>=l.viewFrom&&y<l.viewTo?m.save():null,m.nextLine()}),s&&(o.modeFrontier=m.line),m}function ht(e,r,s,o){var l=e.doc.mode,f=new Ne(r,e.options.tabSize,s);for(f.start=f.pos=o||0,r==""&&Kt(l,s.state);!f.eol();)ur(l,f,s.state),f.start=f.pos}function Kt(e,r){if(e.blankLine)return e.blankLine(r);if(!!e.innerMode){var s=oe(e,r);if(s.mode.blankLine)return s.mode.blankLine(s.state)}}function ur(e,r,s,o){for(var l=0;l<10;l++){o&&(o[0]=oe(e,s).mode);var f=e.token(r,s);if(r.pos>r.start)return f}throw new Error("Mode "+e.name+" failed to advance stream.")}var Dr=function(e,r,s){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=r||null,this.state=s};function Hs(e,r,s,o){var l=e.doc,f=l.mode,p;r=ae(l,r);var m=ce(l,r.line),v=bi(e,r.line,s),y=new Ne(m.text,e.options.tabSize,v),E;for(o&&(E=[]);(o||y.pos<r.ch)&&!y.eol();)y.start=y.pos,p=ur(f,y,v.state),o&&E.push(new Dr(y,p,it(l.mode,v.state)));return o?E:new Dr(y,p,v.state)}function Ir(e,r){if(e)for(;;){var s=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!s)break;e=e.slice(0,s.index)+e.slice(s.index+s[0].length);var o=s[1]?"bgClass":"textClass";r[o]==null?r[o]=s[2]:new RegExp("(?:^|\\s)"+s[2]+"(?:$|\\s)").test(r[o])||(r[o]+=" "+s[2])}return e}function Pr(e,r,s,o,l,f,p){var m=s.flattenSpans;m==null&&(m=e.options.flattenSpans);var v=0,y=null,E=new Ne(r,e.options.tabSize,o),I,F=e.options.addModeClass&&[null];for(r==""&&Ir(Kt(s,o.state),f);!E.eol();){if(E.pos>e.options.maxHighlightLength?(m=!1,p&&ht(e,r,o,E.pos),E.pos=r.length,I=null):I=Ir(ur(s,E,o.state,F),f),F){var z=F[0].name;z&&(I="m-"+(I?z+" "+I:z))}if(!m||y!=I){for(;v<E.start;)v=Math.min(E.start,v+5e3),l(v,y);y=I}E.start=E.pos}for(;v<E.pos;){var G=Math.min(E.pos,v+5e3);l(G,y),v=G}}function xo(e,r,s){for(var o,l,f=e.doc,p=s?-1:r-(e.doc.mode.innerMode?1e3:100),m=r;m>p;--m){if(m<=f.first)return f.first;var v=ce(f,m-1),y=v.stateAfter;if(y&&(!s||m+(y instanceof qe?y.lookAhead:0)<=f.modeFrontier))return m;var E=Se(v.text,null,e.options.tabSize);(l==null||o>E)&&(l=m-1,o=E)}return l}function mv(e,r){if(e.modeFrontier=Math.min(e.modeFrontier,r),!(e.highlightFrontier<r-10)){for(var s=e.first,o=r-1;o>s;o--){var l=ce(e,o).stateAfter;if(l&&(!(l instanceof qe)||o+l.lookAhead<r)){s=o+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,s)}}var cu=!1,Vr=!1;function vv(){cu=!0}function yv(){Vr=!0}function ko(e,r,s){this.marker=e,this.from=r,this.to=s}function wi(e,r){if(e)for(var s=0;s<e.length;++s){var o=e[s];if(o.marker==r)return o}}function bv(e,r){for(var s,o=0;o<e.length;++o)e[o]!=r&&(s||(s=[])).push(e[o]);return s}function wv(e,r,s){var o=s&&window.WeakSet&&(s.markedSpans||(s.markedSpans=new WeakSet));o&&o.has(e.markedSpans)?e.markedSpans.push(r):(e.markedSpans=e.markedSpans?e.markedSpans.concat([r]):[r],o&&o.add(e.markedSpans)),r.marker.attachLine(e)}function xv(e,r,s){var o;if(e)for(var l=0;l<e.length;++l){var f=e[l],p=f.marker,m=f.from==null||(p.inclusiveLeft?f.from<=r:f.from<r);if(m||f.from==r&&p.type=="bookmark"&&(!s||!f.marker.insertLeft)){var v=f.to==null||(p.inclusiveRight?f.to>=r:f.to>r);(o||(o=[])).push(new ko(p,f.from,v?null:f.to))}}return o}function kv(e,r,s){var o;if(e)for(var l=0;l<e.length;++l){var f=e[l],p=f.marker,m=f.to==null||(p.inclusiveRight?f.to>=r:f.to>r);if(m||f.from==r&&p.type=="bookmark"&&(!s||f.marker.insertLeft)){var v=f.from==null||(p.inclusiveLeft?f.from<=r:f.from<r);(o||(o=[])).push(new ko(p,v?null:f.from-r,f.to==null?null:f.to-r))}}return o}function Fs(e,r){if(r.full)return null;var s=Je(e,r.from.line)&&ce(e,r.from.line).markedSpans,o=Je(e,r.to.line)&&ce(e,r.to.line).markedSpans;if(!s&&!o)return null;var l=r.from.ch,f=r.to.ch,p=w(r.from,r.to)==0,m=xv(s,l,p),v=kv(o,f,p),y=r.text.length==1,E=He(r.text).length+(y?l:0);if(m)for(var I=0;I<m.length;++I){var F=m[I];if(F.to==null){var z=wi(v,F.marker);z?y&&(F.to=z.to==null?null:z.to+E):F.to=l}}if(v)for(var G=0;G<v.length;++G){var re=v[G];if(re.to!=null&&(re.to+=E),re.from==null){var le=wi(m,re.marker);le||(re.from=E,y&&(m||(m=[])).push(re))}else re.from+=E,y&&(m||(m=[])).push(re)}m&&(m=fu(m)),v&&v!=m&&(v=fu(v));var he=[m];if(!y){var ve=r.text.length-2,pe;if(ve>0&&m)for(var we=0;we<m.length;++we)m[we].to==null&&(pe||(pe=[])).push(new ko(m[we].marker,null,null));for(var Ie=0;Ie<ve;++Ie)he.push(pe);he.push(v)}return he}function fu(e){for(var r=0;r<e.length;++r){var s=e[r];s.from!=null&&s.from==s.to&&s.marker.clearWhenEmpty!==!1&&e.splice(r--,1)}return e.length?e:null}function Cv(e,r,s){var o=null;if(e.iter(r.line,s.line+1,function(z){if(z.markedSpans)for(var G=0;G<z.markedSpans.length;++G){var re=z.markedSpans[G].marker;re.readOnly&&(!o||ue(o,re)==-1)&&(o||(o=[])).push(re)}}),!o)return null;for(var l=[{from:r,to:s}],f=0;f<o.length;++f)for(var p=o[f],m=p.find(0),v=0;v<l.length;++v){var y=l[v];if(!(w(y.to,m.from)<0||w(y.from,m.to)>0)){var E=[v,1],I=w(y.from,m.from),F=w(y.to,m.to);(I<0||!p.inclusiveLeft&&!I)&&E.push({from:y.from,to:m.from}),(F>0||!p.inclusiveRight&&!F)&&E.push({from:m.to,to:y.to}),l.splice.apply(l,E),v+=E.length-3}}return l}function du(e){var r=e.markedSpans;if(!!r){for(var s=0;s<r.length;++s)r[s].marker.detachLine(e);e.markedSpans=null}}function hu(e,r){if(!!r){for(var s=0;s<r.length;++s)r[s].marker.attachLine(e);e.markedSpans=r}}function Co(e){return e.inclusiveLeft?-1:0}function So(e){return e.inclusiveRight?1:0}function Bs(e,r){var s=e.lines.length-r.lines.length;if(s!=0)return s;var o=e.find(),l=r.find(),f=w(o.from,l.from)||Co(e)-Co(r);if(f)return-f;var p=w(o.to,l.to)||So(e)-So(r);return p||r.id-e.id}function pu(e,r){var s=Vr&&e.markedSpans,o;if(s)for(var l=void 0,f=0;f<s.length;++f)l=s[f],l.marker.collapsed&&(r?l.from:l.to)==null&&(!o||Bs(o,l.marker)<0)&&(o=l.marker);return o}function gu(e){return pu(e,!0)}function Lo(e){return pu(e,!1)}function Sv(e,r){var s=Vr&&e.markedSpans,o;if(s)for(var l=0;l<s.length;++l){var f=s[l];f.marker.collapsed&&(f.from==null||f.from<r)&&(f.to==null||f.to>r)&&(!o||Bs(o,f.marker)<0)&&(o=f.marker)}return o}function mu(e,r,s,o,l){var f=ce(e,r),p=Vr&&f.markedSpans;if(p)for(var m=0;m<p.length;++m){var v=p[m];if(!!v.marker.collapsed){var y=v.marker.find(0),E=w(y.from,s)||Co(v.marker)-Co(l),I=w(y.to,o)||So(v.marker)-So(l);if(!(E>=0&&I<=0||E<=0&&I>=0)&&(E<=0&&(v.marker.inclusiveRight&&l.inclusiveLeft?w(y.to,s)>=0:w(y.to,s)>0)||E>=0&&(v.marker.inclusiveRight&&l.inclusiveLeft?w(y.from,o)<=0:w(y.from,o)<0)))return!0}}}function Lr(e){for(var r;r=gu(e);)e=r.find(-1,!0).line;return e}function Lv(e){for(var r;r=Lo(e);)e=r.find(1,!0).line;return e}function Tv(e){for(var r,s;r=Lo(e);)e=r.find(1,!0).line,(s||(s=[])).push(e);return s}function Ws(e,r){var s=ce(e,r),o=Lr(s);return s==o?r:We(o)}function vu(e,r){if(r>e.lastLine())return r;var s=ce(e,r),o;if(!rn(e,s))return r;for(;o=Lo(s);)s=o.find(1,!0).line;return We(s)+1}function rn(e,r){var s=Vr&&r.markedSpans;if(s){for(var o=void 0,l=0;l<s.length;++l)if(o=s[l],!!o.marker.collapsed){if(o.from==null)return!0;if(!o.marker.widgetNode&&o.from==0&&o.marker.inclusiveLeft&&qs(e,r,o))return!0}}}function qs(e,r,s){if(s.to==null){var o=s.marker.find(1,!0);return qs(e,o.line,wi(o.line.markedSpans,s.marker))}if(s.marker.inclusiveRight&&s.to==r.text.length)return!0;for(var l=void 0,f=0;f<r.markedSpans.length;++f)if(l=r.markedSpans[f],l.marker.collapsed&&!l.marker.widgetNode&&l.from==s.to&&(l.to==null||l.to!=s.from)&&(l.marker.inclusiveLeft||s.marker.inclusiveRight)&&qs(e,r,l))return!0}function Gr(e){e=Lr(e);for(var r=0,s=e.parent,o=0;o<s.lines.length;++o){var l=s.lines[o];if(l==e)break;r+=l.height}for(var f=s.parent;f;s=f,f=s.parent)for(var p=0;p<f.children.length;++p){var m=f.children[p];if(m==s)break;r+=m.height}return r}function To(e){if(e.height==0)return 0;for(var r=e.text.length,s,o=e;s=gu(o);){var l=s.find(0,!0);o=l.from.line,r+=l.from.ch-l.to.ch}for(o=e;s=Lo(o);){var f=s.find(0,!0);r-=o.text.length-f.from.ch,o=f.to.line,r+=o.text.length-f.to.ch}return r}function $s(e){var r=e.display,s=e.doc;r.maxLine=ce(s,s.first),r.maxLineLength=To(r.maxLine),r.maxLineChanged=!0,s.iter(function(o){var l=To(o);l>r.maxLineLength&&(r.maxLineLength=l,r.maxLine=o)})}var Wn=function(e,r,s){this.text=e,hu(this,r),this.height=s?s(this):1};Wn.prototype.lineNo=function(){return We(this)},Vt(Wn);function Mv(e,r,s,o){e.text=r,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),e.order!=null&&(e.order=null),du(e),hu(e,s);var l=o?o(e):1;l!=e.height&&Y(e,l)}function Ev(e){e.parent=null,du(e)}var Nv={},jv={};function yu(e,r){if(!e||/^\s*$/.test(e))return null;var s=r.addModeClass?jv:Nv;return s[e]||(s[e]=e.replace(/\S+/g,"cm-$&"))}function bu(e,r){var s=k("span",null,null,g?"padding-right: .1px":null),o={pre:k("pre",[s],"CodeMirror-line"),content:s,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};r.measure={};for(var l=0;l<=(r.rest?r.rest.length:0);l++){var f=l?r.rest[l-1]:r.line,p=void 0;o.pos=0,o.addToken=Ov,lr(e.display.measure)&&(p=Ot(f,e.doc.direction))&&(o.addToken=Iv(o.addToken,p)),o.map=[];var m=r!=e.display.externalMeasured&&We(f);Pv(f,o,Sr(e,f,m)),f.styleClasses&&(f.styleClasses.bgClass&&(o.bgClass=Be(f.styleClasses.bgClass,o.bgClass||"")),f.styleClasses.textClass&&(o.textClass=Be(f.styleClasses.textClass,o.textClass||""))),o.map.length==0&&o.map.push(0,0,o.content.appendChild(kn(e.display.measure))),l==0?(r.measure.map=o.map,r.measure.cache={}):((r.measure.maps||(r.measure.maps=[])).push(o.map),(r.measure.caches||(r.measure.caches=[])).push({}))}if(g){var v=o.content.lastChild;(/\bcm-tab\b/.test(v.className)||v.querySelector&&v.querySelector(".cm-tab"))&&(o.content.className="cm-tab-wrap-hack")}return Pe(e,"renderLine",e,r.line,o.pre),o.pre.className&&(o.textClass=Be(o.pre.className,o.textClass||"")),o}function Av(e){var r=U("span","\u2022","cm-invalidchar");return r.title="\\u"+e.charCodeAt(0).toString(16),r.setAttribute("aria-label",r.title),r}function Ov(e,r,s,o,l,f,p){if(!!r){var m=e.splitSpaces?Dv(r,e.trailingSpace):r,v=e.cm.state.specialChars,y=!1,E;if(!v.test(r))e.col+=r.length,E=document.createTextNode(m),e.map.push(e.pos,e.pos+r.length,E),d&&h<9&&(y=!0),e.pos+=r.length;else{E=document.createDocumentFragment();for(var I=0;;){v.lastIndex=I;var F=v.exec(r),z=F?F.index-I:r.length-I;if(z){var G=document.createTextNode(m.slice(I,I+z));d&&h<9?E.appendChild(U("span",[G])):E.appendChild(G),e.map.push(e.pos,e.pos+z,G),e.col+=z,e.pos+=z}if(!F)break;I+=z+1;var re=void 0;if(F[0]=="	"){var le=e.cm.options.tabSize,he=le-e.col%le;re=E.appendChild(U("span",Ut(he),"cm-tab")),re.setAttribute("role","presentation"),re.setAttribute("cm-text","	"),e.col+=he}else F[0]=="\r"||F[0]==`
`?(re=E.appendChild(U("span",F[0]=="\r"?"\u240D":"\u2424","cm-invalidchar")),re.setAttribute("cm-text",F[0]),e.col+=1):(re=e.cm.options.specialCharPlaceholder(F[0]),re.setAttribute("cm-text",F[0]),d&&h<9?E.appendChild(U("span",[re])):E.appendChild(re),e.col+=1);e.map.push(e.pos,e.pos+1,re),e.pos++}}if(e.trailingSpace=m.charCodeAt(r.length-1)==32,s||o||l||y||f||p){var ve=s||"";o&&(ve+=o),l&&(ve+=l);var pe=U("span",[E],ve,f);if(p)for(var we in p)p.hasOwnProperty(we)&&we!="style"&&we!="class"&&pe.setAttribute(we,p[we]);return e.content.appendChild(pe)}e.content.appendChild(E)}}function Dv(e,r){if(e.length>1&&!/  /.test(e))return e;for(var s=r,o="",l=0;l<e.length;l++){var f=e.charAt(l);f==" "&&s&&(l==e.length-1||e.charCodeAt(l+1)==32)&&(f="\xA0"),o+=f,s=f==" "}return o}function Iv(e,r){return function(s,o,l,f,p,m,v){l=l?l+" cm-force-border":"cm-force-border";for(var y=s.pos,E=y+o.length;;){for(var I=void 0,F=0;F<r.length&&(I=r[F],!(I.to>y&&I.from<=y));F++);if(I.to>=E)return e(s,o,l,f,p,m,v);e(s,o.slice(0,I.to-y),l,f,null,m,v),f=null,o=o.slice(I.to-y),y=I.to}}}function wu(e,r,s,o){var l=!o&&s.widgetNode;l&&e.map.push(e.pos,e.pos+r,l),!o&&e.cm.display.input.needsContentAttribute&&(l||(l=e.content.appendChild(document.createElement("span"))),l.setAttribute("cm-marker",s.id)),l&&(e.cm.display.input.setUneditable(l),e.content.appendChild(l)),e.pos+=r,e.trailingSpace=!1}function Pv(e,r,s){var o=e.markedSpans,l=e.text,f=0;if(!o){for(var p=1;p<s.length;p+=2)r.addToken(r,l.slice(f,f=s[p]),yu(s[p+1],r.cm.options));return}for(var m=l.length,v=0,y=1,E="",I,F,z=0,G,re,le,he,ve;;){if(z==v){G=re=le=F="",ve=null,he=null,z=Infinity;for(var pe=[],we=void 0,Ie=0;Ie<o.length;++Ie){var Ae=o[Ie],Ue=Ae.marker;if(Ue.type=="bookmark"&&Ae.from==v&&Ue.widgetNode)pe.push(Ue);else if(Ae.from<=v&&(Ae.to==null||Ae.to>v||Ue.collapsed&&Ae.to==v&&Ae.from==v)){if(Ae.to!=null&&Ae.to!=v&&z>Ae.to&&(z=Ae.to,re=""),Ue.className&&(G+=" "+Ue.className),Ue.css&&(F=(F?F+";":"")+Ue.css),Ue.startStyle&&Ae.from==v&&(le+=" "+Ue.startStyle),Ue.endStyle&&Ae.to==z&&(we||(we=[])).push(Ue.endStyle,Ae.to),Ue.title&&((ve||(ve={})).title=Ue.title),Ue.attributes)for(var rt in Ue.attributes)(ve||(ve={}))[rt]=Ue.attributes[rt];Ue.collapsed&&(!he||Bs(he.marker,Ue)<0)&&(he=Ae)}else Ae.from>v&&z>Ae.from&&(z=Ae.from)}if(we)for(var Tt=0;Tt<we.length;Tt+=2)we[Tt+1]==z&&(re+=" "+we[Tt]);if(!he||he.from==v)for(var ct=0;ct<pe.length;++ct)wu(r,0,pe[ct]);if(he&&(he.from||0)==v){if(wu(r,(he.to==null?m+1:he.to)-v,he.marker,he.from==null),he.to==null)return;he.to==v&&(he=!1)}}if(v>=m)break;for(var or=Math.min(m,z);;){if(E){var Jt=v+E.length;if(!he){var yt=Jt>or?E.slice(0,or-v):E;r.addToken(r,yt,I?I+G:G,le,v+yt.length==z?re:"",F,ve)}if(Jt>=or){E=E.slice(or-v),v=or;break}v=Jt,le=""}E=l.slice(f,f=s[y++]),I=yu(s[y++],r.cm.options)}}}function xu(e,r,s){this.line=r,this.rest=Tv(r),this.size=this.rest?We(He(this.rest))-s+1:1,this.node=this.text=null,this.hidden=rn(e,r)}function Mo(e,r,s){for(var o=[],l,f=r;f<s;f=l){var p=new xu(e.doc,ce(e.doc,f),f);l=f+p.size,o.push(p)}return o}var qn=null;function zv(e){qn?qn.ops.push(e):e.ownsGroup=qn={ops:[e],delayedCallbacks:[]}}function Rv(e){var r=e.delayedCallbacks,s=0;do{for(;s<r.length;s++)r[s].call(null);for(var o=0;o<e.ops.length;o++){var l=e.ops[o];if(l.cursorActivityHandlers)for(;l.cursorActivityCalled<l.cursorActivityHandlers.length;)l.cursorActivityHandlers[l.cursorActivityCalled++].call(null,l.cm)}}while(s<r.length)}function _v(e,r){var s=e.ownsGroup;if(!!s)try{Rv(s)}finally{qn=null,r(s)}}var xi=null;function Ct(e,r){var s=dr(e,r);if(!!s.length){var o=Array.prototype.slice.call(arguments,2),l;qn?l=qn.delayedCallbacks:xi?l=xi:(l=xi=[],setTimeout(Hv,0));for(var f=function(m){l.push(function(){return s[m].apply(null,o)})},p=0;p<s.length;++p)f(p)}}function Hv(){var e=xi;xi=null;for(var r=0;r<e.length;++r)e[r]()}function ku(e,r,s,o){for(var l=0;l<r.changes.length;l++){var f=r.changes[l];f=="text"?Bv(e,r):f=="gutter"?Su(e,r,s,o):f=="class"?Us(e,r):f=="widget"&&Wv(e,r,o)}r.changes=null}function ki(e){return e.node==e.text&&(e.node=U("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),d&&h<8&&(e.node.style.zIndex=2)),e.node}function Fv(e,r){var s=r.bgClass?r.bgClass+" "+(r.line.bgClass||""):r.line.bgClass;if(s&&(s+=" CodeMirror-linebackground"),r.background)s?r.background.className=s:(r.background.parentNode.removeChild(r.background),r.background=null);else if(s){var o=ki(r);r.background=o.insertBefore(U("div",null,s),o.firstChild),e.display.input.setUneditable(r.background)}}function Cu(e,r){var s=e.display.externalMeasured;return s&&s.line==r.line?(e.display.externalMeasured=null,r.measure=s.measure,s.built):bu(e,r)}function Bv(e,r){var s=r.text.className,o=Cu(e,r);r.text==r.node&&(r.node=o.pre),r.text.parentNode.replaceChild(o.pre,r.text),r.text=o.pre,o.bgClass!=r.bgClass||o.textClass!=r.textClass?(r.bgClass=o.bgClass,r.textClass=o.textClass,Us(e,r)):s&&(r.text.className=s)}function Us(e,r){Fv(e,r),r.line.wrapClass?ki(r).className=r.line.wrapClass:r.node!=r.text&&(r.node.className="");var s=r.textClass?r.textClass+" "+(r.line.textClass||""):r.line.textClass;r.text.className=s||""}function Su(e,r,s,o){if(r.gutter&&(r.node.removeChild(r.gutter),r.gutter=null),r.gutterBackground&&(r.node.removeChild(r.gutterBackground),r.gutterBackground=null),r.line.gutterClass){var l=ki(r);r.gutterBackground=U("div",null,"CodeMirror-gutter-background "+r.line.gutterClass,"left: "+(e.options.fixedGutter?o.fixedPos:-o.gutterTotalWidth)+"px; width: "+o.gutterTotalWidth+"px"),e.display.input.setUneditable(r.gutterBackground),l.insertBefore(r.gutterBackground,r.text)}var f=r.line.gutterMarkers;if(e.options.lineNumbers||f){var p=ki(r),m=r.gutter=U("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?o.fixedPos:-o.gutterTotalWidth)+"px");if(m.setAttribute("aria-hidden","true"),e.display.input.setUneditable(m),p.insertBefore(m,r.text),r.line.gutterClass&&(m.className+=" "+r.line.gutterClass),e.options.lineNumbers&&(!f||!f["CodeMirror-linenumbers"])&&(r.lineNumber=m.appendChild(U("div",Or(e.options,s),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+o.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),f)for(var v=0;v<e.display.gutterSpecs.length;++v){var y=e.display.gutterSpecs[v].className,E=f.hasOwnProperty(y)&&f[y];E&&m.appendChild(U("div",[E],"CodeMirror-gutter-elt","left: "+o.gutterLeft[y]+"px; width: "+o.gutterWidth[y]+"px"))}}}function Wv(e,r,s){r.alignable&&(r.alignable=null);for(var o=q("CodeMirror-linewidget"),l=r.node.firstChild,f=void 0;l;l=f)f=l.nextSibling,o.test(l.className)&&r.node.removeChild(l);Lu(e,r,s)}function qv(e,r,s,o){var l=Cu(e,r);return r.text=r.node=l.pre,l.bgClass&&(r.bgClass=l.bgClass),l.textClass&&(r.textClass=l.textClass),Us(e,r),Su(e,r,s,o),Lu(e,r,o),r.node}function Lu(e,r,s){if(Tu(e,r.line,r,s,!0),r.rest)for(var o=0;o<r.rest.length;o++)Tu(e,r.rest[o],r,s,!1)}function Tu(e,r,s,o,l){if(!!r.widgets)for(var f=ki(s),p=0,m=r.widgets;p<m.length;++p){var v=m[p],y=U("div",[v.node],"CodeMirror-linewidget"+(v.className?" "+v.className:""));v.handleMouseEvents||y.setAttribute("cm-ignore-events","true"),$v(v,y,s,o),e.display.input.setUneditable(y),l&&v.above?f.insertBefore(y,s.gutter||s.text):f.appendChild(y),Ct(v,"redraw")}}function $v(e,r,s,o){if(e.noHScroll){(s.alignable||(s.alignable=[])).push(r);var l=o.wrapperWidth;r.style.left=o.fixedPos+"px",e.coverGutter||(l-=o.gutterTotalWidth,r.style.paddingLeft=o.gutterTotalWidth+"px"),r.style.width=l+"px"}e.coverGutter&&(r.style.zIndex=5,r.style.position="relative",e.noHScroll||(r.style.marginLeft=-o.gutterTotalWidth+"px"))}function Ci(e){if(e.height!=null)return e.height;var r=e.doc.cm;if(!r)return 0;if(!te(document.body,e.node)){var s="position: relative;";e.coverGutter&&(s+="margin-left: -"+r.display.gutters.offsetWidth+"px;"),e.noHScroll&&(s+="width: "+r.display.wrapper.clientWidth+"px;"),W(r.display.measure,U("div",[e.node],null,s))}return e.height=e.node.parentNode.offsetHeight}function Yr(e,r){for(var s=kr(r);s!=e.wrapper;s=s.parentNode)if(!s||s.nodeType==1&&s.getAttribute("cm-ignore-events")=="true"||s.parentNode==e.sizer&&s!=e.mover)return!0}function Eo(e){return e.lineSpace.offsetTop}function Vs(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Mu(e){if(e.cachedPaddingH)return e.cachedPaddingH;var r=W(e.measure,U("pre","x","CodeMirror-line-like")),s=window.getComputedStyle?window.getComputedStyle(r):r.currentStyle,o={left:parseInt(s.paddingLeft),right:parseInt(s.paddingRight)};return!isNaN(o.left)&&!isNaN(o.right)&&(e.cachedPaddingH=o),o}function zr(e){return ge-e.display.nativeBarWidth}function Sn(e){return e.display.scroller.clientWidth-zr(e)-e.display.barWidth}function Gs(e){return e.display.scroller.clientHeight-zr(e)-e.display.barHeight}function Uv(e,r,s){var o=e.options.lineWrapping,l=o&&Sn(e);if(!r.measure.heights||o&&r.measure.width!=l){var f=r.measure.heights=[];if(o){r.measure.width=l;for(var p=r.text.firstChild.getClientRects(),m=0;m<p.length-1;m++){var v=p[m],y=p[m+1];Math.abs(v.bottom-y.bottom)>2&&f.push((v.bottom+y.top)/2-s.top)}}f.push(s.bottom-s.top)}}function Eu(e,r,s){if(e.line==r)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var o=0;o<e.rest.length;o++)if(e.rest[o]==r)return{map:e.measure.maps[o],cache:e.measure.caches[o]};for(var l=0;l<e.rest.length;l++)if(We(e.rest[l])>s)return{map:e.measure.maps[l],cache:e.measure.caches[l],before:!0}}}function Vv(e,r){r=Lr(r);var s=We(r),o=e.display.externalMeasured=new xu(e.doc,r,s);o.lineN=s;var l=o.built=bu(e,o);return o.text=l.pre,W(e.display.lineMeasure,l.pre),o}function Nu(e,r,s,o){return Rr(e,$n(e,r),s,o)}function Ys(e,r){if(r>=e.display.viewFrom&&r<e.display.viewTo)return e.display.view[Mn(e,r)];var s=e.display.externalMeasured;if(s&&r>=s.lineN&&r<s.lineN+s.size)return s}function $n(e,r){var s=We(r),o=Ys(e,s);o&&!o.text?o=null:o&&o.changes&&(ku(e,o,s,Xs(e)),e.curOp.forceUpdate=!0),o||(o=Vv(e,r));var l=Eu(o,r,s);return{line:r,view:o,rect:null,map:l.map,cache:l.cache,before:l.before,hasHeights:!1}}function Rr(e,r,s,o,l){r.before&&(s=-1);var f=s+(o||""),p;return r.cache.hasOwnProperty(f)?p=r.cache[f]:(r.rect||(r.rect=r.view.text.getBoundingClientRect()),r.hasHeights||(Uv(e,r.view,r.rect),r.hasHeights=!0),p=Yv(e,r,s,o),p.bogus||(r.cache[f]=p)),{left:p.left,right:p.right,top:l?p.rtop:p.top,bottom:l?p.rbottom:p.bottom}}var ju={left:0,right:0,top:0,bottom:0};function Au(e,r,s){for(var o,l,f,p,m,v,y=0;y<e.length;y+=3)if(m=e[y],v=e[y+1],r<m?(l=0,f=1,p="left"):r<v?(l=r-m,f=l+1):(y==e.length-3||r==v&&e[y+3]>r)&&(f=v-m,l=f-1,r>=v&&(p="right")),l!=null){if(o=e[y+2],m==v&&s==(o.insertLeft?"left":"right")&&(p=s),s=="left"&&l==0)for(;y&&e[y-2]==e[y-3]&&e[y-1].insertLeft;)o=e[(y-=3)+2],p="left";if(s=="right"&&l==v-m)for(;y<e.length-3&&e[y+3]==e[y+4]&&!e[y+5].insertLeft;)o=e[(y+=3)+2],p="right";break}return{node:o,start:l,end:f,collapse:p,coverStart:m,coverEnd:v}}function Gv(e,r){var s=ju;if(r=="left")for(var o=0;o<e.length&&(s=e[o]).left==s.right;o++);else for(var l=e.length-1;l>=0&&(s=e[l]).left==s.right;l--);return s}function Yv(e,r,s,o){var l=Au(r.map,s,o),f=l.node,p=l.start,m=l.end,v=l.collapse,y;if(f.nodeType==3){for(var E=0;E<4;E++){for(;p&&Ve(r.line.text.charAt(l.coverStart+p));)--p;for(;l.coverStart+m<l.coverEnd&&Ve(r.line.text.charAt(l.coverStart+m));)++m;if(d&&h<9&&p==0&&m==l.coverEnd-l.coverStart?y=f.parentNode.getBoundingClientRect():y=Gv(Q(f,p,m).getClientRects(),o),y.left||y.right||p==0)break;m=p,p=p-1,v="right"}d&&h<11&&(y=Kv(e.display.measure,y))}else{p>0&&(v=o="right");var I;e.options.lineWrapping&&(I=f.getClientRects()).length>1?y=I[o=="right"?I.length-1:0]:y=f.getBoundingClientRect()}if(d&&h<9&&!p&&(!y||!y.left&&!y.right)){var F=f.parentNode.getClientRects()[0];F?y={left:F.left,right:F.left+Vn(e.display),top:F.top,bottom:F.bottom}:y=ju}for(var z=y.top-r.rect.top,G=y.bottom-r.rect.top,re=(z+G)/2,le=r.view.measure.heights,he=0;he<le.length-1&&!(re<le[he]);he++);var ve=he?le[he-1]:0,pe=le[he],we={left:(v=="right"?y.right:y.left)-r.rect.left,right:(v=="left"?y.left:y.right)-r.rect.left,top:ve,bottom:pe};return!y.left&&!y.right&&(we.bogus=!0),e.options.singleCursorHeightPerLine||(we.rtop=z,we.rbottom=G),we}function Kv(e,r){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Cr(e))return r;var s=screen.logicalXDPI/screen.deviceXDPI,o=screen.logicalYDPI/screen.deviceYDPI;return{left:r.left*s,right:r.right*s,top:r.top*o,bottom:r.bottom*o}}function Ou(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var r=0;r<e.rest.length;r++)e.measure.caches[r]={}}function Du(e){e.display.externalMeasure=null,K(e.display.lineMeasure);for(var r=0;r<e.display.view.length;r++)Ou(e.display.view[r])}function Si(e){Du(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Iu(){return x&&N?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Pu(){return x&&N?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Ks(e){var r=Lr(e),s=r.widgets,o=0;if(s)for(var l=0;l<s.length;++l)s[l].above&&(o+=Ci(s[l]));return o}function No(e,r,s,o,l){if(!l){var f=Ks(r);s.top+=f,s.bottom+=f}if(o=="line")return s;o||(o="local");var p=Gr(r);if(o=="local"?p+=Eo(e.display):p-=e.display.viewOffset,o=="page"||o=="window"){var m=e.display.lineSpace.getBoundingClientRect();p+=m.top+(o=="window"?0:Pu());var v=m.left+(o=="window"?0:Iu());s.left+=v,s.right+=v}return s.top+=p,s.bottom+=p,s}function zu(e,r,s){if(s=="div")return r;var o=r.left,l=r.top;if(s=="page")o-=Iu(),l-=Pu();else if(s=="local"||!s){var f=e.display.sizer.getBoundingClientRect();o+=f.left,l+=f.top}var p=e.display.lineSpace.getBoundingClientRect();return{left:o-p.left,top:l-p.top}}function jo(e,r,s,o,l){return o||(o=ce(e.doc,r.line)),No(e,o,Nu(e,o,r.ch,l),s)}function Tr(e,r,s,o,l,f){o=o||ce(e.doc,r.line),l||(l=$n(e,o));function p(G,re){var le=Rr(e,l,G,re?"right":"left",f);return re?le.left=le.right:le.right=le.left,No(e,o,le,s)}var m=Ot(o,e.doc.direction),v=r.ch,y=r.sticky;if(v>=o.text.length?(v=o.text.length,y="before"):v<=0&&(v=0,y="after"),!m)return p(y=="before"?v-1:v,y=="before");function E(G,re,le){var he=m[re],ve=he.level==1;return p(le?G-1:G,ve!=le)}var I=nt(m,v,y),F=_t,z=E(v,I,y=="before");return F!=null&&(z.other=E(v,F,y!="before")),z}function Ru(e,r){var s=0;r=ae(e.doc,r),e.options.lineWrapping||(s=Vn(e.display)*r.ch);var o=ce(e.doc,r.line),l=Gr(o)+Eo(e.display);return{left:s,right:s,top:l,bottom:l+o.height}}function Qs(e,r,s,o,l){var f=ie(e,r,s);return f.xRel=l,o&&(f.outside=o),f}function Zs(e,r,s){var o=e.doc;if(s+=e.display.viewOffset,s<0)return Qs(o.first,0,null,-1,-1);var l=Dt(o,s),f=o.first+o.size-1;if(l>f)return Qs(o.first+o.size-1,ce(o,f).text.length,null,1,1);r<0&&(r=0);for(var p=ce(o,l);;){var m=Qv(e,p,l,r,s),v=Sv(p,m.ch+(m.xRel>0||m.outside>0?1:0));if(!v)return m;var y=v.find(1);if(y.line==l)return y;p=ce(o,l=y.line)}}function _u(e,r,s,o){o-=Ks(r);var l=r.text.length,f=ar(function(p){return Rr(e,s,p-1).bottom<=o},l,0);return l=ar(function(p){return Rr(e,s,p).top>o},f,l),{begin:f,end:l}}function Hu(e,r,s,o){s||(s=$n(e,r));var l=No(e,r,Rr(e,s,o),"line").top;return _u(e,r,s,l)}function Js(e,r,s,o){return e.bottom<=s?!1:e.top>s?!0:(o?e.left:e.right)>r}function Qv(e,r,s,o,l){l-=Gr(r);var f=$n(e,r),p=Ks(r),m=0,v=r.text.length,y=!0,E=Ot(r,e.doc.direction);if(E){var I=(e.options.lineWrapping?Jv:Zv)(e,r,s,f,E,o,l);y=I.level!=1,m=y?I.from:I.to-1,v=y?I.to:I.from-1}var F=null,z=null,G=ar(function(Ie){var Ae=Rr(e,f,Ie);return Ae.top+=p,Ae.bottom+=p,Js(Ae,o,l,!1)?(Ae.top<=l&&Ae.left<=o&&(F=Ie,z=Ae),!0):!1},m,v),re,le,he=!1;if(z){var ve=o-z.left<z.right-o,pe=ve==y;G=F+(pe?0:1),le=pe?"after":"before",re=ve?z.left:z.right}else{!y&&(G==v||G==m)&&G++,le=G==0?"after":G==r.text.length?"before":Rr(e,f,G-(y?1:0)).bottom+p<=l==y?"after":"before";var we=Tr(e,ie(s,G,le),"line",r,f);re=we.left,he=l<we.top?-1:l>=we.bottom?1:0}return G=kt(r.text,G,1),Qs(s,G,le,he,o-re)}function Zv(e,r,s,o,l,f,p){var m=ar(function(I){var F=l[I],z=F.level!=1;return Js(Tr(e,ie(s,z?F.to:F.from,z?"before":"after"),"line",r,o),f,p,!0)},0,l.length-1),v=l[m];if(m>0){var y=v.level!=1,E=Tr(e,ie(s,y?v.from:v.to,y?"after":"before"),"line",r,o);Js(E,f,p,!0)&&E.top>p&&(v=l[m-1])}return v}function Jv(e,r,s,o,l,f,p){var m=_u(e,r,o,p),v=m.begin,y=m.end;/\s/.test(r.text.charAt(y-1))&&y--;for(var E=null,I=null,F=0;F<l.length;F++){var z=l[F];if(!(z.from>=y||z.to<=v)){var G=z.level!=1,re=Rr(e,o,G?Math.min(y,z.to)-1:Math.max(v,z.from)).right,le=re<f?f-re+1e9:re-f;(!E||I>le)&&(E=z,I=le)}}return E||(E=l[l.length-1]),E.from<v&&(E={from:v,to:E.to,level:E.level}),E.to>y&&(E={from:E.from,to:y,level:E.level}),E}var Ln;function Un(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(Ln==null){Ln=U("pre",null,"CodeMirror-line-like");for(var r=0;r<49;++r)Ln.appendChild(document.createTextNode("x")),Ln.appendChild(U("br"));Ln.appendChild(document.createTextNode("x"))}W(e.measure,Ln);var s=Ln.offsetHeight/50;return s>3&&(e.cachedTextHeight=s),K(e.measure),s||1}function Vn(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var r=U("span","xxxxxxxxxx"),s=U("pre",[r],"CodeMirror-line-like");W(e.measure,s);var o=r.getBoundingClientRect(),l=(o.right-o.left)/10;return l>2&&(e.cachedCharWidth=l),l||10}function Xs(e){for(var r=e.display,s={},o={},l=r.gutters.clientLeft,f=r.gutters.firstChild,p=0;f;f=f.nextSibling,++p){var m=e.display.gutterSpecs[p].className;s[m]=f.offsetLeft+f.clientLeft+l,o[m]=f.clientWidth}return{fixedPos:ea(r),gutterTotalWidth:r.gutters.offsetWidth,gutterLeft:s,gutterWidth:o,wrapperWidth:r.wrapper.clientWidth}}function ea(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Fu(e){var r=Un(e.display),s=e.options.lineWrapping,o=s&&Math.max(5,e.display.scroller.clientWidth/Vn(e.display)-3);return function(l){if(rn(e.doc,l))return 0;var f=0;if(l.widgets)for(var p=0;p<l.widgets.length;p++)l.widgets[p].height&&(f+=l.widgets[p].height);return s?f+(Math.ceil(l.text.length/o)||1)*r:f+r}}function ta(e){var r=e.doc,s=Fu(e);r.iter(function(o){var l=s(o);l!=o.height&&Y(o,l)})}function Tn(e,r,s,o){var l=e.display;if(!s&&kr(r).getAttribute("cm-not-content")=="true")return null;var f,p,m=l.lineSpace.getBoundingClientRect();try{f=r.clientX-m.left,p=r.clientY-m.top}catch(I){return null}var v=Zs(e,f,p),y;if(o&&v.xRel>0&&(y=ce(e.doc,v.line).text).length==v.ch){var E=Se(y,y.length,e.options.tabSize)-y.length;v=ie(v.line,Math.max(0,Math.round((f-Mu(e.display).left)/Vn(e.display))-E))}return v}function Mn(e,r){if(r>=e.display.viewTo||(r-=e.display.viewFrom,r<0))return null;for(var s=e.display.view,o=0;o<s.length;o++)if(r-=s[o].size,r<0)return o}function Qt(e,r,s,o){r==null&&(r=e.doc.first),s==null&&(s=e.doc.first+e.doc.size),o||(o=0);var l=e.display;if(o&&s<l.viewTo&&(l.updateLineNumbers==null||l.updateLineNumbers>r)&&(l.updateLineNumbers=r),e.curOp.viewChanged=!0,r>=l.viewTo)Vr&&Ws(e.doc,r)<l.viewTo&&on(e);else if(s<=l.viewFrom)Vr&&vu(e.doc,s+o)>l.viewFrom?on(e):(l.viewFrom+=o,l.viewTo+=o);else if(r<=l.viewFrom&&s>=l.viewTo)on(e);else if(r<=l.viewFrom){var f=Ao(e,s,s+o,1);f?(l.view=l.view.slice(f.index),l.viewFrom=f.lineN,l.viewTo+=o):on(e)}else if(s>=l.viewTo){var p=Ao(e,r,r,-1);p?(l.view=l.view.slice(0,p.index),l.viewTo=p.lineN):on(e)}else{var m=Ao(e,r,r,-1),v=Ao(e,s,s+o,1);m&&v?(l.view=l.view.slice(0,m.index).concat(Mo(e,m.lineN,v.lineN)).concat(l.view.slice(v.index)),l.viewTo+=o):on(e)}var y=l.externalMeasured;y&&(s<y.lineN?y.lineN+=o:r<y.lineN+y.size&&(l.externalMeasured=null))}function nn(e,r,s){e.curOp.viewChanged=!0;var o=e.display,l=e.display.externalMeasured;if(l&&r>=l.lineN&&r<l.lineN+l.size&&(o.externalMeasured=null),!(r<o.viewFrom||r>=o.viewTo)){var f=o.view[Mn(e,r)];if(f.node!=null){var p=f.changes||(f.changes=[]);ue(p,s)==-1&&p.push(s)}}}function on(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Ao(e,r,s,o){var l=Mn(e,r),f,p=e.display.view;if(!Vr||s==e.doc.first+e.doc.size)return{index:l,lineN:s};for(var m=e.display.viewFrom,v=0;v<l;v++)m+=p[v].size;if(m!=r){if(o>0){if(l==p.length-1)return null;f=m+p[l].size-r,l++}else f=m-r;r+=f,s+=f}for(;Ws(e.doc,s)!=s;){if(l==(o<0?0:p.length-1))return null;s+=o*p[l-(o<0?1:0)].size,l+=o}return{index:l,lineN:s}}function Xv(e,r,s){var o=e.display,l=o.view;l.length==0||r>=o.viewTo||s<=o.viewFrom?(o.view=Mo(e,r,s),o.viewFrom=r):(o.viewFrom>r?o.view=Mo(e,r,o.viewFrom).concat(o.view):o.viewFrom<r&&(o.view=o.view.slice(Mn(e,r))),o.viewFrom=r,o.viewTo<s?o.view=o.view.concat(Mo(e,o.viewTo,s)):o.viewTo>s&&(o.view=o.view.slice(0,Mn(e,s)))),o.viewTo=s}function Bu(e){for(var r=e.display.view,s=0,o=0;o<r.length;o++){var l=r[o];!l.hidden&&(!l.node||l.changes)&&++s}return s}function Li(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Wu(e,r){r===void 0&&(r=!0);var s=e.doc,o={},l=o.cursors=document.createDocumentFragment(),f=o.selection=document.createDocumentFragment(),p=e.options.$customCursor;p&&(r=!0);for(var m=0;m<s.sel.ranges.length;m++)if(!(!r&&m==s.sel.primIndex)){var v=s.sel.ranges[m];if(!(v.from().line>=e.display.viewTo||v.to().line<e.display.viewFrom)){var y=v.empty();if(p){var E=p(e,v);E&&ra(e,E,l)}else(y||e.options.showCursorWhenSelecting)&&ra(e,v.head,l);y||ey(e,v,f)}}return o}function ra(e,r,s){var o=Tr(e,r,"div",null,null,!e.options.singleCursorHeightPerLine),l=s.appendChild(U("div","\xA0","CodeMirror-cursor"));if(l.style.left=o.left+"px",l.style.top=o.top+"px",l.style.height=Math.max(0,o.bottom-o.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var f=jo(e,r,"div",null,null),p=f.right-f.left;l.style.width=(p>0?p:e.defaultCharWidth())+"px"}if(o.other){var m=s.appendChild(U("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));m.style.display="",m.style.left=o.other.left+"px",m.style.top=o.other.top+"px",m.style.height=(o.other.bottom-o.other.top)*.85+"px"}}function Oo(e,r){return e.top-r.top||e.left-r.left}function ey(e,r,s){var o=e.display,l=e.doc,f=document.createDocumentFragment(),p=Mu(e.display),m=p.left,v=Math.max(o.sizerWidth,Sn(e)-o.sizer.offsetLeft)-p.right,y=l.direction=="ltr";function E(pe,we,Ie,Ae){we<0&&(we=0),we=Math.round(we),Ae=Math.round(Ae),f.appendChild(U("div",null,"CodeMirror-selected","position: absolute; left: "+pe+`px;
                             top: `+we+"px; width: "+(Ie??v-pe)+`px;
                             height: `+(Ae-we)+"px"))}function I(pe,we,Ie){var Ae=ce(l,pe),Ue=Ae.text.length,rt,Tt;function ct(yt,Xt){return jo(e,ie(pe,yt),"div",Ae,Xt)}function or(yt,Xt,Nt){var xt=Hu(e,Ae,null,yt),bt=Xt=="ltr"==(Nt=="after")?"left":"right",pt=Nt=="after"?xt.begin:xt.end-(/\s/.test(Ae.text.charAt(xt.end-1))?2:1);return ct(pt,bt)[bt]}var Jt=Ot(Ae,l.direction);return Bn(Jt,we||0,Ie??Ue,function(yt,Xt,Nt,xt){var bt=Nt=="ltr",pt=ct(yt,bt?"left":"right"),er=ct(Xt-1,bt?"right":"left"),oi=we==null&&yt==0,fn=Ie==null&&Xt==Ue,Pt=xt==0,_r=!Jt||xt==Jt.length-1;if(er.top-pt.top<=3){var Mt=(y?oi:fn)&&Pt,Ea=(y?fn:oi)&&_r,Zr=Mt?m:(bt?pt:er).left,On=Ea?v:(bt?er:pt).right;E(Zr,pt.top,On-Zr,pt.bottom)}else{var Dn,qt,si,Na;bt?(Dn=y&&oi&&Pt?m:pt.left,qt=y?v:or(yt,Nt,"before"),si=y?m:or(Xt,Nt,"after"),Na=y&&fn&&_r?v:er.right):(Dn=y?or(yt,Nt,"before"):m,qt=!y&&oi&&Pt?v:pt.right,si=!y&&fn&&_r?m:er.left,Na=y?or(Xt,Nt,"after"):v),E(Dn,pt.top,qt-Dn,pt.bottom),pt.bottom<er.top&&E(m,pt.bottom,null,er.top),E(si,er.top,Na-si,er.bottom)}(!rt||Oo(pt,rt)<0)&&(rt=pt),Oo(er,rt)<0&&(rt=er),(!Tt||Oo(pt,Tt)<0)&&(Tt=pt),Oo(er,Tt)<0&&(Tt=er)}),{start:rt,end:Tt}}var F=r.from(),z=r.to();if(F.line==z.line)I(F.line,F.ch,z.ch);else{var G=ce(l,F.line),re=ce(l,z.line),le=Lr(G)==Lr(re),he=I(F.line,F.ch,le?G.text.length+1:null).end,ve=I(z.line,le?0:null,z.ch).start;le&&(he.top<ve.top-2?(E(he.right,he.top,null,he.bottom),E(m,ve.top,ve.left,ve.bottom)):E(he.right,he.top,ve.left-he.right,he.bottom)),he.bottom<ve.top&&E(m,he.bottom,null,ve.top)}s.appendChild(f)}function na(e){if(!!e.state.focused){var r=e.display;clearInterval(r.blinker);var s=!0;r.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?r.blinker=setInterval(function(){e.hasFocus()||Gn(e),r.cursorDiv.style.visibility=(s=!s)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(r.cursorDiv.style.visibility="hidden")}}function qu(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||oa(e))}function ia(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&Gn(e))},100)}function oa(e,r){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),e.options.readOnly!="nocursor"&&(e.state.focused||(Pe(e,"focus",e,r),e.state.focused=!0,Oe(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),g&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),na(e))}function Gn(e,r){e.state.delayingBlurEvent||(e.state.focused&&(Pe(e,"blur",e,r),e.state.focused=!1,H(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function Do(e){for(var r=e.display,s=r.lineDiv.offsetTop,o=Math.max(0,r.scroller.getBoundingClientRect().top),l=r.lineDiv.getBoundingClientRect().top,f=0,p=0;p<r.view.length;p++){var m=r.view[p],v=e.options.lineWrapping,y=void 0,E=0;if(!m.hidden){if(l+=m.line.height,d&&h<8){var I=m.node.offsetTop+m.node.offsetHeight;y=I-s,s=I}else{var F=m.node.getBoundingClientRect();y=F.bottom-F.top,!v&&m.text.firstChild&&(E=m.text.firstChild.getBoundingClientRect().right-F.left-1)}var z=m.line.height-y;if((z>.005||z<-.005)&&(l<o&&(f-=z),Y(m.line,y),$u(m.line),m.rest))for(var G=0;G<m.rest.length;G++)$u(m.rest[G]);if(E>e.display.sizerWidth){var re=Math.ceil(E/Vn(e.display));re>e.display.maxLineLength&&(e.display.maxLineLength=re,e.display.maxLine=m.line,e.display.maxLineChanged=!0)}}}Math.abs(f)>2&&(r.scroller.scrollTop+=f)}function $u(e){if(e.widgets)for(var r=0;r<e.widgets.length;++r){var s=e.widgets[r],o=s.node.parentNode;o&&(s.height=o.offsetHeight)}}function Io(e,r,s){var o=s&&s.top!=null?Math.max(0,s.top):e.scroller.scrollTop;o=Math.floor(o-Eo(e));var l=s&&s.bottom!=null?s.bottom:o+e.wrapper.clientHeight,f=Dt(r,o),p=Dt(r,l);if(s&&s.ensure){var m=s.ensure.from.line,v=s.ensure.to.line;m<f?(f=m,p=Dt(r,Gr(ce(r,m))+e.wrapper.clientHeight)):Math.min(v,r.lastLine())>=p&&(f=Dt(r,Gr(ce(r,v))-e.wrapper.clientHeight),p=v)}return{from:f,to:Math.max(p,f+1)}}function ty(e,r){if(!ut(e,"scrollCursorIntoView")){var s=e.display,o=s.sizer.getBoundingClientRect(),l=null;if(r.top+o.top<0?l=!0:r.bottom+o.top>(window.innerHeight||document.documentElement.clientHeight)&&(l=!1),l!=null&&!T){var f=U("div","\u200B",null,`position: absolute;
                         top: `+(r.top-s.viewOffset-Eo(e.display))+`px;
                         height: `+(r.bottom-r.top+zr(e)+s.barHeight)+`px;
                         left: `+r.left+"px; width: "+Math.max(2,r.right-r.left)+"px;");e.display.lineSpace.appendChild(f),f.scrollIntoView(l),e.display.lineSpace.removeChild(f)}}}function ry(e,r,s,o){o==null&&(o=0);var l;!e.options.lineWrapping&&r==s&&(s=r.sticky=="before"?ie(r.line,r.ch+1,"before"):r,r=r.ch?ie(r.line,r.sticky=="before"?r.ch-1:r.ch,"after"):r);for(var f=0;f<5;f++){var p=!1,m=Tr(e,r),v=!s||s==r?m:Tr(e,s);l={left:Math.min(m.left,v.left),top:Math.min(m.top,v.top)-o,right:Math.max(m.left,v.left),bottom:Math.max(m.bottom,v.bottom)+o};var y=sa(e,l),E=e.doc.scrollTop,I=e.doc.scrollLeft;if(y.scrollTop!=null&&(Mi(e,y.scrollTop),Math.abs(e.doc.scrollTop-E)>1&&(p=!0)),y.scrollLeft!=null&&(En(e,y.scrollLeft),Math.abs(e.doc.scrollLeft-I)>1&&(p=!0)),!p)break}return l}function ny(e,r){var s=sa(e,r);s.scrollTop!=null&&Mi(e,s.scrollTop),s.scrollLeft!=null&&En(e,s.scrollLeft)}function sa(e,r){var s=e.display,o=Un(e.display);r.top<0&&(r.top=0);var l=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:s.scroller.scrollTop,f=Gs(e),p={};r.bottom-r.top>f&&(r.bottom=r.top+f);var m=e.doc.height+Vs(s),v=r.top<o,y=r.bottom>m-o;if(r.top<l)p.scrollTop=v?0:r.top;else if(r.bottom>l+f){var E=Math.min(r.top,(y?m:r.bottom)-f);E!=l&&(p.scrollTop=E)}var I=e.options.fixedGutter?0:s.gutters.offsetWidth,F=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:s.scroller.scrollLeft-I,z=Sn(e)-s.gutters.offsetWidth,G=r.right-r.left>z;return G&&(r.right=r.left+z),r.left<10?p.scrollLeft=0:r.left<F?p.scrollLeft=Math.max(0,r.left+I-(G?0:10)):r.right>z+F-3&&(p.scrollLeft=r.right+(G?0:10)-z),p}function aa(e,r){r!=null&&(Po(e),e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+r)}function Yn(e){Po(e);var r=e.getCursor();e.curOp.scrollToPos={from:r,to:r,margin:e.options.cursorScrollMargin}}function Ti(e,r,s){(r!=null||s!=null)&&Po(e),r!=null&&(e.curOp.scrollLeft=r),s!=null&&(e.curOp.scrollTop=s)}function iy(e,r){Po(e),e.curOp.scrollToPos=r}function Po(e){var r=e.curOp.scrollToPos;if(r){e.curOp.scrollToPos=null;var s=Ru(e,r.from),o=Ru(e,r.to);Uu(e,s,o,r.margin)}}function Uu(e,r,s,o){var l=sa(e,{left:Math.min(r.left,s.left),top:Math.min(r.top,s.top)-o,right:Math.max(r.right,s.right),bottom:Math.max(r.bottom,s.bottom)+o});Ti(e,l.scrollLeft,l.scrollTop)}function Mi(e,r){Math.abs(e.doc.scrollTop-r)<2||(i||ua(e,{top:r}),Vu(e,r,!0),i&&ua(e),ji(e,100))}function Vu(e,r,s){r=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,r)),!(e.display.scroller.scrollTop==r&&!s)&&(e.doc.scrollTop=r,e.display.scrollbars.setScrollTop(r),e.display.scroller.scrollTop!=r&&(e.display.scroller.scrollTop=r))}function En(e,r,s,o){r=Math.max(0,Math.min(r,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),!((s?r==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-r)<2)&&!o)&&(e.doc.scrollLeft=r,Zu(e),e.display.scroller.scrollLeft!=r&&(e.display.scroller.scrollLeft=r),e.display.scrollbars.setScrollLeft(r))}function Ei(e){var r=e.display,s=r.gutters.offsetWidth,o=Math.round(e.doc.height+Vs(e.display));return{clientHeight:r.scroller.clientHeight,viewHeight:r.wrapper.clientHeight,scrollWidth:r.scroller.scrollWidth,clientWidth:r.scroller.clientWidth,viewWidth:r.wrapper.clientWidth,barLeft:e.options.fixedGutter?s:0,docHeight:o,scrollHeight:o+zr(e)+r.barHeight,nativeBarWidth:r.nativeBarWidth,gutterWidth:s}}var Nn=function(e,r,s){this.cm=s;var o=this.vert=U("div",[U("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),l=this.horiz=U("div",[U("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");o.tabIndex=l.tabIndex=-1,e(o),e(l),De(o,"scroll",function(){o.clientHeight&&r(o.scrollTop,"vertical")}),De(l,"scroll",function(){l.clientWidth&&r(l.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,d&&h<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Nn.prototype.update=function(e){var r=e.scrollWidth>e.clientWidth+1,s=e.scrollHeight>e.clientHeight+1,o=e.nativeBarWidth;if(s){this.vert.style.display="block",this.vert.style.bottom=r?o+"px":"0";var l=e.viewHeight-(r?o:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+l)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(r){this.horiz.style.display="block",this.horiz.style.right=s?o+"px":"0",this.horiz.style.left=e.barLeft+"px";var f=e.viewWidth-e.barLeft-(s?o:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+f)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(o==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:s?o:0,bottom:r?o:0}},Nn.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Nn.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Nn.prototype.zeroWidthHack=function(){var e=j&&!L?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new be,this.disableVert=new be},Nn.prototype.enableZeroWidthBar=function(e,r,s){e.style.pointerEvents="auto";function o(){var l=e.getBoundingClientRect(),f=s=="vert"?document.elementFromPoint(l.right-1,(l.top+l.bottom)/2):document.elementFromPoint((l.right+l.left)/2,l.bottom-1);f!=e?e.style.pointerEvents="none":r.set(1e3,o)}r.set(1e3,o)},Nn.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Ni=function(){};Ni.prototype.update=function(){return{bottom:0,right:0}},Ni.prototype.setScrollLeft=function(){},Ni.prototype.setScrollTop=function(){},Ni.prototype.clear=function(){};function Kn(e,r){r||(r=Ei(e));var s=e.display.barWidth,o=e.display.barHeight;Gu(e,r);for(var l=0;l<4&&s!=e.display.barWidth||o!=e.display.barHeight;l++)s!=e.display.barWidth&&e.options.lineWrapping&&Do(e),Gu(e,Ei(e)),s=e.display.barWidth,o=e.display.barHeight}function Gu(e,r){var s=e.display,o=s.scrollbars.update(r);s.sizer.style.paddingRight=(s.barWidth=o.right)+"px",s.sizer.style.paddingBottom=(s.barHeight=o.bottom)+"px",s.heightForcer.style.borderBottom=o.bottom+"px solid transparent",o.right&&o.bottom?(s.scrollbarFiller.style.display="block",s.scrollbarFiller.style.height=o.bottom+"px",s.scrollbarFiller.style.width=o.right+"px"):s.scrollbarFiller.style.display="",o.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(s.gutterFiller.style.display="block",s.gutterFiller.style.height=o.bottom+"px",s.gutterFiller.style.width=r.gutterWidth+"px"):s.gutterFiller.style.display=""}var Yu={native:Nn,null:Ni};function Ku(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&H(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Yu[e.options.scrollbarStyle](function(r){e.display.wrapper.insertBefore(r,e.display.scrollbarFiller),De(r,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),r.setAttribute("cm-not-content","true")},function(r,s){s=="horizontal"?En(e,r):Mi(e,r)},e),e.display.scrollbars.addClass&&Oe(e.display.wrapper,e.display.scrollbars.addClass)}var oy=0;function jn(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++oy,markArrays:null},zv(e.curOp)}function An(e){var r=e.curOp;r&&_v(r,function(s){for(var o=0;o<s.ops.length;o++)s.ops[o].cm.curOp=null;sy(s)})}function sy(e){for(var r=e.ops,s=0;s<r.length;s++)ay(r[s]);for(var o=0;o<r.length;o++)ly(r[o]);for(var l=0;l<r.length;l++)uy(r[l]);for(var f=0;f<r.length;f++)cy(r[f]);for(var p=0;p<r.length;p++)fy(r[p])}function ay(e){var r=e.cm,s=r.display;hy(r),e.updateMaxLine&&$s(r),e.mustUpdate=e.viewChanged||e.forceUpdate||e.scrollTop!=null||e.scrollToPos&&(e.scrollToPos.from.line<s.viewFrom||e.scrollToPos.to.line>=s.viewTo)||s.maxLineChanged&&r.options.lineWrapping,e.update=e.mustUpdate&&new zo(r,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function ly(e){e.updatedDisplay=e.mustUpdate&&la(e.cm,e.update)}function uy(e){var r=e.cm,s=r.display;e.updatedDisplay&&Do(r),e.barMeasure=Ei(r),s.maxLineChanged&&!r.options.lineWrapping&&(e.adjustWidthTo=Nu(r,s.maxLine,s.maxLine.text.length).left+3,r.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(s.scroller.clientWidth,s.sizer.offsetLeft+e.adjustWidthTo+zr(r)+r.display.barWidth),e.maxScrollLeft=Math.max(0,s.sizer.offsetLeft+e.adjustWidthTo-Sn(r))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=s.input.prepareSelection())}function cy(e){var r=e.cm;e.adjustWidthTo!=null&&(r.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<r.doc.scrollLeft&&En(r,Math.min(r.display.scroller.scrollLeft,e.maxScrollLeft),!0),r.display.maxLineChanged=!1);var s=e.focus&&e.focus==fe();e.preparedSelection&&r.display.input.showSelection(e.preparedSelection,s),(e.updatedDisplay||e.startHeight!=r.doc.height)&&Kn(r,e.barMeasure),e.updatedDisplay&&fa(r,e.barMeasure),e.selectionChanged&&na(r),r.state.focused&&e.updateInput&&r.display.input.reset(e.typing),s&&qu(e.cm)}function fy(e){var r=e.cm,s=r.display,o=r.doc;if(e.updatedDisplay&&Qu(r,e.update),s.wheelStartX!=null&&(e.scrollTop!=null||e.scrollLeft!=null||e.scrollToPos)&&(s.wheelStartX=s.wheelStartY=null),e.scrollTop!=null&&Vu(r,e.scrollTop,e.forceScroll),e.scrollLeft!=null&&En(r,e.scrollLeft,!0,!0),e.scrollToPos){var l=ry(r,ae(o,e.scrollToPos.from),ae(o,e.scrollToPos.to),e.scrollToPos.margin);ty(r,l)}var f=e.maybeHiddenMarkers,p=e.maybeUnhiddenMarkers;if(f)for(var m=0;m<f.length;++m)f[m].lines.length||Pe(f[m],"hide");if(p)for(var v=0;v<p.length;++v)p[v].lines.length&&Pe(p[v],"unhide");s.wrapper.offsetHeight&&(o.scrollTop=r.display.scroller.scrollTop),e.changeObjs&&Pe(r,"changes",r,e.changeObjs),e.update&&e.update.finish()}function ir(e,r){if(e.curOp)return r();jn(e);try{return r()}finally{An(e)}}function St(e,r){return function(){if(e.curOp)return r.apply(e,arguments);jn(e);try{return r.apply(e,arguments)}finally{An(e)}}}function Wt(e){return function(){if(this.curOp)return e.apply(this,arguments);jn(this);try{return e.apply(this,arguments)}finally{An(this)}}}function Lt(e){return function(){var r=this.cm;if(!r||r.curOp)return e.apply(this,arguments);jn(r);try{return e.apply(this,arguments)}finally{An(r)}}}function ji(e,r){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(r,Qe(dy,e))}function dy(e){var r=e.doc;if(!(r.highlightFrontier>=e.display.viewTo)){var s=+new Date+e.options.workTime,o=bi(e,r.highlightFrontier),l=[];r.iter(o.line,Math.min(r.first+r.size,e.display.viewTo+500),function(f){if(o.line>=e.display.viewFrom){var p=f.styles,m=f.text.length>e.options.maxHighlightLength?it(r.mode,o.state):null,v=Ze(e,f,o,!0);m&&(o.state=m),f.styles=v.styles;var y=f.styleClasses,E=v.classes;E?f.styleClasses=E:y&&(f.styleClasses=null);for(var I=!p||p.length!=f.styles.length||y!=E&&(!y||!E||y.bgClass!=E.bgClass||y.textClass!=E.textClass),F=0;!I&&F<p.length;++F)I=p[F]!=f.styles[F];I&&l.push(o.line),f.stateAfter=o.save(),o.nextLine()}else f.text.length<=e.options.maxHighlightLength&&ht(e,f.text,o),f.stateAfter=o.line%5==0?o.save():null,o.nextLine();if(+new Date>s)return ji(e,e.options.workDelay),!0}),r.highlightFrontier=o.line,r.modeFrontier=Math.max(r.modeFrontier,o.line),l.length&&ir(e,function(){for(var f=0;f<l.length;f++)nn(e,l[f],"text")})}}var zo=function(e,r,s){var o=e.display;this.viewport=r,this.visible=Io(o,e.doc,r),this.editorIsHidden=!o.wrapper.offsetWidth,this.wrapperHeight=o.wrapper.clientHeight,this.wrapperWidth=o.wrapper.clientWidth,this.oldDisplayWidth=Sn(e),this.force=s,this.dims=Xs(e),this.events=[]};zo.prototype.signal=function(e,r){dt(e,r)&&this.events.push(arguments)},zo.prototype.finish=function(){for(var e=0;e<this.events.length;e++)Pe.apply(null,this.events[e])};function hy(e){var r=e.display;!r.scrollbarsClipped&&r.scroller.offsetWidth&&(r.nativeBarWidth=r.scroller.offsetWidth-r.scroller.clientWidth,r.heightForcer.style.height=zr(e)+"px",r.sizer.style.marginBottom=-r.nativeBarWidth+"px",r.sizer.style.borderRightWidth=zr(e)+"px",r.scrollbarsClipped=!0)}function py(e){if(e.hasFocus())return null;var r=fe();if(!r||!te(e.display.lineDiv,r))return null;var s={activeElt:r};if(window.getSelection){var o=window.getSelection();o.anchorNode&&o.extend&&te(e.display.lineDiv,o.anchorNode)&&(s.anchorNode=o.anchorNode,s.anchorOffset=o.anchorOffset,s.focusNode=o.focusNode,s.focusOffset=o.focusOffset)}return s}function gy(e){if(!(!e||!e.activeElt||e.activeElt==fe())&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&te(document.body,e.anchorNode)&&te(document.body,e.focusNode))){var r=window.getSelection(),s=document.createRange();s.setEnd(e.anchorNode,e.anchorOffset),s.collapse(!1),r.removeAllRanges(),r.addRange(s),r.extend(e.focusNode,e.focusOffset)}}function la(e,r){var s=e.display,o=e.doc;if(r.editorIsHidden)return on(e),!1;if(!r.force&&r.visible.from>=s.viewFrom&&r.visible.to<=s.viewTo&&(s.updateLineNumbers==null||s.updateLineNumbers>=s.viewTo)&&s.renderedView==s.view&&Bu(e)==0)return!1;Ju(e)&&(on(e),r.dims=Xs(e));var l=o.first+o.size,f=Math.max(r.visible.from-e.options.viewportMargin,o.first),p=Math.min(l,r.visible.to+e.options.viewportMargin);s.viewFrom<f&&f-s.viewFrom<20&&(f=Math.max(o.first,s.viewFrom)),s.viewTo>p&&s.viewTo-p<20&&(p=Math.min(l,s.viewTo)),Vr&&(f=Ws(e.doc,f),p=vu(e.doc,p));var m=f!=s.viewFrom||p!=s.viewTo||s.lastWrapHeight!=r.wrapperHeight||s.lastWrapWidth!=r.wrapperWidth;Xv(e,f,p),s.viewOffset=Gr(ce(e.doc,s.viewFrom)),e.display.mover.style.top=s.viewOffset+"px";var v=Bu(e);if(!m&&v==0&&!r.force&&s.renderedView==s.view&&(s.updateLineNumbers==null||s.updateLineNumbers>=s.viewTo))return!1;var y=py(e);return v>4&&(s.lineDiv.style.display="none"),my(e,s.updateLineNumbers,r.dims),v>4&&(s.lineDiv.style.display=""),s.renderedView=s.view,gy(y),K(s.cursorDiv),K(s.selectionDiv),s.gutters.style.height=s.sizer.style.minHeight=0,m&&(s.lastWrapHeight=r.wrapperHeight,s.lastWrapWidth=r.wrapperWidth,ji(e,400)),s.updateLineNumbers=null,!0}function Qu(e,r){for(var s=r.viewport,o=!0;;o=!1){if(!o||!e.options.lineWrapping||r.oldDisplayWidth==Sn(e)){if(s&&s.top!=null&&(s={top:Math.min(e.doc.height+Vs(e.display)-Gs(e),s.top)}),r.visible=Io(e.display,e.doc,s),r.visible.from>=e.display.viewFrom&&r.visible.to<=e.display.viewTo)break}else o&&(r.visible=Io(e.display,e.doc,s));if(!la(e,r))break;Do(e);var l=Ei(e);Li(e),Kn(e,l),fa(e,l),r.force=!1}r.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(r.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function ua(e,r){var s=new zo(e,r);if(la(e,s)){Do(e),Qu(e,s);var o=Ei(e);Li(e),Kn(e,o),fa(e,o),s.finish()}}function my(e,r,s){var o=e.display,l=e.options.lineNumbers,f=o.lineDiv,p=f.firstChild;function m(G){var re=G.nextSibling;return g&&j&&e.display.currentWheelTarget==G?G.style.display="none":G.parentNode.removeChild(G),re}for(var v=o.view,y=o.viewFrom,E=0;E<v.length;E++){var I=v[E];if(!I.hidden)if(!I.node||I.node.parentNode!=f){var F=qv(e,I,y,s);f.insertBefore(F,p)}else{for(;p!=I.node;)p=m(p);var z=l&&r!=null&&r<=y&&I.lineNumber;I.changes&&(ue(I.changes,"gutter")>-1&&(z=!1),ku(e,I,y,s)),z&&(K(I.lineNumber),I.lineNumber.appendChild(document.createTextNode(Or(e.options,y)))),p=I.node.nextSibling}y+=I.size}for(;p;)p=m(p)}function ca(e){var r=e.gutters.offsetWidth;e.sizer.style.marginLeft=r+"px",Ct(e,"gutterChanged",e)}function fa(e,r){e.display.sizer.style.minHeight=r.docHeight+"px",e.display.heightForcer.style.top=r.docHeight+"px",e.display.gutters.style.height=r.docHeight+e.display.barHeight+zr(e)+"px"}function Zu(e){var r=e.display,s=r.view;if(!(!r.alignWidgets&&(!r.gutters.firstChild||!e.options.fixedGutter))){for(var o=ea(r)-r.scroller.scrollLeft+e.doc.scrollLeft,l=r.gutters.offsetWidth,f=o+"px",p=0;p<s.length;p++)if(!s[p].hidden){e.options.fixedGutter&&(s[p].gutter&&(s[p].gutter.style.left=f),s[p].gutterBackground&&(s[p].gutterBackground.style.left=f));var m=s[p].alignable;if(m)for(var v=0;v<m.length;v++)m[v].style.left=f}e.options.fixedGutter&&(r.gutters.style.left=o+l+"px")}}function Ju(e){if(!e.options.lineNumbers)return!1;var r=e.doc,s=Or(e.options,r.first+r.size-1),o=e.display;if(s.length!=o.lineNumChars){var l=o.measure.appendChild(U("div",[U("div",s)],"CodeMirror-linenumber CodeMirror-gutter-elt")),f=l.firstChild.offsetWidth,p=l.offsetWidth-f;return o.lineGutter.style.width="",o.lineNumInnerWidth=Math.max(f,o.lineGutter.offsetWidth-p)+1,o.lineNumWidth=o.lineNumInnerWidth+p,o.lineNumChars=o.lineNumInnerWidth?s.length:-1,o.lineGutter.style.width=o.lineNumWidth+"px",ca(e.display),!0}return!1}function da(e,r){for(var s=[],o=!1,l=0;l<e.length;l++){var f=e[l],p=null;if(typeof f!="string"&&(p=f.style,f=f.className),f=="CodeMirror-linenumbers")if(r)o=!0;else continue;s.push({className:f,style:p})}return r&&!o&&s.push({className:"CodeMirror-linenumbers",style:null}),s}function Xu(e){var r=e.gutters,s=e.gutterSpecs;K(r),e.lineGutter=null;for(var o=0;o<s.length;++o){var l=s[o],f=l.className,p=l.style,m=r.appendChild(U("div",null,"CodeMirror-gutter "+f));p&&(m.style.cssText=p),f=="CodeMirror-linenumbers"&&(e.lineGutter=m,m.style.width=(e.lineNumWidth||1)+"px")}r.style.display=s.length?"":"none",ca(e)}function Ai(e){Xu(e.display),Qt(e),Zu(e)}function vy(e,r,s,o){var l=this;this.input=s,l.scrollbarFiller=U("div",null,"CodeMirror-scrollbar-filler"),l.scrollbarFiller.setAttribute("cm-not-content","true"),l.gutterFiller=U("div",null,"CodeMirror-gutter-filler"),l.gutterFiller.setAttribute("cm-not-content","true"),l.lineDiv=k("div",null,"CodeMirror-code"),l.selectionDiv=U("div",null,null,"position: relative; z-index: 1"),l.cursorDiv=U("div",null,"CodeMirror-cursors"),l.measure=U("div",null,"CodeMirror-measure"),l.lineMeasure=U("div",null,"CodeMirror-measure"),l.lineSpace=k("div",[l.measure,l.lineMeasure,l.selectionDiv,l.cursorDiv,l.lineDiv],null,"position: relative; outline: none");var f=k("div",[l.lineSpace],"CodeMirror-lines");l.mover=U("div",[f],null,"position: relative"),l.sizer=U("div",[l.mover],"CodeMirror-sizer"),l.sizerWidth=null,l.heightForcer=U("div",null,null,"position: absolute; height: "+ge+"px; width: 1px;"),l.gutters=U("div",null,"CodeMirror-gutters"),l.lineGutter=null,l.scroller=U("div",[l.sizer,l.heightForcer,l.gutters],"CodeMirror-scroll"),l.scroller.setAttribute("tabIndex","-1"),l.wrapper=U("div",[l.scrollbarFiller,l.gutterFiller,l.scroller],"CodeMirror"),l.wrapper.setAttribute("translate","no"),d&&h<8&&(l.gutters.style.zIndex=-1,l.scroller.style.paddingRight=0),!g&&!(i&&A)&&(l.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(l.wrapper):e(l.wrapper)),l.viewFrom=l.viewTo=r.first,l.reportedViewFrom=l.reportedViewTo=r.first,l.view=[],l.renderedView=null,l.externalMeasured=null,l.viewOffset=0,l.lastWrapHeight=l.lastWrapWidth=0,l.updateLineNumbers=null,l.nativeBarWidth=l.barHeight=l.barWidth=0,l.scrollbarsClipped=!1,l.lineNumWidth=l.lineNumInnerWidth=l.lineNumChars=null,l.alignWidgets=!1,l.cachedCharWidth=l.cachedTextHeight=l.cachedPaddingH=null,l.maxLine=null,l.maxLineLength=0,l.maxLineChanged=!1,l.wheelDX=l.wheelDY=l.wheelStartX=l.wheelStartY=null,l.shift=!1,l.selForContextMenu=null,l.activeTouch=null,l.gutterSpecs=da(o.gutters,o.lineNumbers),Xu(l),s.init(l)}var Ro=0,Kr=null;d?Kr=-.53:i?Kr=15:x?Kr=-.7:S&&(Kr=-1/3);function ec(e){var r=e.wheelDeltaX,s=e.wheelDeltaY;return r==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(r=e.detail),s==null&&e.detail&&e.axis==e.VERTICAL_AXIS?s=e.detail:s==null&&(s=e.wheelDelta),{x:r,y:s}}function yy(e){var r=ec(e);return r.x*=Kr,r.y*=Kr,r}function tc(e,r){var s=ec(r),o=s.x,l=s.y,f=Kr;r.deltaMode===0&&(o=r.deltaX,l=r.deltaY,f=1);var p=e.display,m=p.scroller,v=m.scrollWidth>m.clientWidth,y=m.scrollHeight>m.clientHeight;if(!!(o&&v||l&&y)){if(l&&j&&g){e:for(var E=r.target,I=p.view;E!=m;E=E.parentNode)for(var F=0;F<I.length;F++)if(I[F].node==E){e.display.currentWheelTarget=E;break e}}if(o&&!i&&!C&&f!=null){l&&y&&Mi(e,Math.max(0,m.scrollTop+l*f)),En(e,Math.max(0,m.scrollLeft+o*f)),(!l||l&&y)&&gt(r),p.wheelStartX=null;return}if(l&&f!=null){var z=l*f,G=e.doc.scrollTop,re=G+p.wrapper.clientHeight;z<0?G=Math.max(0,G+z-50):re=Math.min(e.doc.height,re+z+50),ua(e,{top:G,bottom:re})}Ro<20&&r.deltaMode!==0&&(p.wheelStartX==null?(p.wheelStartX=m.scrollLeft,p.wheelStartY=m.scrollTop,p.wheelDX=o,p.wheelDY=l,setTimeout(function(){if(p.wheelStartX!=null){var le=m.scrollLeft-p.wheelStartX,he=m.scrollTop-p.wheelStartY,ve=he&&p.wheelDY&&he/p.wheelDY||le&&p.wheelDX&&le/p.wheelDX;p.wheelStartX=p.wheelStartY=null,!!ve&&(Kr=(Kr*Ro+ve)/(Ro+1),++Ro)}},200)):(p.wheelDX+=o,p.wheelDY+=l))}}var cr=function(e,r){this.ranges=e,this.primIndex=r};cr.prototype.primary=function(){return this.ranges[this.primIndex]},cr.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var r=0;r<this.ranges.length;r++){var s=this.ranges[r],o=e.ranges[r];if(!O(s.anchor,o.anchor)||!O(s.head,o.head))return!1}return!0},cr.prototype.deepCopy=function(){for(var e=[],r=0;r<this.ranges.length;r++)e[r]=new et(ee(this.ranges[r].anchor),ee(this.ranges[r].head));return new cr(e,this.primIndex)},cr.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},cr.prototype.contains=function(e,r){r||(r=e);for(var s=0;s<this.ranges.length;s++){var o=this.ranges[s];if(w(r,o.from())>=0&&w(e,o.to())<=0)return s}return-1};var et=function(e,r){this.anchor=e,this.head=r};et.prototype.from=function(){return je(this.anchor,this.head)},et.prototype.to=function(){return ne(this.anchor,this.head)},et.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function Mr(e,r,s){var o=e&&e.options.selectionsMayTouch,l=r[s];r.sort(function(F,z){return w(F.from(),z.from())}),s=ue(r,l);for(var f=1;f<r.length;f++){var p=r[f],m=r[f-1],v=w(m.to(),p.from());if(o&&!p.empty()?v>0:v>=0){var y=je(m.from(),p.from()),E=ne(m.to(),p.to()),I=m.empty()?p.from()==p.head:m.from()==m.head;f<=s&&--s,r.splice(--f,2,new et(I?E:y,I?y:E))}}return new cr(r,s)}function sn(e,r){return new cr([new et(e,r||e)],0)}function an(e){return e.text?ie(e.from.line+e.text.length-1,He(e.text).length+(e.text.length==1?e.from.ch:0)):e.to}function rc(e,r){if(w(e,r.from)<0)return e;if(w(e,r.to)<=0)return an(r);var s=e.line+r.text.length-(r.to.line-r.from.line)-1,o=e.ch;return e.line==r.to.line&&(o+=an(r).ch-r.to.ch),ie(s,o)}function ha(e,r){for(var s=[],o=0;o<e.sel.ranges.length;o++){var l=e.sel.ranges[o];s.push(new et(rc(l.anchor,r),rc(l.head,r)))}return Mr(e.cm,s,e.sel.primIndex)}function nc(e,r,s){return e.line==r.line?ie(s.line,e.ch-r.ch+s.ch):ie(s.line+(e.line-r.line),e.ch)}function by(e,r,s){for(var o=[],l=ie(e.first,0),f=l,p=0;p<r.length;p++){var m=r[p],v=nc(m.from,l,f),y=nc(an(m),l,f);if(l=m.to,f=y,s=="around"){var E=e.sel.ranges[p],I=w(E.head,E.anchor)<0;o[p]=new et(I?y:v,I?v:y)}else o[p]=new et(v,v)}return new cr(o,e.sel.primIndex)}function pa(e){e.doc.mode=tn(e.options,e.doc.modeOption),Oi(e)}function Oi(e){e.doc.iter(function(r){r.stateAfter&&(r.stateAfter=null),r.styles&&(r.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,ji(e,100),e.state.modeGen++,e.curOp&&Qt(e)}function ic(e,r){return r.from.ch==0&&r.to.ch==0&&He(r.text)==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function ga(e,r,s,o){function l(ve){return s?s[ve]:null}function f(ve,pe,we){Mv(ve,pe,we,o),Ct(ve,"change",ve,r)}function p(ve,pe){for(var we=[],Ie=ve;Ie<pe;++Ie)we.push(new Wn(y[Ie],l(Ie),o));return we}var m=r.from,v=r.to,y=r.text,E=ce(e,m.line),I=ce(e,v.line),F=He(y),z=l(y.length-1),G=v.line-m.line;if(r.full)e.insert(0,p(0,y.length)),e.remove(y.length,e.size-y.length);else if(ic(e,r)){var re=p(0,y.length-1);f(I,I.text,z),G&&e.remove(m.line,G),re.length&&e.insert(m.line,re)}else if(E==I)if(y.length==1)f(E,E.text.slice(0,m.ch)+F+E.text.slice(v.ch),z);else{var le=p(1,y.length-1);le.push(new Wn(F+E.text.slice(v.ch),z,o)),f(E,E.text.slice(0,m.ch)+y[0],l(0)),e.insert(m.line+1,le)}else if(y.length==1)f(E,E.text.slice(0,m.ch)+y[0]+I.text.slice(v.ch),l(0)),e.remove(m.line+1,G);else{f(E,E.text.slice(0,m.ch)+y[0],l(0)),f(I,F+I.text.slice(v.ch),z);var he=p(1,y.length-1);G>1&&e.remove(m.line+1,G-1),e.insert(m.line+1,he)}Ct(e,"change",e,r)}function ln(e,r,s){function o(l,f,p){if(l.linked)for(var m=0;m<l.linked.length;++m){var v=l.linked[m];if(v.doc!=f){var y=p&&v.sharedHist;s&&!y||(r(v.doc,y),o(v.doc,l,y))}}}o(e,null,!0)}function oc(e,r){if(r.cm)throw new Error("This document is already in use.");e.doc=r,r.cm=e,ta(e),pa(e),sc(e),e.options.direction=r.direction,e.options.lineWrapping||$s(e),e.options.mode=r.modeOption,Qt(e)}function sc(e){(e.doc.direction=="rtl"?Oe:H)(e.display.lineDiv,"CodeMirror-rtl")}function wy(e){ir(e,function(){sc(e),Qt(e)})}function _o(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:Infinity,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function ma(e,r){var s={from:ee(r.from),to:an(r),text:J(e,r.from,r.to)};return uc(e,s,r.from.line,r.to.line+1),ln(e,function(o){return uc(o,s,r.from.line,r.to.line+1)},!0),s}function ac(e){for(;e.length;){var r=He(e);if(r.ranges)e.pop();else break}}function xy(e,r){if(r)return ac(e.done),He(e.done);if(e.done.length&&!He(e.done).ranges)return He(e.done);if(e.done.length>1&&!e.done[e.done.length-2].ranges)return e.done.pop(),He(e.done)}function lc(e,r,s,o){var l=e.history;l.undone.length=0;var f=+new Date,p,m;if((l.lastOp==o||l.lastOrigin==r.origin&&r.origin&&(r.origin.charAt(0)=="+"&&l.lastModTime>f-(e.cm?e.cm.options.historyEventDelay:500)||r.origin.charAt(0)=="*"))&&(p=xy(l,l.lastOp==o)))m=He(p.changes),w(r.from,r.to)==0&&w(r.from,m.to)==0?m.to=an(r):p.changes.push(ma(e,r));else{var v=He(l.done);for((!v||!v.ranges)&&Ho(e.sel,l.done),p={changes:[ma(e,r)],generation:l.generation},l.done.push(p);l.done.length>l.undoDepth;)l.done.shift(),l.done[0].ranges||l.done.shift()}l.done.push(s),l.generation=++l.maxGeneration,l.lastModTime=l.lastSelTime=f,l.lastOp=l.lastSelOp=o,l.lastOrigin=l.lastSelOrigin=r.origin,m||Pe(e,"historyAdded")}function ky(e,r,s,o){var l=r.charAt(0);return l=="*"||l=="+"&&s.ranges.length==o.ranges.length&&s.somethingSelected()==o.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Cy(e,r,s,o){var l=e.history,f=o&&o.origin;s==l.lastSelOp||f&&l.lastSelOrigin==f&&(l.lastModTime==l.lastSelTime&&l.lastOrigin==f||ky(e,f,He(l.done),r))?l.done[l.done.length-1]=r:Ho(r,l.done),l.lastSelTime=+new Date,l.lastSelOrigin=f,l.lastSelOp=s,o&&o.clearRedo!==!1&&ac(l.undone)}function Ho(e,r){var s=He(r);s&&s.ranges&&s.equals(e)||r.push(e)}function uc(e,r,s,o){var l=r["spans_"+e.id],f=0;e.iter(Math.max(e.first,s),Math.min(e.first+e.size,o),function(p){p.markedSpans&&((l||(l=r["spans_"+e.id]={}))[f]=p.markedSpans),++f})}function Sy(e){if(!e)return null;for(var r,s=0;s<e.length;++s)e[s].marker.explicitlyCleared?r||(r=e.slice(0,s)):r&&r.push(e[s]);return r?r.length?r:null:e}function Ly(e,r){var s=r["spans_"+e.id];if(!s)return null;for(var o=[],l=0;l<r.text.length;++l)o.push(Sy(s[l]));return o}function cc(e,r){var s=Ly(e,r),o=Fs(e,r);if(!s)return o;if(!o)return s;for(var l=0;l<s.length;++l){var f=s[l],p=o[l];if(f&&p){e:for(var m=0;m<p.length;++m){for(var v=p[m],y=0;y<f.length;++y)if(f[y].marker==v.marker)continue e;f.push(v)}}else p&&(s[l]=p)}return s}function Qn(e,r,s){for(var o=[],l=0;l<e.length;++l){var f=e[l];if(f.ranges){o.push(s?cr.prototype.deepCopy.call(f):f);continue}var p=f.changes,m=[];o.push({changes:m});for(var v=0;v<p.length;++v){var y=p[v],E=void 0;if(m.push({from:y.from,to:y.to,text:y.text}),r)for(var I in y)(E=I.match(/^spans_(\d+)$/))&&ue(r,Number(E[1]))>-1&&(He(m)[I]=y[I],delete y[I])}}return o}function va(e,r,s,o){if(o){var l=e.anchor;if(s){var f=w(r,l)<0;f!=w(s,l)<0?(l=r,r=s):f!=w(r,s)<0&&(r=s)}return new et(l,r)}else return new et(s||r,r)}function Fo(e,r,s,o,l){l==null&&(l=e.cm&&(e.cm.display.shift||e.extend)),It(e,new cr([va(e.sel.primary(),r,s,l)],0),o)}function fc(e,r,s){for(var o=[],l=e.cm&&(e.cm.display.shift||e.extend),f=0;f<e.sel.ranges.length;f++)o[f]=va(e.sel.ranges[f],r[f],null,l);var p=Mr(e.cm,o,e.sel.primIndex);It(e,p,s)}function ya(e,r,s,o){var l=e.sel.ranges.slice(0);l[r]=s,It(e,Mr(e.cm,l,e.sel.primIndex),o)}function dc(e,r,s,o){It(e,sn(r,s),o)}function Ty(e,r,s){var o={ranges:r.ranges,update:function(l){this.ranges=[];for(var f=0;f<l.length;f++)this.ranges[f]=new et(ae(e,l[f].anchor),ae(e,l[f].head))},origin:s&&s.origin};return Pe(e,"beforeSelectionChange",e,o),e.cm&&Pe(e.cm,"beforeSelectionChange",e.cm,o),o.ranges!=r.ranges?Mr(e.cm,o.ranges,o.ranges.length-1):r}function hc(e,r,s){var o=e.history.done,l=He(o);l&&l.ranges?(o[o.length-1]=r,Bo(e,r,s)):It(e,r,s)}function It(e,r,s){Bo(e,r,s),Cy(e,e.sel,e.cm?e.cm.curOp.id:NaN,s)}function Bo(e,r,s){(dt(e,"beforeSelectionChange")||e.cm&&dt(e.cm,"beforeSelectionChange"))&&(r=Ty(e,r,s));var o=s&&s.bias||(w(r.primary().head,e.sel.primary().head)<0?-1:1);pc(e,mc(e,r,o,!0)),!(s&&s.scroll===!1)&&e.cm&&e.cm.getOption("readOnly")!="nocursor"&&Yn(e.cm)}function pc(e,r){r.equals(e.sel)||(e.sel=r,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,wr(e.cm)),Ct(e,"cursorActivity",e))}function gc(e){pc(e,mc(e,e.sel,null,!1))}function mc(e,r,s,o){for(var l,f=0;f<r.ranges.length;f++){var p=r.ranges[f],m=r.ranges.length==e.sel.ranges.length&&e.sel.ranges[f],v=Wo(e,p.anchor,m&&m.anchor,s,o),y=Wo(e,p.head,m&&m.head,s,o);(l||v!=p.anchor||y!=p.head)&&(l||(l=r.ranges.slice(0,f)),l[f]=new et(v,y))}return l?Mr(e.cm,l,r.primIndex):r}function Zn(e,r,s,o,l){var f=ce(e,r.line);if(f.markedSpans)for(var p=0;p<f.markedSpans.length;++p){var m=f.markedSpans[p],v=m.marker,y="selectLeft"in v?!v.selectLeft:v.inclusiveLeft,E="selectRight"in v?!v.selectRight:v.inclusiveRight;if((m.from==null||(y?m.from<=r.ch:m.from<r.ch))&&(m.to==null||(E?m.to>=r.ch:m.to>r.ch))){if(l&&(Pe(v,"beforeCursorEnter"),v.explicitlyCleared))if(f.markedSpans){--p;continue}else break;if(!v.atomic)continue;if(s){var I=v.find(o<0?1:-1),F=void 0;if((o<0?E:y)&&(I=vc(e,I,-o,I&&I.line==r.line?f:null)),I&&I.line==r.line&&(F=w(I,s))&&(o<0?F<0:F>0))return Zn(e,I,r,o,l)}var z=v.find(o<0?-1:1);return(o<0?y:E)&&(z=vc(e,z,o,z.line==r.line?f:null)),z?Zn(e,z,r,o,l):null}}return r}function Wo(e,r,s,o,l){var f=o||1,p=Zn(e,r,s,f,l)||!l&&Zn(e,r,s,f,!0)||Zn(e,r,s,-f,l)||!l&&Zn(e,r,s,-f,!0);return p||(e.cantEdit=!0,ie(e.first,0))}function vc(e,r,s,o){return s<0&&r.ch==0?r.line>e.first?ae(e,ie(r.line-1)):null:s>0&&r.ch==(o||ce(e,r.line)).text.length?r.line<e.first+e.size-1?ie(r.line+1,0):null:new ie(r.line,r.ch+s)}function yc(e){e.setSelection(ie(e.firstLine(),0),ie(e.lastLine()),xe)}function bc(e,r,s){var o={canceled:!1,from:r.from,to:r.to,text:r.text,origin:r.origin,cancel:function(){return o.canceled=!0}};return s&&(o.update=function(l,f,p,m){l&&(o.from=ae(e,l)),f&&(o.to=ae(e,f)),p&&(o.text=p),m!==void 0&&(o.origin=m)}),Pe(e,"beforeChange",e,o),e.cm&&Pe(e.cm,"beforeChange",e.cm,o),o.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:o.from,to:o.to,text:o.text,origin:o.origin}}function Jn(e,r,s){if(e.cm){if(!e.cm.curOp)return St(e.cm,Jn)(e,r,s);if(e.cm.state.suppressEdits)return}if(!((dt(e,"beforeChange")||e.cm&&dt(e.cm,"beforeChange"))&&(r=bc(e,r,!0),!r))){var o=cu&&!s&&Cv(e,r.from,r.to);if(o)for(var l=o.length-1;l>=0;--l)wc(e,{from:o[l].from,to:o[l].to,text:l?[""]:r.text,origin:r.origin});else wc(e,r)}}function wc(e,r){if(!(r.text.length==1&&r.text[0]==""&&w(r.from,r.to)==0)){var s=ha(e,r);lc(e,r,s,e.cm?e.cm.curOp.id:NaN),Di(e,r,s,Fs(e,r));var o=[];ln(e,function(l,f){!f&&ue(o,l.history)==-1&&(Sc(l.history,r),o.push(l.history)),Di(l,r,null,Fs(l,r))})}}function qo(e,r,s){var o=e.cm&&e.cm.state.suppressEdits;if(!(o&&!s)){for(var l=e.history,f,p=e.sel,m=r=="undo"?l.done:l.undone,v=r=="undo"?l.undone:l.done,y=0;y<m.length&&(f=m[y],!(s?f.ranges&&!f.equals(e.sel):!f.ranges));y++);if(y!=m.length){for(l.lastOrigin=l.lastSelOrigin=null;;)if(f=m.pop(),f.ranges){if(Ho(f,v),s&&!f.equals(e.sel)){It(e,f,{clearRedo:!1});return}p=f}else if(o){m.push(f);return}else break;var E=[];Ho(p,v),v.push({changes:E,generation:l.generation}),l.generation=f.generation||++l.maxGeneration;for(var I=dt(e,"beforeChange")||e.cm&&dt(e.cm,"beforeChange"),F=function(re){var le=f.changes[re];if(le.origin=r,I&&!bc(e,le,!1))return m.length=0,{};E.push(ma(e,le));var he=re?ha(e,le):He(m);Di(e,le,he,cc(e,le)),!re&&e.cm&&e.cm.scrollIntoView({from:le.from,to:an(le)});var ve=[];ln(e,function(pe,we){!we&&ue(ve,pe.history)==-1&&(Sc(pe.history,le),ve.push(pe.history)),Di(pe,le,null,cc(pe,le))})},z=f.changes.length-1;z>=0;--z){var G=F(z);if(G)return G.v}}}}function xc(e,r){if(r!=0&&(e.first+=r,e.sel=new cr(Ye(e.sel.ranges,function(l){return new et(ie(l.anchor.line+r,l.anchor.ch),ie(l.head.line+r,l.head.ch))}),e.sel.primIndex),e.cm)){Qt(e.cm,e.first,e.first-r,r);for(var s=e.cm.display,o=s.viewFrom;o<s.viewTo;o++)nn(e.cm,o,"gutter")}}function Di(e,r,s,o){if(e.cm&&!e.cm.curOp)return St(e.cm,Di)(e,r,s,o);if(r.to.line<e.first){xc(e,r.text.length-1-(r.to.line-r.from.line));return}if(!(r.from.line>e.lastLine())){if(r.from.line<e.first){var l=r.text.length-1-(e.first-r.from.line);xc(e,l),r={from:ie(e.first,0),to:ie(r.to.line+l,r.to.ch),text:[He(r.text)],origin:r.origin}}var f=e.lastLine();r.to.line>f&&(r={from:r.from,to:ie(f,ce(e,f).text.length),text:[r.text[0]],origin:r.origin}),r.removed=J(e,r.from,r.to),s||(s=ha(e,r)),e.cm?My(e.cm,r,o):ga(e,r,o),Bo(e,s,xe),e.cantEdit&&Wo(e,ie(e.firstLine(),0))&&(e.cantEdit=!1)}}function My(e,r,s){var o=e.doc,l=e.display,f=r.from,p=r.to,m=!1,v=f.line;e.options.lineWrapping||(v=We(Lr(ce(o,f.line))),o.iter(v,p.line+1,function(z){if(z==l.maxLine)return m=!0,!0})),o.sel.contains(r.from,r.to)>-1&&wr(e),ga(o,r,s,Fu(e)),e.options.lineWrapping||(o.iter(v,f.line+r.text.length,function(z){var G=To(z);G>l.maxLineLength&&(l.maxLine=z,l.maxLineLength=G,l.maxLineChanged=!0,m=!1)}),m&&(e.curOp.updateMaxLine=!0)),mv(o,f.line),ji(e,400);var y=r.text.length-(p.line-f.line)-1;r.full?Qt(e):f.line==p.line&&r.text.length==1&&!ic(e.doc,r)?nn(e,f.line,"text"):Qt(e,f.line,p.line+1,y);var E=dt(e,"changes"),I=dt(e,"change");if(I||E){var F={from:f,to:p,text:r.text,removed:r.removed,origin:r.origin};I&&Ct(e,"change",e,F),E&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(F)}e.display.selForContextMenu=null}function Xn(e,r,s,o,l){var f;o||(o=s),w(o,s)<0&&(f=[o,s],s=f[0],o=f[1]),typeof r=="string"&&(r=e.splitLines(r)),Jn(e,{from:s,to:o,text:r,origin:l})}function kc(e,r,s,o){s<e.line?e.line+=o:r<e.line&&(e.line=r,e.ch=0)}function Cc(e,r,s,o){for(var l=0;l<e.length;++l){var f=e[l],p=!0;if(f.ranges){f.copied||(f=e[l]=f.deepCopy(),f.copied=!0);for(var m=0;m<f.ranges.length;m++)kc(f.ranges[m].anchor,r,s,o),kc(f.ranges[m].head,r,s,o);continue}for(var v=0;v<f.changes.length;++v){var y=f.changes[v];if(s<y.from.line)y.from=ie(y.from.line+o,y.from.ch),y.to=ie(y.to.line+o,y.to.ch);else if(r<=y.to.line){p=!1;break}}p||(e.splice(0,l+1),l=0)}}function Sc(e,r){var s=r.from.line,o=r.to.line,l=r.text.length-(o-s)-1;Cc(e.done,s,o,l),Cc(e.undone,s,o,l)}function Ii(e,r,s,o){var l=r,f=r;return typeof r=="number"?f=ce(e,se(e,r)):l=We(r),l==null?null:(o(f,l)&&e.cm&&nn(e.cm,l,s),f)}function Pi(e){this.lines=e,this.parent=null;for(var r=0,s=0;s<e.length;++s)e[s].parent=this,r+=e[s].height;this.height=r}Pi.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,r){for(var s=e,o=e+r;s<o;++s){var l=this.lines[s];this.height-=l.height,Ev(l),Ct(l,"delete")}this.lines.splice(e,r)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,r,s){this.height+=s,this.lines=this.lines.slice(0,e).concat(r).concat(this.lines.slice(e));for(var o=0;o<r.length;++o)r[o].parent=this},iterN:function(e,r,s){for(var o=e+r;e<o;++e)if(s(this.lines[e]))return!0}};function zi(e){this.children=e;for(var r=0,s=0,o=0;o<e.length;++o){var l=e[o];r+=l.chunkSize(),s+=l.height,l.parent=this}this.size=r,this.height=s,this.parent=null}zi.prototype={chunkSize:function(){return this.size},removeInner:function(e,r){this.size-=r;for(var s=0;s<this.children.length;++s){var o=this.children[s],l=o.chunkSize();if(e<l){var f=Math.min(r,l-e),p=o.height;if(o.removeInner(e,f),this.height-=p-o.height,l==f&&(this.children.splice(s--,1),o.parent=null),(r-=f)==0)break;e=0}else e-=l}if(this.size-r<25&&(this.children.length>1||!(this.children[0]instanceof Pi))){var m=[];this.collapse(m),this.children=[new Pi(m)],this.children[0].parent=this}},collapse:function(e){for(var r=0;r<this.children.length;++r)this.children[r].collapse(e)},insertInner:function(e,r,s){this.size+=r.length,this.height+=s;for(var o=0;o<this.children.length;++o){var l=this.children[o],f=l.chunkSize();if(e<=f){if(l.insertInner(e,r,s),l.lines&&l.lines.length>50){for(var p=l.lines.length%25+25,m=p;m<l.lines.length;){var v=new Pi(l.lines.slice(m,m+=25));l.height-=v.height,this.children.splice(++o,0,v),v.parent=this}l.lines=l.lines.slice(0,p),this.maybeSpill()}break}e-=f}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var r=e.children.splice(e.children.length-5,5),s=new zi(r);if(e.parent){e.size-=s.size,e.height-=s.height;var l=ue(e.parent.children,e);e.parent.children.splice(l+1,0,s)}else{var o=new zi(e.children);o.parent=e,e.children=[o,s],e=o}s.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,r,s){for(var o=0;o<this.children.length;++o){var l=this.children[o],f=l.chunkSize();if(e<f){var p=Math.min(r,f-e);if(l.iterN(e,p,s))return!0;if((r-=p)==0)break;e=0}else e-=f}}};var Ri=function(e,r,s){if(s)for(var o in s)s.hasOwnProperty(o)&&(this[o]=s[o]);this.doc=e,this.node=r};Ri.prototype.clear=function(){var e=this.doc.cm,r=this.line.widgets,s=this.line,o=We(s);if(!(o==null||!r)){for(var l=0;l<r.length;++l)r[l]==this&&r.splice(l--,1);r.length||(s.widgets=null);var f=Ci(this);Y(s,Math.max(0,s.height-f)),e&&(ir(e,function(){Lc(e,s,-f),nn(e,o,"widget")}),Ct(e,"lineWidgetCleared",e,this,o))}},Ri.prototype.changed=function(){var e=this,r=this.height,s=this.doc.cm,o=this.line;this.height=null;var l=Ci(this)-r;!l||(rn(this.doc,o)||Y(o,o.height+l),s&&ir(s,function(){s.curOp.forceUpdate=!0,Lc(s,o,l),Ct(s,"lineWidgetChanged",s,e,We(o))}))},Vt(Ri);function Lc(e,r,s){Gr(r)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&aa(e,s)}function Ey(e,r,s,o){var l=new Ri(e,s,o),f=e.cm;return f&&l.noHScroll&&(f.display.alignWidgets=!0),Ii(e,r,"widget",function(p){var m=p.widgets||(p.widgets=[]);if(l.insertAt==null?m.push(l):m.splice(Math.min(m.length,Math.max(0,l.insertAt)),0,l),l.line=p,f&&!rn(e,p)){var v=Gr(p)<e.scrollTop;Y(p,p.height+Ci(l)),v&&aa(f,l.height),f.curOp.forceUpdate=!0}return!0}),f&&Ct(f,"lineWidgetAdded",f,l,typeof r=="number"?r:We(r)),l}var Tc=0,un=function(e,r){this.lines=[],this.type=r,this.doc=e,this.id=++Tc};un.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,r=e&&!e.curOp;if(r&&jn(e),dt(this,"clear")){var s=this.find();s&&Ct(this,"clear",s.from,s.to)}for(var o=null,l=null,f=0;f<this.lines.length;++f){var p=this.lines[f],m=wi(p.markedSpans,this);e&&!this.collapsed?nn(e,We(p),"text"):e&&(m.to!=null&&(l=We(p)),m.from!=null&&(o=We(p))),p.markedSpans=bv(p.markedSpans,m),m.from==null&&this.collapsed&&!rn(this.doc,p)&&e&&Y(p,Un(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var v=0;v<this.lines.length;++v){var y=Lr(this.lines[v]),E=To(y);E>e.display.maxLineLength&&(e.display.maxLine=y,e.display.maxLineLength=E,e.display.maxLineChanged=!0)}o!=null&&e&&this.collapsed&&Qt(e,o,l+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&gc(e.doc)),e&&Ct(e,"markerCleared",e,this,o,l),r&&An(e),this.parent&&this.parent.clear()}},un.prototype.find=function(e,r){e==null&&this.type=="bookmark"&&(e=1);for(var s,o,l=0;l<this.lines.length;++l){var f=this.lines[l],p=wi(f.markedSpans,this);if(p.from!=null&&(s=ie(r?f:We(f),p.from),e==-1))return s;if(p.to!=null&&(o=ie(r?f:We(f),p.to),e==1))return o}return s&&{from:s,to:o}},un.prototype.changed=function(){var e=this,r=this.find(-1,!0),s=this,o=this.doc.cm;!r||!o||ir(o,function(){var l=r.line,f=We(r.line),p=Ys(o,f);if(p&&(Ou(p),o.curOp.selectionChanged=o.curOp.forceUpdate=!0),o.curOp.updateMaxLine=!0,!rn(s.doc,l)&&s.height!=null){var m=s.height;s.height=null;var v=Ci(s)-m;v&&Y(l,l.height+v)}Ct(o,"markerChanged",o,e)})},un.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var r=this.doc.cm.curOp;(!r.maybeHiddenMarkers||ue(r.maybeHiddenMarkers,this)==-1)&&(r.maybeUnhiddenMarkers||(r.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},un.prototype.detachLine=function(e){if(this.lines.splice(ue(this.lines,e),1),!this.lines.length&&this.doc.cm){var r=this.doc.cm.curOp;(r.maybeHiddenMarkers||(r.maybeHiddenMarkers=[])).push(this)}},Vt(un);function ei(e,r,s,o,l){if(o&&o.shared)return Ny(e,r,s,o,l);if(e.cm&&!e.cm.curOp)return St(e.cm,ei)(e,r,s,o,l);var f=new un(e,l),p=w(r,s);if(o&&Me(o,f,!1),p>0||p==0&&f.clearWhenEmpty!==!1)return f;if(f.replacedWith&&(f.collapsed=!0,f.widgetNode=k("span",[f.replacedWith],"CodeMirror-widget"),o.handleMouseEvents||f.widgetNode.setAttribute("cm-ignore-events","true"),o.insertLeft&&(f.widgetNode.insertLeft=!0)),f.collapsed){if(mu(e,r.line,r,s,f)||r.line!=s.line&&mu(e,s.line,r,s,f))throw new Error("Inserting collapsed marker partially overlapping an existing one");yv()}f.addToHistory&&lc(e,{from:r,to:s,origin:"markText"},e.sel,NaN);var m=r.line,v=e.cm,y;if(e.iter(m,s.line+1,function(I){v&&f.collapsed&&!v.options.lineWrapping&&Lr(I)==v.display.maxLine&&(y=!0),f.collapsed&&m!=r.line&&Y(I,0),wv(I,new ko(f,m==r.line?r.ch:null,m==s.line?s.ch:null),e.cm&&e.cm.curOp),++m}),f.collapsed&&e.iter(r.line,s.line+1,function(I){rn(e,I)&&Y(I,0)}),f.clearOnEnter&&De(f,"beforeCursorEnter",function(){return f.clear()}),f.readOnly&&(vv(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),f.collapsed&&(f.id=++Tc,f.atomic=!0),v){if(y&&(v.curOp.updateMaxLine=!0),f.collapsed)Qt(v,r.line,s.line+1);else if(f.className||f.startStyle||f.endStyle||f.css||f.attributes||f.title)for(var E=r.line;E<=s.line;E++)nn(v,E,"text");f.atomic&&gc(v.doc),Ct(v,"markerAdded",v,f)}return f}var _i=function(e,r){this.markers=e,this.primary=r;for(var s=0;s<e.length;++s)e[s].parent=this};_i.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Ct(this,"clear")}},_i.prototype.find=function(e,r){return this.primary.find(e,r)},Vt(_i);function Ny(e,r,s,o,l){o=Me(o),o.shared=!1;var f=[ei(e,r,s,o,l)],p=f[0],m=o.widgetNode;return ln(e,function(v){m&&(o.widgetNode=m.cloneNode(!0)),f.push(ei(v,ae(v,r),ae(v,s),o,l));for(var y=0;y<v.linked.length;++y)if(v.linked[y].isParent)return;p=He(f)}),new _i(f,p)}function Mc(e){return e.findMarks(ie(e.first,0),e.clipPos(ie(e.lastLine())),function(r){return r.parent})}function jy(e,r){for(var s=0;s<r.length;s++){var o=r[s],l=o.find(),f=e.clipPos(l.from),p=e.clipPos(l.to);if(w(f,p)){var m=ei(e,f,p,o.primary,o.primary.type);o.markers.push(m),m.parent=o}}}function Ay(e){for(var r=function(o){var l=e[o],f=[l.primary.doc];ln(l.primary.doc,function(v){return f.push(v)});for(var p=0;p<l.markers.length;p++){var m=l.markers[p];ue(f,m.doc)==-1&&(m.parent=null,l.markers.splice(p--,1))}},s=0;s<e.length;s++)r(s)}var Oy=0,Zt=function(e,r,s,o,l){if(!(this instanceof Zt))return new Zt(e,r,s,o,l);s==null&&(s=0),zi.call(this,[new Pi([new Wn("",null)])]),this.first=s,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=s;var f=ie(s,0);this.sel=sn(f),this.history=new _o(null),this.id=++Oy,this.modeOption=r,this.lineSep=o,this.direction=l=="rtl"?"rtl":"ltr",this.extend=!1,typeof e=="string"&&(e=this.splitLines(e)),ga(this,{from:f,to:f,text:e}),It(this,sn(f),xe)};Zt.prototype=Rt(zi.prototype,{constructor:Zt,iter:function(e,r,s){s?this.iterN(e-this.first,r-e,s):this.iterN(this.first,this.first+this.size,e)},insert:function(e,r){for(var s=0,o=0;o<r.length;++o)s+=r[o].height;this.insertInner(e-this.first,r,s)},remove:function(e,r){this.removeInner(e-this.first,r)},getValue:function(e){var r=Ke(this,this.first,this.first+this.size);return e===!1?r:r.join(e||this.lineSeparator())},setValue:Lt(function(e){var r=ie(this.first,0),s=this.first+this.size-1;Jn(this,{from:r,to:ie(s,ce(this,s).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Ti(this.cm,0,0),It(this,sn(r),xe)}),replaceRange:function(e,r,s,o){r=ae(this,r),s=s?ae(this,s):r,Xn(this,e,r,s,o)},getRange:function(e,r,s){var o=J(this,ae(this,e),ae(this,r));return s===!1?o:s===""?o.join(""):o.join(s||this.lineSeparator())},getLine:function(e){var r=this.getLineHandle(e);return r&&r.text},getLineHandle:function(e){if(Je(this,e))return ce(this,e)},getLineNumber:function(e){return We(e)},getLineHandleVisualStart:function(e){return typeof e=="number"&&(e=ce(this,e)),Lr(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return ae(this,e)},getCursor:function(e){var r=this.sel.primary(),s;return e==null||e=="head"?s=r.head:e=="anchor"?s=r.anchor:e=="end"||e=="to"||e===!1?s=r.to():s=r.from(),s},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Lt(function(e,r,s){dc(this,ae(this,typeof e=="number"?ie(e,r||0):e),null,s)}),setSelection:Lt(function(e,r,s){dc(this,ae(this,e),ae(this,r||e),s)}),extendSelection:Lt(function(e,r,s){Fo(this,ae(this,e),r&&ae(this,r),s)}),extendSelections:Lt(function(e,r){fc(this,Ce(this,e),r)}),extendSelectionsBy:Lt(function(e,r){var s=Ye(this.sel.ranges,e);fc(this,Ce(this,s),r)}),setSelections:Lt(function(e,r,s){if(!!e.length){for(var o=[],l=0;l<e.length;l++)o[l]=new et(ae(this,e[l].anchor),ae(this,e[l].head||e[l].anchor));r==null&&(r=Math.min(e.length-1,this.sel.primIndex)),It(this,Mr(this.cm,o,r),s)}}),addSelection:Lt(function(e,r,s){var o=this.sel.ranges.slice(0);o.push(new et(ae(this,e),ae(this,r||e))),It(this,Mr(this.cm,o,o.length-1),s)}),getSelection:function(e){for(var r=this.sel.ranges,s,o=0;o<r.length;o++){var l=J(this,r[o].from(),r[o].to());s=s?s.concat(l):l}return e===!1?s:s.join(e||this.lineSeparator())},getSelections:function(e){for(var r=[],s=this.sel.ranges,o=0;o<s.length;o++){var l=J(this,s[o].from(),s[o].to());e!==!1&&(l=l.join(e||this.lineSeparator())),r[o]=l}return r},replaceSelection:function(e,r,s){for(var o=[],l=0;l<this.sel.ranges.length;l++)o[l]=e;this.replaceSelections(o,r,s||"+input")},replaceSelections:Lt(function(e,r,s){for(var o=[],l=this.sel,f=0;f<l.ranges.length;f++){var p=l.ranges[f];o[f]={from:p.from(),to:p.to(),text:this.splitLines(e[f]),origin:s}}for(var m=r&&r!="end"&&by(this,o,r),v=o.length-1;v>=0;v--)Jn(this,o[v]);m?hc(this,m):this.cm&&Yn(this.cm)}),undo:Lt(function(){qo(this,"undo")}),redo:Lt(function(){qo(this,"redo")}),undoSelection:Lt(function(){qo(this,"undo",!0)}),redoSelection:Lt(function(){qo(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,r=0,s=0,o=0;o<e.done.length;o++)e.done[o].ranges||++r;for(var l=0;l<e.undone.length;l++)e.undone[l].ranges||++s;return{undo:r,redo:s}},clearHistory:function(){var e=this;this.history=new _o(this.history),ln(this,function(r){return r.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Qn(this.history.done),undone:Qn(this.history.undone)}},setHistory:function(e){var r=this.history=new _o(this.history);r.done=Qn(e.done.slice(0),null,!0),r.undone=Qn(e.undone.slice(0),null,!0)},setGutterMarker:Lt(function(e,r,s){return Ii(this,e,"gutter",function(o){var l=o.gutterMarkers||(o.gutterMarkers={});return l[r]=s,!s&&V(l)&&(o.gutterMarkers=null),!0})}),clearGutter:Lt(function(e){var r=this;this.iter(function(s){s.gutterMarkers&&s.gutterMarkers[e]&&Ii(r,s,"gutter",function(){return s.gutterMarkers[e]=null,V(s.gutterMarkers)&&(s.gutterMarkers=null),!0})})}),lineInfo:function(e){var r;if(typeof e=="number"){if(!Je(this,e)||(r=e,e=ce(this,e),!e))return null}else if(r=We(e),r==null)return null;return{line:r,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Lt(function(e,r,s){return Ii(this,e,r=="gutter"?"gutter":"class",function(o){var l=r=="text"?"textClass":r=="background"?"bgClass":r=="gutter"?"gutterClass":"wrapClass";if(!o[l])o[l]=s;else{if(q(s).test(o[l]))return!1;o[l]+=" "+s}return!0})}),removeLineClass:Lt(function(e,r,s){return Ii(this,e,r=="gutter"?"gutter":"class",function(o){var l=r=="text"?"textClass":r=="background"?"bgClass":r=="gutter"?"gutterClass":"wrapClass",f=o[l];if(f)if(s==null)o[l]=null;else{var p=f.match(q(s));if(!p)return!1;var m=p.index+p[0].length;o[l]=f.slice(0,p.index)+(!p.index||m==f.length?"":" ")+f.slice(m)||null}else return!1;return!0})}),addLineWidget:Lt(function(e,r,s){return Ey(this,e,r,s)}),removeLineWidget:function(e){e.clear()},markText:function(e,r,s){return ei(this,ae(this,e),ae(this,r),s,s&&s.type||"range")},setBookmark:function(e,r){var s={replacedWith:r&&(r.nodeType==null?r.widget:r),insertLeft:r&&r.insertLeft,clearWhenEmpty:!1,shared:r&&r.shared,handleMouseEvents:r&&r.handleMouseEvents};return e=ae(this,e),ei(this,e,e,s,"bookmark")},findMarksAt:function(e){e=ae(this,e);var r=[],s=ce(this,e.line).markedSpans;if(s)for(var o=0;o<s.length;++o){var l=s[o];(l.from==null||l.from<=e.ch)&&(l.to==null||l.to>=e.ch)&&r.push(l.marker.parent||l.marker)}return r},findMarks:function(e,r,s){e=ae(this,e),r=ae(this,r);var o=[],l=e.line;return this.iter(e.line,r.line+1,function(f){var p=f.markedSpans;if(p)for(var m=0;m<p.length;m++){var v=p[m];!(v.to!=null&&l==e.line&&e.ch>=v.to||v.from==null&&l!=e.line||v.from!=null&&l==r.line&&v.from>=r.ch)&&(!s||s(v.marker))&&o.push(v.marker.parent||v.marker)}++l}),o},getAllMarks:function(){var e=[];return this.iter(function(r){var s=r.markedSpans;if(s)for(var o=0;o<s.length;++o)s[o].from!=null&&e.push(s[o].marker)}),e},posFromIndex:function(e){var r,s=this.first,o=this.lineSeparator().length;return this.iter(function(l){var f=l.text.length+o;if(f>e)return r=e,!0;e-=f,++s}),ae(this,ie(s,r))},indexFromPos:function(e){e=ae(this,e);var r=e.ch;if(e.line<this.first||e.ch<0)return 0;var s=this.lineSeparator().length;return this.iter(this.first,e.line,function(o){r+=o.text.length+s}),r},copy:function(e){var r=new Zt(Ke(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return r.scrollTop=this.scrollTop,r.scrollLeft=this.scrollLeft,r.sel=this.sel,r.extend=!1,e&&(r.history.undoDepth=this.history.undoDepth,r.setHistory(this.getHistory())),r},linkedDoc:function(e){e||(e={});var r=this.first,s=this.first+this.size;e.from!=null&&e.from>r&&(r=e.from),e.to!=null&&e.to<s&&(s=e.to);var o=new Zt(Ke(this,r,s),e.mode||this.modeOption,r,this.lineSep,this.direction);return e.sharedHist&&(o.history=this.history),(this.linked||(this.linked=[])).push({doc:o,sharedHist:e.sharedHist}),o.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],jy(o,Mc(this)),o},unlinkDoc:function(e){if(e instanceof at&&(e=e.doc),this.linked)for(var r=0;r<this.linked.length;++r){var s=this.linked[r];if(s.doc==e){this.linked.splice(r,1),e.unlinkDoc(this),Ay(Mc(this));break}}if(e.history==this.history){var o=[e.id];ln(e,function(l){return o.push(l.id)},!0),e.history=new _o(null),e.history.done=Qn(this.history.done,o),e.history.undone=Qn(this.history.undone,o)}},iterLinkedDocs:function(e){ln(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Xr(e)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Lt(function(e){e!="rtl"&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(r){return r.order=null}),this.cm&&wy(this.cm))})}),Zt.prototype.eachLine=Zt.prototype.iter;var Ec=0;function Dy(e){var r=this;if(Nc(r),!(ut(r,e)||Yr(r.display,e))){gt(e),d&&(Ec=+new Date);var s=Tn(r,e,!0),o=e.dataTransfer.files;if(!(!s||r.isReadOnly()))if(o&&o.length&&window.FileReader&&window.File)for(var l=o.length,f=Array(l),p=0,m=function(){++p==l&&St(r,function(){s=ae(r.doc,s);var z={from:s,to:s,text:r.doc.splitLines(f.filter(function(G){return G!=null}).join(r.doc.lineSeparator())),origin:"paste"};Jn(r.doc,z),hc(r.doc,sn(ae(r.doc,s),ae(r.doc,an(z))))})()},v=function(z,G){if(r.options.allowDropFileTypes&&ue(r.options.allowDropFileTypes,z.type)==-1){m();return}var re=new FileReader;re.onerror=function(){return m()},re.onload=function(){var le=re.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(le)){m();return}f[G]=le,m()},re.readAsText(z)},y=0;y<o.length;y++)v(o[y],y);else{if(r.state.draggingText&&r.doc.sel.contains(s)>-1){r.state.draggingText(e),setTimeout(function(){return r.display.input.focus()},20);return}try{var E=e.dataTransfer.getData("Text");if(E){var I;if(r.state.draggingText&&!r.state.draggingText.copy&&(I=r.listSelections()),Bo(r.doc,sn(s,s)),I)for(var F=0;F<I.length;++F)Xn(r.doc,"",I[F].anchor,I[F].head,"drag");r.replaceSelection(E,"around","paste"),r.display.input.focus()}}catch(z){}}}}function Iy(e,r){if(d&&(!e.state.draggingText||+new Date-Ec<100)){hr(r);return}if(!(ut(e,r)||Yr(e.display,r))&&(r.dataTransfer.setData("Text",e.getSelection()),r.dataTransfer.effectAllowed="copyMove",r.dataTransfer.setDragImage&&!S)){var s=U("img",null,null,"position: fixed; left: 0; top: 0;");s.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",C&&(s.width=s.height=1,e.display.wrapper.appendChild(s),s._top=s.offsetTop),r.dataTransfer.setDragImage(s,0,0),C&&s.parentNode.removeChild(s)}}function Py(e,r){var s=Tn(e,r);if(!!s){var o=document.createDocumentFragment();ra(e,s,o),e.display.dragCursor||(e.display.dragCursor=U("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),W(e.display.dragCursor,o)}}function Nc(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function jc(e){if(!!document.getElementsByClassName){for(var r=document.getElementsByClassName("CodeMirror"),s=[],o=0;o<r.length;o++){var l=r[o].CodeMirror;l&&s.push(l)}s.length&&s[0].operation(function(){for(var f=0;f<s.length;f++)e(s[f])})}}var Ac=!1;function zy(){Ac||(Ry(),Ac=!0)}function Ry(){var e;De(window,"resize",function(){e==null&&(e=setTimeout(function(){e=null,jc(_y)},100))}),De(window,"blur",function(){return jc(Gn)})}function _y(e){var r=e.display;r.cachedCharWidth=r.cachedTextHeight=r.cachedPaddingH=null,r.scrollbarsClipped=!1,e.setSize()}for(var cn={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Hi=0;Hi<10;Hi++)cn[Hi+48]=cn[Hi+96]=String(Hi);for(var $o=65;$o<=90;$o++)cn[$o]=String.fromCharCode($o);for(var Fi=1;Fi<=12;Fi++)cn[Fi+111]=cn[Fi+63235]="F"+Fi;var Qr={};Qr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Qr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Qr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Qr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Qr.default=j?Qr.macDefault:Qr.pcDefault;function Hy(e){var r=e.split(/-(?!$)/);e=r[r.length-1];for(var s,o,l,f,p=0;p<r.length-1;p++){var m=r[p];if(/^(cmd|meta|m)$/i.test(m))f=!0;else if(/^a(lt)?$/i.test(m))s=!0;else if(/^(c|ctrl|control)$/i.test(m))o=!0;else if(/^s(hift)?$/i.test(m))l=!0;else throw new Error("Unrecognized modifier name: "+m)}return s&&(e="Alt-"+e),o&&(e="Ctrl-"+e),f&&(e="Cmd-"+e),l&&(e="Shift-"+e),e}function Fy(e){var r={};for(var s in e)if(e.hasOwnProperty(s)){var o=e[s];if(/^(name|fallthrough|(de|at)tach)$/.test(s))continue;if(o=="..."){delete e[s];continue}for(var l=Ye(s.split(" "),Hy),f=0;f<l.length;f++){var p=void 0,m=void 0;f==l.length-1?(m=l.join(" "),p=o):(m=l.slice(0,f+1).join(" "),p="...");var v=r[m];if(!v)r[m]=p;else if(v!=p)throw new Error("Inconsistent bindings for "+m)}delete e[s]}for(var y in r)e[y]=r[y];return e}function ti(e,r,s,o){r=Uo(r);var l=r.call?r.call(e,o):r[e];if(l===!1)return"nothing";if(l==="...")return"multi";if(l!=null&&s(l))return"handled";if(r.fallthrough){if(Object.prototype.toString.call(r.fallthrough)!="[object Array]")return ti(e,r.fallthrough,s,o);for(var f=0;f<r.fallthrough.length;f++){var p=ti(e,r.fallthrough[f],s,o);if(p)return p}}}function Oc(e){var r=typeof e=="string"?e:cn[e.keyCode];return r=="Ctrl"||r=="Alt"||r=="Shift"||r=="Mod"}function Dc(e,r,s){var o=e;return r.altKey&&o!="Alt"&&(e="Alt-"+e),(_?r.metaKey:r.ctrlKey)&&o!="Ctrl"&&(e="Ctrl-"+e),(_?r.ctrlKey:r.metaKey)&&o!="Mod"&&(e="Cmd-"+e),!s&&r.shiftKey&&o!="Shift"&&(e="Shift-"+e),e}function Ic(e,r){if(C&&e.keyCode==34&&e.char)return!1;var s=cn[e.keyCode];return s==null||e.altGraphKey?!1:(e.keyCode==3&&e.code&&(s=e.code),Dc(s,e,r))}function Uo(e){return typeof e=="string"?Qr[e]:e}function ri(e,r){for(var s=e.doc.sel.ranges,o=[],l=0;l<s.length;l++){for(var f=r(s[l]);o.length&&w(f.from,He(o).to)<=0;){var p=o.pop();if(w(p.from,f.from)<0){f.from=p.from;break}}o.push(f)}ir(e,function(){for(var m=o.length-1;m>=0;m--)Xn(e.doc,"",o[m].from,o[m].to,"+delete");Yn(e)})}function ba(e,r,s){var o=kt(e.text,r+s,s);return o<0||o>e.text.length?null:o}function wa(e,r,s){var o=ba(e,r.ch,s);return o==null?null:new ie(r.line,o,s<0?"after":"before")}function xa(e,r,s,o,l){if(e){r.doc.direction=="rtl"&&(l=-l);var f=Ot(s,r.doc.direction);if(f){var p=l<0?He(f):f[0],m=l<0==(p.level==1),v=m?"after":"before",y;if(p.level>0||r.doc.direction=="rtl"){var E=$n(r,s);y=l<0?s.text.length-1:0;var I=Rr(r,E,y).top;y=ar(function(F){return Rr(r,E,F).top==I},l<0==(p.level==1)?p.from:p.to-1,y),v=="before"&&(y=ba(s,y,1))}else y=l<0?p.to:p.from;return new ie(o,y,v)}}return new ie(o,l<0?s.text.length:0,l<0?"before":"after")}function By(e,r,s,o){var l=Ot(r,e.doc.direction);if(!l)return wa(r,s,o);s.ch>=r.text.length?(s.ch=r.text.length,s.sticky="before"):s.ch<=0&&(s.ch=0,s.sticky="after");var f=nt(l,s.ch,s.sticky),p=l[f];if(e.doc.direction=="ltr"&&p.level%2==0&&(o>0?p.to>s.ch:p.from<s.ch))return wa(r,s,o);var m=function(he,ve){return ba(r,he instanceof ie?he.ch:he,ve)},v,y=function(he){return e.options.lineWrapping?(v=v||$n(e,r),Hu(e,r,v,he)):{begin:0,end:r.text.length}},E=y(s.sticky=="before"?m(s,-1):s.ch);if(e.doc.direction=="rtl"||p.level==1){var I=p.level==1==o<0,F=m(s,I?1:-1);if(F!=null&&(I?F<=p.to&&F<=E.end:F>=p.from&&F>=E.begin)){var z=I?"before":"after";return new ie(s.line,F,z)}}var G=function(he,ve,pe){for(var we=function(rt,Tt){return Tt?new ie(s.line,m(rt,1),"before"):new ie(s.line,rt,"after")};he>=0&&he<l.length;he+=ve){var Ie=l[he],Ae=ve>0==(Ie.level!=1),Ue=Ae?pe.begin:m(pe.end,-1);if(Ie.from<=Ue&&Ue<Ie.to||(Ue=Ae?Ie.from:m(Ie.to,-1),pe.begin<=Ue&&Ue<pe.end))return we(Ue,Ae)}},re=G(f+o,o,E);if(re)return re;var le=o>0?E.end:m(E.begin,-1);return le!=null&&!(o>0&&le==r.text.length)&&(re=G(o>0?0:l.length-1,o,y(le)),re)?re:null}var Bi={selectAll:yc,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),xe)},killLine:function(e){return ri(e,function(r){if(r.empty()){var s=ce(e.doc,r.head.line).text.length;return r.head.ch==s&&r.head.line<e.lastLine()?{from:r.head,to:ie(r.head.line+1,0)}:{from:r.head,to:ie(r.head.line,s)}}else return{from:r.from(),to:r.to()}})},deleteLine:function(e){return ri(e,function(r){return{from:ie(r.from().line,0),to:ae(e.doc,ie(r.to().line+1,0))}})},delLineLeft:function(e){return ri(e,function(r){return{from:ie(r.from().line,0),to:r.from()}})},delWrappedLineLeft:function(e){return ri(e,function(r){var s=e.charCoords(r.head,"div").top+5,o=e.coordsChar({left:0,top:s},"div");return{from:o,to:r.from()}})},delWrappedLineRight:function(e){return ri(e,function(r){var s=e.charCoords(r.head,"div").top+5,o=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:s},"div");return{from:r.from(),to:o}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(ie(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(ie(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(r){return Pc(e,r.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(r){return zc(e,r.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(r){return Wy(e,r.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(r){var s=e.cursorCoords(r.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:s},"div")},de)},goLineLeft:function(e){return e.extendSelectionsBy(function(r){var s=e.cursorCoords(r.head,"div").top+5;return e.coordsChar({left:0,top:s},"div")},de)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(r){var s=e.cursorCoords(r.head,"div").top+5,o=e.coordsChar({left:0,top:s},"div");return o.ch<e.getLine(o.line).search(/\S/)?zc(e,r.head):o},de)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("	")},insertSoftTab:function(e){for(var r=[],s=e.listSelections(),o=e.options.tabSize,l=0;l<s.length;l++){var f=s[l].from(),p=Se(e.getLine(f.line),f.ch,o);r.push(Ut(o-p%o))}e.replaceSelections(r)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return ir(e,function(){for(var r=e.listSelections(),s=[],o=0;o<r.length;o++)if(!!r[o].empty()){var l=r[o].head,f=ce(e.doc,l.line).text;if(f){if(l.ch==f.length&&(l=new ie(l.line,l.ch-1)),l.ch>0)l=new ie(l.line,l.ch+1),e.replaceRange(f.charAt(l.ch-1)+f.charAt(l.ch-2),ie(l.line,l.ch-2),l,"+transpose");else if(l.line>e.doc.first){var p=ce(e.doc,l.line-1).text;p&&(l=new ie(l.line,1),e.replaceRange(f.charAt(0)+e.doc.lineSeparator()+p.charAt(p.length-1),ie(l.line-1,p.length-1),l,"+transpose"))}}s.push(new et(l,l))}e.setSelections(s)})},newlineAndIndent:function(e){return ir(e,function(){for(var r=e.listSelections(),s=r.length-1;s>=0;s--)e.replaceRange(e.doc.lineSeparator(),r[s].anchor,r[s].head,"+input");r=e.listSelections();for(var o=0;o<r.length;o++)e.indentLine(r[o].from().line,null,!0);Yn(e)})},openLine:function(e){return e.replaceSelection(`
`,"start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Pc(e,r){var s=ce(e.doc,r),o=Lr(s);return o!=s&&(r=We(o)),xa(!0,e,o,r,1)}function Wy(e,r){var s=ce(e.doc,r),o=Lv(s);return o!=s&&(r=We(o)),xa(!0,e,s,r,-1)}function zc(e,r){var s=Pc(e,r.line),o=ce(e.doc,s.line),l=Ot(o,e.doc.direction);if(!l||l[0].level==0){var f=Math.max(s.ch,o.text.search(/\S/)),p=r.line==s.line&&r.ch<=f&&r.ch;return ie(s.line,p?0:f,s.sticky)}return s}function Vo(e,r,s){if(typeof r=="string"&&(r=Bi[r],!r))return!1;e.display.input.ensurePolled();var o=e.display.shift,l=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),s&&(e.display.shift=!1),l=r(e)!=me}finally{e.display.shift=o,e.state.suppressEdits=!1}return l}function qy(e,r,s){for(var o=0;o<e.state.keyMaps.length;o++){var l=ti(r,e.state.keyMaps[o],s,e);if(l)return l}return e.options.extraKeys&&ti(r,e.options.extraKeys,s,e)||ti(r,e.options.keyMap,s,e)}var $y=new be;function Wi(e,r,s,o){var l=e.state.keySeq;if(l){if(Oc(r))return"handled";if(/\'$/.test(r)?e.state.keySeq=null:$y.set(50,function(){e.state.keySeq==l&&(e.state.keySeq=null,e.display.input.reset())}),Rc(e,l+" "+r,s,o))return!0}return Rc(e,r,s,o)}function Rc(e,r,s,o){var l=qy(e,r,o);return l=="multi"&&(e.state.keySeq=r),l=="handled"&&Ct(e,"keyHandled",e,r,s),(l=="handled"||l=="multi")&&(gt(s),na(e)),!!l}function _c(e,r){var s=Ic(r,!0);return s?r.shiftKey&&!e.state.keySeq?Wi(e,"Shift-"+s,r,function(o){return Vo(e,o,!0)})||Wi(e,s,r,function(o){if(typeof o=="string"?/^go[A-Z]/.test(o):o.motion)return Vo(e,o)}):Wi(e,s,r,function(o){return Vo(e,o)}):!1}function Uy(e,r,s){return Wi(e,"'"+s+"'",r,function(o){return Vo(e,o,!0)})}var ka=null;function Hc(e){var r=this;if(!(e.target&&e.target!=r.display.input.getField())&&(r.curOp.focus=fe(),!ut(r,e))){d&&h<11&&e.keyCode==27&&(e.returnValue=!1);var s=e.keyCode;r.display.shift=s==16||e.shiftKey;var o=_c(r,e);C&&(ka=o?s:null,!o&&s==88&&!en&&(j?e.metaKey:e.ctrlKey)&&r.replaceSelection("",null,"cut")),i&&!j&&!o&&s==46&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),s==18&&!/\bCodeMirror-crosshair\b/.test(r.display.lineDiv.className)&&Vy(r)}}function Vy(e){var r=e.display.lineDiv;Oe(r,"CodeMirror-crosshair");function s(o){(o.keyCode==18||!o.altKey)&&(H(r,"CodeMirror-crosshair"),wt(document,"keyup",s),wt(document,"mouseover",s))}De(document,"keyup",s),De(document,"mouseover",s)}function Fc(e){e.keyCode==16&&(this.doc.sel.shift=!1),ut(this,e)}function Bc(e){var r=this;if(!(e.target&&e.target!=r.display.input.getField())&&!(Yr(r.display,e)||ut(r,e)||e.ctrlKey&&!e.altKey||j&&e.metaKey)){var s=e.keyCode,o=e.charCode;if(C&&s==ka){ka=null,gt(e);return}if(!(C&&(!e.which||e.which<10)&&_c(r,e))){var l=String.fromCharCode(o??s);l!="\b"&&(Uy(r,e,l)||r.display.input.onKeyPress(e))}}}var Gy=400,Ca=function(e,r,s){this.time=e,this.pos=r,this.button=s};Ca.prototype.compare=function(e,r,s){return this.time+Gy>e&&w(r,this.pos)==0&&s==this.button};var qi,$i;function Yy(e,r){var s=+new Date;return $i&&$i.compare(s,e,r)?(qi=$i=null,"triple"):qi&&qi.compare(s,e,r)?($i=new Ca(s,e,r),qi=null,"double"):(qi=new Ca(s,e,r),$i=null,"single")}function Wc(e){var r=this,s=r.display;if(!(ut(r,e)||s.activeTouch&&s.input.supportsTouch())){if(s.input.ensurePolled(),s.shift=e.shiftKey,Yr(s,e)){g||(s.scroller.draggable=!1,setTimeout(function(){return s.scroller.draggable=!0},100));return}if(!Sa(r,e)){var o=Tn(r,e),l=$r(e),f=o?Yy(o,l):"single";window.focus(),l==1&&r.state.selectingText&&r.state.selectingText(e),!(o&&Ky(r,l,o,f,e))&&(l==1?o?Zy(r,o,f,e):kr(e)==s.scroller&&gt(e):l==2?(o&&Fo(r.doc,o),setTimeout(function(){return s.input.focus()},20)):l==3&&($?r.display.input.onContextMenu(e):ia(r)))}}}function Ky(e,r,s,o,l){var f="Click";return o=="double"?f="Double"+f:o=="triple"&&(f="Triple"+f),f=(r==1?"Left":r==2?"Middle":"Right")+f,Wi(e,Dc(f,l),l,function(p){if(typeof p=="string"&&(p=Bi[p]),!p)return!1;var m=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),m=p(e,s)!=me}finally{e.state.suppressEdits=!1}return m})}function Qy(e,r,s){var o=e.getOption("configureMouse"),l=o?o(e,r,s):{};if(l.unit==null){var f=D?s.shiftKey&&s.metaKey:s.altKey;l.unit=f?"rectangle":r=="single"?"char":r=="double"?"word":"line"}return(l.extend==null||e.doc.extend)&&(l.extend=e.doc.extend||s.shiftKey),l.addNew==null&&(l.addNew=j?s.metaKey:s.ctrlKey),l.moveOnDrag==null&&(l.moveOnDrag=!(j?s.altKey:s.ctrlKey)),l}function Zy(e,r,s,o){d?setTimeout(Qe(qu,e),0):e.curOp.focus=fe();var l=Qy(e,s,o),f=e.doc.sel,p;e.options.dragDrop&&pr&&!e.isReadOnly()&&s=="single"&&(p=f.contains(r))>-1&&(w((p=f.ranges[p]).from(),r)<0||r.xRel>0)&&(w(p.to(),r)>0||r.xRel<0)?Jy(e,o,r,l):Xy(e,o,r,l)}function Jy(e,r,s,o){var l=e.display,f=!1,p=St(e,function(y){g&&(l.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:ia(e)),wt(l.wrapper.ownerDocument,"mouseup",p),wt(l.wrapper.ownerDocument,"mousemove",m),wt(l.scroller,"dragstart",v),wt(l.scroller,"drop",p),f||(gt(y),o.addNew||Fo(e.doc,s,null,null,o.extend),g&&!S||d&&h==9?setTimeout(function(){l.wrapper.ownerDocument.body.focus({preventScroll:!0}),l.input.focus()},20):l.input.focus())}),m=function(y){f=f||Math.abs(r.clientX-y.clientX)+Math.abs(r.clientY-y.clientY)>=10},v=function(){return f=!0};g&&(l.scroller.draggable=!0),e.state.draggingText=p,p.copy=!o.moveOnDrag,De(l.wrapper.ownerDocument,"mouseup",p),De(l.wrapper.ownerDocument,"mousemove",m),De(l.scroller,"dragstart",v),De(l.scroller,"drop",p),e.state.delayingBlurEvent=!0,setTimeout(function(){return l.input.focus()},20),l.scroller.dragDrop&&l.scroller.dragDrop()}function qc(e,r,s){if(s=="char")return new et(r,r);if(s=="word")return e.findWordAt(r);if(s=="line")return new et(ie(r.line,0),ae(e.doc,ie(r.line+1,0)));var o=s(e,r);return new et(o.from,o.to)}function Xy(e,r,s,o){d&&ia(e);var l=e.display,f=e.doc;gt(r);var p,m,v=f.sel,y=v.ranges;if(o.addNew&&!o.extend?(m=f.sel.contains(s),m>-1?p=y[m]:p=new et(s,s)):(p=f.sel.primary(),m=f.sel.primIndex),o.unit=="rectangle")o.addNew||(p=new et(s,s)),s=Tn(e,r,!0,!0),m=-1;else{var E=qc(e,s,o.unit);o.extend?p=va(p,E.anchor,E.head,o.extend):p=E}o.addNew?m==-1?(m=y.length,It(f,Mr(e,y.concat([p]),m),{scroll:!1,origin:"*mouse"})):y.length>1&&y[m].empty()&&o.unit=="char"&&!o.extend?(It(f,Mr(e,y.slice(0,m).concat(y.slice(m+1)),0),{scroll:!1,origin:"*mouse"}),v=f.sel):ya(f,m,p,ye):(m=0,It(f,new cr([p],0),ye),v=f.sel);var I=s;function F(pe){if(w(I,pe)!=0)if(I=pe,o.unit=="rectangle"){for(var we=[],Ie=e.options.tabSize,Ae=Se(ce(f,s.line).text,s.ch,Ie),Ue=Se(ce(f,pe.line).text,pe.ch,Ie),rt=Math.min(Ae,Ue),Tt=Math.max(Ae,Ue),ct=Math.min(s.line,pe.line),or=Math.min(e.lastLine(),Math.max(s.line,pe.line));ct<=or;ct++){var Jt=ce(f,ct).text,yt=ze(Jt,rt,Ie);rt==Tt?we.push(new et(ie(ct,yt),ie(ct,yt))):Jt.length>yt&&we.push(new et(ie(ct,yt),ie(ct,ze(Jt,Tt,Ie))))}we.length||we.push(new et(s,s)),It(f,Mr(e,v.ranges.slice(0,m).concat(we),m),{origin:"*mouse",scroll:!1}),e.scrollIntoView(pe)}else{var Xt=p,Nt=qc(e,pe,o.unit),xt=Xt.anchor,bt;w(Nt.anchor,xt)>0?(bt=Nt.head,xt=je(Xt.from(),Nt.anchor)):(bt=Nt.anchor,xt=ne(Xt.to(),Nt.head));var pt=v.ranges.slice(0);pt[m]=e1(e,new et(ae(f,xt),bt)),It(f,Mr(e,pt,m),ye)}}var z=l.wrapper.getBoundingClientRect(),G=0;function re(pe){var we=++G,Ie=Tn(e,pe,!0,o.unit=="rectangle");if(!!Ie)if(w(Ie,I)!=0){e.curOp.focus=fe(),F(Ie);var Ae=Io(l,f);(Ie.line>=Ae.to||Ie.line<Ae.from)&&setTimeout(St(e,function(){G==we&&re(pe)}),150)}else{var Ue=pe.clientY<z.top?-20:pe.clientY>z.bottom?20:0;Ue&&setTimeout(St(e,function(){G==we&&(l.scroller.scrollTop+=Ue,re(pe))}),50)}}function le(pe){e.state.selectingText=!1,G=Infinity,pe&&(gt(pe),l.input.focus()),wt(l.wrapper.ownerDocument,"mousemove",he),wt(l.wrapper.ownerDocument,"mouseup",ve),f.history.lastSelOrigin=null}var he=St(e,function(pe){pe.buttons===0||!$r(pe)?le(pe):re(pe)}),ve=St(e,le);e.state.selectingText=ve,De(l.wrapper.ownerDocument,"mousemove",he),De(l.wrapper.ownerDocument,"mouseup",ve)}function e1(e,r){var s=r.anchor,o=r.head,l=ce(e.doc,s.line);if(w(s,o)==0&&s.sticky==o.sticky)return r;var f=Ot(l);if(!f)return r;var p=nt(f,s.ch,s.sticky),m=f[p];if(m.from!=s.ch&&m.to!=s.ch)return r;var v=p+(m.from==s.ch==(m.level!=1)?0:1);if(v==0||v==f.length)return r;var y;if(o.line!=s.line)y=(o.line-s.line)*(e.doc.direction=="ltr"?1:-1)>0;else{var E=nt(f,o.ch,o.sticky),I=E-p||(o.ch-s.ch)*(m.level==1?-1:1);E==v-1||E==v?y=I<0:y=I>0}var F=f[v+(y?-1:0)],z=y==(F.level==1),G=z?F.from:F.to,re=z?"after":"before";return s.ch==G&&s.sticky==re?r:new et(new ie(s.line,G,re),o)}function $c(e,r,s,o){var l,f;if(r.touches)l=r.touches[0].clientX,f=r.touches[0].clientY;else try{l=r.clientX,f=r.clientY}catch(F){return!1}if(l>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;o&&gt(r);var p=e.display,m=p.lineDiv.getBoundingClientRect();if(f>m.bottom||!dt(e,s))return Ft(r);f-=m.top-p.viewOffset;for(var v=0;v<e.display.gutterSpecs.length;++v){var y=p.gutters.childNodes[v];if(y&&y.getBoundingClientRect().right>=l){var E=Dt(e.doc,f),I=e.display.gutterSpecs[v];return Pe(e,s,e,E,I.className,r),Ft(r)}}}function Sa(e,r){return $c(e,r,"gutterClick",!0)}function Uc(e,r){Yr(e.display,r)||t1(e,r)||ut(e,r,"contextmenu")||$||e.display.input.onContextMenu(r)}function t1(e,r){return dt(e,"gutterContextMenu")?$c(e,r,"gutterContextMenu",!1):!1}function Vc(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Si(e)}var ni={toString:function(){return"CodeMirror.Init"}},Gc={},Go={};function r1(e){var r=e.optionHandlers;function s(o,l,f,p){e.defaults[o]=l,f&&(r[o]=p?function(m,v,y){y!=ni&&f(m,v,y)}:f)}e.defineOption=s,e.Init=ni,s("value","",function(o,l){return o.setValue(l)},!0),s("mode",null,function(o,l){o.doc.modeOption=l,pa(o)},!0),s("indentUnit",2,pa,!0),s("indentWithTabs",!1),s("smartIndent",!0),s("tabSize",4,function(o){Oi(o),Si(o),Qt(o)},!0),s("lineSeparator",null,function(o,l){if(o.doc.lineSep=l,!!l){var f=[],p=o.doc.first;o.doc.iter(function(v){for(var y=0;;){var E=v.text.indexOf(l,y);if(E==-1)break;y=E+l.length,f.push(ie(p,E))}p++});for(var m=f.length-1;m>=0;m--)Xn(o.doc,l,f[m],ie(f[m].line,f[m].ch+l.length))}}),s("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(o,l,f){o.state.specialChars=new RegExp(l.source+(l.test("	")?"":"|	"),"g"),f!=ni&&o.refresh()}),s("specialCharPlaceholder",Av,function(o){return o.refresh()},!0),s("electricChars",!0),s("inputStyle",A?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),s("spellcheck",!1,function(o,l){return o.getInputField().spellcheck=l},!0),s("autocorrect",!1,function(o,l){return o.getInputField().autocorrect=l},!0),s("autocapitalize",!1,function(o,l){return o.getInputField().autocapitalize=l},!0),s("rtlMoveVisually",!P),s("wholeLineUpdateBefore",!0),s("theme","default",function(o){Vc(o),Ai(o)},!0),s("keyMap","default",function(o,l,f){var p=Uo(l),m=f!=ni&&Uo(f);m&&m.detach&&m.detach(o,p),p.attach&&p.attach(o,m||null)}),s("extraKeys",null),s("configureMouse",null),s("lineWrapping",!1,i1,!0),s("gutters",[],function(o,l){o.display.gutterSpecs=da(l,o.options.lineNumbers),Ai(o)},!0),s("fixedGutter",!0,function(o,l){o.display.gutters.style.left=l?ea(o.display)+"px":"0",o.refresh()},!0),s("coverGutterNextToScrollbar",!1,function(o){return Kn(o)},!0),s("scrollbarStyle","native",function(o){Ku(o),Kn(o),o.display.scrollbars.setScrollTop(o.doc.scrollTop),o.display.scrollbars.setScrollLeft(o.doc.scrollLeft)},!0),s("lineNumbers",!1,function(o,l){o.display.gutterSpecs=da(o.options.gutters,l),Ai(o)},!0),s("firstLineNumber",1,Ai,!0),s("lineNumberFormatter",function(o){return o},Ai,!0),s("showCursorWhenSelecting",!1,Li,!0),s("resetSelectionOnContextMenu",!0),s("lineWiseCopyCut",!0),s("pasteLinesPerSelection",!0),s("selectionsMayTouch",!1),s("readOnly",!1,function(o,l){l=="nocursor"&&(Gn(o),o.display.input.blur()),o.display.input.readOnlyChanged(l)}),s("screenReaderLabel",null,function(o,l){l=l===""?null:l,o.display.input.screenReaderLabelChanged(l)}),s("disableInput",!1,function(o,l){l||o.display.input.reset()},!0),s("dragDrop",!0,n1),s("allowDropFileTypes",null),s("cursorBlinkRate",530),s("cursorScrollMargin",0),s("cursorHeight",1,Li,!0),s("singleCursorHeightPerLine",!0,Li,!0),s("workTime",100),s("workDelay",100),s("flattenSpans",!0,Oi,!0),s("addModeClass",!1,Oi,!0),s("pollInterval",100),s("undoDepth",200,function(o,l){return o.doc.history.undoDepth=l}),s("historyEventDelay",1250),s("viewportMargin",10,function(o){return o.refresh()},!0),s("maxHighlightLength",1e4,Oi,!0),s("moveInputWithCursor",!0,function(o,l){l||o.display.input.resetPosition()}),s("tabindex",null,function(o,l){return o.display.input.getField().tabIndex=l||""}),s("autofocus",null),s("direction","ltr",function(o,l){return o.doc.setDirection(l)},!0),s("phrases",null)}function n1(e,r,s){var o=s&&s!=ni;if(!r!=!o){var l=e.display.dragFunctions,f=r?De:wt;f(e.display.scroller,"dragstart",l.start),f(e.display.scroller,"dragenter",l.enter),f(e.display.scroller,"dragover",l.over),f(e.display.scroller,"dragleave",l.leave),f(e.display.scroller,"drop",l.drop)}}function i1(e){e.options.lineWrapping?(Oe(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(H(e.display.wrapper,"CodeMirror-wrap"),$s(e)),ta(e),Qt(e),Si(e),setTimeout(function(){return Kn(e)},100)}function at(e,r){var s=this;if(!(this instanceof at))return new at(e,r);this.options=r=r?Me(r):{},Me(Gc,r,!1);var o=r.value;typeof o=="string"?o=new Zt(o,r.mode,null,r.lineSeparator,r.direction):r.mode&&(o.modeOption=r.mode),this.doc=o;var l=new at.inputStyles[r.inputStyle](this),f=this.display=new vy(e,o,l,r);f.wrapper.CodeMirror=this,Vc(this),r.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Ku(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new be,keySeq:null,specialChars:null},r.autofocus&&!A&&f.input.focus(),d&&h<11&&setTimeout(function(){return s.display.input.reset(!0)},20),o1(this),zy(),jn(this),this.curOp.forceUpdate=!0,oc(this,o),r.autofocus&&!A||this.hasFocus()?setTimeout(function(){s.hasFocus()&&!s.state.focused&&oa(s)},20):Gn(this);for(var p in Go)Go.hasOwnProperty(p)&&Go[p](this,r[p],ni);Ju(this),r.finishInit&&r.finishInit(this);for(var m=0;m<La.length;++m)La[m](this);An(this),g&&r.lineWrapping&&getComputedStyle(f.lineDiv).textRendering=="optimizelegibility"&&(f.lineDiv.style.textRendering="auto")}at.defaults=Gc,at.optionHandlers=Go;function o1(e){var r=e.display;De(r.scroller,"mousedown",St(e,Wc)),d&&h<11?De(r.scroller,"dblclick",St(e,function(v){if(!ut(e,v)){var y=Tn(e,v);if(!(!y||Sa(e,v)||Yr(e.display,v))){gt(v);var E=e.findWordAt(y);Fo(e.doc,E.anchor,E.head)}}})):De(r.scroller,"dblclick",function(v){return ut(e,v)||gt(v)}),De(r.scroller,"contextmenu",function(v){return Uc(e,v)}),De(r.input.getField(),"contextmenu",function(v){r.scroller.contains(v.target)||Uc(e,v)});var s,o={end:0};function l(){r.activeTouch&&(s=setTimeout(function(){return r.activeTouch=null},1e3),o=r.activeTouch,o.end=+new Date)}function f(v){if(v.touches.length!=1)return!1;var y=v.touches[0];return y.radiusX<=1&&y.radiusY<=1}function p(v,y){if(y.left==null)return!0;var E=y.left-v.left,I=y.top-v.top;return E*E+I*I>20*20}De(r.scroller,"touchstart",function(v){if(!ut(e,v)&&!f(v)&&!Sa(e,v)){r.input.ensurePolled(),clearTimeout(s);var y=+new Date;r.activeTouch={start:y,moved:!1,prev:y-o.end<=300?o:null},v.touches.length==1&&(r.activeTouch.left=v.touches[0].pageX,r.activeTouch.top=v.touches[0].pageY)}}),De(r.scroller,"touchmove",function(){r.activeTouch&&(r.activeTouch.moved=!0)}),De(r.scroller,"touchend",function(v){var y=r.activeTouch;if(y&&!Yr(r,v)&&y.left!=null&&!y.moved&&new Date-y.start<300){var E=e.coordsChar(r.activeTouch,"page"),I;!y.prev||p(y,y.prev)?I=new et(E,E):!y.prev.prev||p(y,y.prev.prev)?I=e.findWordAt(E):I=new et(ie(E.line,0),ae(e.doc,ie(E.line+1,0))),e.setSelection(I.anchor,I.head),e.focus(),gt(v)}l()}),De(r.scroller,"touchcancel",l),De(r.scroller,"scroll",function(){r.scroller.clientHeight&&(Mi(e,r.scroller.scrollTop),En(e,r.scroller.scrollLeft,!0),Pe(e,"scroll",e))}),De(r.scroller,"mousewheel",function(v){return tc(e,v)}),De(r.scroller,"DOMMouseScroll",function(v){return tc(e,v)}),De(r.wrapper,"scroll",function(){return r.wrapper.scrollTop=r.wrapper.scrollLeft=0}),r.dragFunctions={enter:function(v){ut(e,v)||hr(v)},over:function(v){ut(e,v)||(Py(e,v),hr(v))},start:function(v){return Iy(e,v)},drop:St(e,Dy),leave:function(v){ut(e,v)||Nc(e)}};var m=r.input.getField();De(m,"keyup",function(v){return Fc.call(e,v)}),De(m,"keydown",St(e,Hc)),De(m,"keypress",St(e,Bc)),De(m,"focus",function(v){return oa(e,v)}),De(m,"blur",function(v){return Gn(e,v)})}var La=[];at.defineInitHook=function(e){return La.push(e)};function Ui(e,r,s,o){var l=e.doc,f;s==null&&(s="add"),s=="smart"&&(l.mode.indent?f=bi(e,r).state:s="prev");var p=e.options.tabSize,m=ce(l,r),v=Se(m.text,null,p);m.stateAfter&&(m.stateAfter=null);var y=m.text.match(/^\s*/)[0],E;if(!o&&!/\S/.test(m.text))E=0,s="not";else if(s=="smart"&&(E=l.mode.indent(f,m.text.slice(y.length),m.text),E==me||E>150)){if(!o)return;s="prev"}s=="prev"?r>l.first?E=Se(ce(l,r-1).text,null,p):E=0:s=="add"?E=v+e.options.indentUnit:s=="subtract"?E=v-e.options.indentUnit:typeof s=="number"&&(E=v+s),E=Math.max(0,E);var I="",F=0;if(e.options.indentWithTabs)for(var z=Math.floor(E/p);z;--z)F+=p,I+="	";if(F<E&&(I+=Ut(E-F)),I!=y)return Xn(l,I,ie(r,0),ie(r,y.length),"+input"),m.stateAfter=null,!0;for(var G=0;G<l.sel.ranges.length;G++){var re=l.sel.ranges[G];if(re.head.line==r&&re.head.ch<y.length){var le=ie(r,y.length);ya(l,G,new et(le,le));break}}}var Er=null;function Yo(e){Er=e}function Ta(e,r,s,o,l){var f=e.doc;e.display.shift=!1,o||(o=f.sel);var p=+new Date-200,m=l=="paste"||e.state.pasteIncoming>p,v=Xr(r),y=null;if(m&&o.ranges.length>1)if(Er&&Er.text.join(`
`)==r){if(o.ranges.length%Er.text.length==0){y=[];for(var E=0;E<Er.text.length;E++)y.push(f.splitLines(Er.text[E]))}}else v.length==o.ranges.length&&e.options.pasteLinesPerSelection&&(y=Ye(v,function(he){return[he]}));for(var I=e.curOp.updateInput,F=o.ranges.length-1;F>=0;F--){var z=o.ranges[F],G=z.from(),re=z.to();z.empty()&&(s&&s>0?G=ie(G.line,G.ch-s):e.state.overwrite&&!m?re=ie(re.line,Math.min(ce(f,re.line).text.length,re.ch+He(v).length)):m&&Er&&Er.lineWise&&Er.text.join(`
`)==v.join(`
`)&&(G=re=ie(G.line,0)));var le={from:G,to:re,text:y?y[F%y.length]:v,origin:l||(m?"paste":e.state.cutIncoming>p?"cut":"+input")};Jn(e.doc,le),Ct(e,"inputRead",e,le)}r&&!m&&Kc(e,r),Yn(e),e.curOp.updateInput<2&&(e.curOp.updateInput=I),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Yc(e,r){var s=e.clipboardData&&e.clipboardData.getData("Text");if(s)return e.preventDefault(),!r.isReadOnly()&&!r.options.disableInput&&ir(r,function(){return Ta(r,s,0,null,"paste")}),!0}function Kc(e,r){if(!(!e.options.electricChars||!e.options.smartIndent))for(var s=e.doc.sel,o=s.ranges.length-1;o>=0;o--){var l=s.ranges[o];if(!(l.head.ch>100||o&&s.ranges[o-1].head.line==l.head.line)){var f=e.getModeAt(l.head),p=!1;if(f.electricChars){for(var m=0;m<f.electricChars.length;m++)if(r.indexOf(f.electricChars.charAt(m))>-1){p=Ui(e,l.head.line,"smart");break}}else f.electricInput&&f.electricInput.test(ce(e.doc,l.head.line).text.slice(0,l.head.ch))&&(p=Ui(e,l.head.line,"smart"));p&&Ct(e,"electricInput",e,l.head.line)}}}function Qc(e){for(var r=[],s=[],o=0;o<e.doc.sel.ranges.length;o++){var l=e.doc.sel.ranges[o].head.line,f={anchor:ie(l,0),head:ie(l+1,0)};s.push(f),r.push(e.getRange(f.anchor,f.head))}return{text:r,ranges:s}}function Zc(e,r,s,o){e.setAttribute("autocorrect",s?"":"off"),e.setAttribute("autocapitalize",o?"":"off"),e.setAttribute("spellcheck",!!r)}function Jc(){var e=U("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),r=U("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return g?e.style.width="1000px":e.setAttribute("wrap","off"),M&&(e.style.border="1px solid black"),Zc(e),r}function s1(e){var r=e.optionHandlers,s=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(o,l){var f=this.options,p=f[o];f[o]==l&&o!="mode"||(f[o]=l,r.hasOwnProperty(o)&&St(this,r[o])(this,l,p),Pe(this,"optionChange",this,o))},getOption:function(o){return this.options[o]},getDoc:function(){return this.doc},addKeyMap:function(o,l){this.state.keyMaps[l?"push":"unshift"](Uo(o))},removeKeyMap:function(o){for(var l=this.state.keyMaps,f=0;f<l.length;++f)if(l[f]==o||l[f].name==o)return l.splice(f,1),!0},addOverlay:Wt(function(o,l){var f=o.token?o:e.getMode(this.options,o);if(f.startState)throw new Error("Overlays may not be stateful.");ft(this.state.overlays,{mode:f,modeSpec:o,opaque:l&&l.opaque,priority:l&&l.priority||0},function(p){return p.priority}),this.state.modeGen++,Qt(this)}),removeOverlay:Wt(function(o){for(var l=this.state.overlays,f=0;f<l.length;++f){var p=l[f].modeSpec;if(p==o||typeof o=="string"&&p.name==o){l.splice(f,1),this.state.modeGen++,Qt(this);return}}}),indentLine:Wt(function(o,l,f){typeof l!="string"&&typeof l!="number"&&(l==null?l=this.options.smartIndent?"smart":"prev":l=l?"add":"subtract"),Je(this.doc,o)&&Ui(this,o,l,f)}),indentSelection:Wt(function(o){for(var l=this.doc.sel.ranges,f=-1,p=0;p<l.length;p++){var m=l[p];if(m.empty())m.head.line>f&&(Ui(this,m.head.line,o,!0),f=m.head.line,p==this.doc.sel.primIndex&&Yn(this));else{var v=m.from(),y=m.to(),E=Math.max(f,v.line);f=Math.min(this.lastLine(),y.line-(y.ch?0:1))+1;for(var I=E;I<f;++I)Ui(this,I,o);var F=this.doc.sel.ranges;v.ch==0&&l.length==F.length&&F[p].from().ch>0&&ya(this.doc,p,new et(v,F[p].to()),xe)}}}),getTokenAt:function(o,l){return Hs(this,o,l)},getLineTokens:function(o,l){return Hs(this,ie(o),l,!0)},getTokenTypeAt:function(o){o=ae(this.doc,o);var l=Sr(this,ce(this.doc,o.line)),f=0,p=(l.length-1)/2,m=o.ch,v;if(m==0)v=l[2];else for(;;){var y=f+p>>1;if((y?l[y*2-1]:0)>=m)p=y;else if(l[y*2+1]<m)f=y+1;else{v=l[y*2+2];break}}var E=v?v.indexOf("overlay "):-1;return E<0?v:E==0?null:v.slice(0,E-1)},getModeAt:function(o){var l=this.doc.mode;return l.innerMode?e.innerMode(l,this.getTokenAt(o).state).mode:l},getHelper:function(o,l){return this.getHelpers(o,l)[0]},getHelpers:function(o,l){var f=[];if(!s.hasOwnProperty(l))return f;var p=s[l],m=this.getModeAt(o);if(typeof m[l]=="string")p[m[l]]&&f.push(p[m[l]]);else if(m[l])for(var v=0;v<m[l].length;v++){var y=p[m[l][v]];y&&f.push(y)}else m.helperType&&p[m.helperType]?f.push(p[m.helperType]):p[m.name]&&f.push(p[m.name]);for(var E=0;E<p._global.length;E++){var I=p._global[E];I.pred(m,this)&&ue(f,I.val)==-1&&f.push(I.val)}return f},getStateAfter:function(o,l){var f=this.doc;return o=se(f,o??f.first+f.size-1),bi(this,o+1,l).state},cursorCoords:function(o,l){var f,p=this.doc.sel.primary();return o==null?f=p.head:typeof o=="object"?f=ae(this.doc,o):f=o?p.from():p.to(),Tr(this,f,l||"page")},charCoords:function(o,l){return jo(this,ae(this.doc,o),l||"page")},coordsChar:function(o,l){return o=zu(this,o,l||"page"),Zs(this,o.left,o.top)},lineAtHeight:function(o,l){return o=zu(this,{top:o,left:0},l||"page").top,Dt(this.doc,o+this.display.viewOffset)},heightAtLine:function(o,l,f){var p=!1,m;if(typeof o=="number"){var v=this.doc.first+this.doc.size-1;o<this.doc.first?o=this.doc.first:o>v&&(o=v,p=!0),m=ce(this.doc,o)}else m=o;return No(this,m,{top:0,left:0},l||"page",f||p).top+(p?this.doc.height-Gr(m):0)},defaultTextHeight:function(){return Un(this.display)},defaultCharWidth:function(){return Vn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(o,l,f,p,m){var v=this.display;o=Tr(this,ae(this.doc,o));var y=o.bottom,E=o.left;if(l.style.position="absolute",l.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(l),v.sizer.appendChild(l),p=="over")y=o.top;else if(p=="above"||p=="near"){var I=Math.max(v.wrapper.clientHeight,this.doc.height),F=Math.max(v.sizer.clientWidth,v.lineSpace.clientWidth);(p=="above"||o.bottom+l.offsetHeight>I)&&o.top>l.offsetHeight?y=o.top-l.offsetHeight:o.bottom+l.offsetHeight<=I&&(y=o.bottom),E+l.offsetWidth>F&&(E=F-l.offsetWidth)}l.style.top=y+"px",l.style.left=l.style.right="",m=="right"?(E=v.sizer.clientWidth-l.offsetWidth,l.style.right="0px"):(m=="left"?E=0:m=="middle"&&(E=(v.sizer.clientWidth-l.offsetWidth)/2),l.style.left=E+"px"),f&&ny(this,{left:E,top:y,right:E+l.offsetWidth,bottom:y+l.offsetHeight})},triggerOnKeyDown:Wt(Hc),triggerOnKeyPress:Wt(Bc),triggerOnKeyUp:Fc,triggerOnMouseDown:Wt(Wc),execCommand:function(o){if(Bi.hasOwnProperty(o))return Bi[o].call(null,this)},triggerElectric:Wt(function(o){Kc(this,o)}),findPosH:function(o,l,f,p){var m=1;l<0&&(m=-1,l=-l);for(var v=ae(this.doc,o),y=0;y<l&&(v=Ma(this.doc,v,m,f,p),!v.hitSide);++y);return v},moveH:Wt(function(o,l){var f=this;this.extendSelectionsBy(function(p){return f.display.shift||f.doc.extend||p.empty()?Ma(f.doc,p.head,o,l,f.options.rtlMoveVisually):o<0?p.from():p.to()},de)}),deleteH:Wt(function(o,l){var f=this.doc.sel,p=this.doc;f.somethingSelected()?p.replaceSelection("",null,"+delete"):ri(this,function(m){var v=Ma(p,m.head,o,l,!1);return o<0?{from:v,to:m.head}:{from:m.head,to:v}})}),findPosV:function(o,l,f,p){var m=1,v=p;l<0&&(m=-1,l=-l);for(var y=ae(this.doc,o),E=0;E<l;++E){var I=Tr(this,y,"div");if(v==null?v=I.left:I.left=v,y=Xc(this,I,m,f),y.hitSide)break}return y},moveV:Wt(function(o,l){var f=this,p=this.doc,m=[],v=!this.display.shift&&!p.extend&&p.sel.somethingSelected();if(p.extendSelectionsBy(function(E){if(v)return o<0?E.from():E.to();var I=Tr(f,E.head,"div");E.goalColumn!=null&&(I.left=E.goalColumn),m.push(I.left);var F=Xc(f,I,o,l);return l=="page"&&E==p.sel.primary()&&aa(f,jo(f,F,"div").top-I.top),F},de),m.length)for(var y=0;y<p.sel.ranges.length;y++)p.sel.ranges[y].goalColumn=m[y]}),findWordAt:function(o){var l=this.doc,f=ce(l,o.line).text,p=o.ch,m=o.ch;if(f){var v=this.getHelper(o,"wordChars");(o.sticky=="before"||m==f.length)&&p?--p:++m;for(var y=f.charAt(p),E=B(y,v)?function(I){return B(I,v)}:/\s/.test(y)?function(I){return/\s/.test(I)}:function(I){return!/\s/.test(I)&&!B(I)};p>0&&E(f.charAt(p-1));)--p;for(;m<f.length&&E(f.charAt(m));)++m}return new et(ie(o.line,p),ie(o.line,m))},toggleOverwrite:function(o){o!=null&&o==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Oe(this.display.cursorDiv,"CodeMirror-overwrite"):H(this.display.cursorDiv,"CodeMirror-overwrite"),Pe(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==fe()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Wt(function(o,l){Ti(this,o,l)}),getScrollInfo:function(){var o=this.display.scroller;return{left:o.scrollLeft,top:o.scrollTop,height:o.scrollHeight-zr(this)-this.display.barHeight,width:o.scrollWidth-zr(this)-this.display.barWidth,clientHeight:Gs(this),clientWidth:Sn(this)}},scrollIntoView:Wt(function(o,l){o==null?(o={from:this.doc.sel.primary().head,to:null},l==null&&(l=this.options.cursorScrollMargin)):typeof o=="number"?o={from:ie(o,0),to:null}:o.from==null&&(o={from:o,to:null}),o.to||(o.to=o.from),o.margin=l||0,o.from.line!=null?iy(this,o):Uu(this,o.from,o.to,o.margin)}),setSize:Wt(function(o,l){var f=this,p=function(v){return typeof v=="number"||/^\d+$/.test(String(v))?v+"px":v};o!=null&&(this.display.wrapper.style.width=p(o)),l!=null&&(this.display.wrapper.style.height=p(l)),this.options.lineWrapping&&Du(this);var m=this.display.viewFrom;this.doc.iter(m,this.display.viewTo,function(v){if(v.widgets){for(var y=0;y<v.widgets.length;y++)if(v.widgets[y].noHScroll){nn(f,m,"widget");break}}++m}),this.curOp.forceUpdate=!0,Pe(this,"refresh",this)}),operation:function(o){return ir(this,o)},startOperation:function(){return jn(this)},endOperation:function(){return An(this)},refresh:Wt(function(){var o=this.display.cachedTextHeight;Qt(this),this.curOp.forceUpdate=!0,Si(this),Ti(this,this.doc.scrollLeft,this.doc.scrollTop),ca(this.display),(o==null||Math.abs(o-Un(this.display))>.5||this.options.lineWrapping)&&ta(this),Pe(this,"refresh",this)}),swapDoc:Wt(function(o){var l=this.doc;return l.cm=null,this.state.selectingText&&this.state.selectingText(),oc(this,o),Si(this),this.display.input.reset(),Ti(this,o.scrollLeft,o.scrollTop),this.curOp.forceScroll=!0,Ct(this,"swapDoc",this,l),l}),phrase:function(o){var l=this.options.phrases;return l&&Object.prototype.hasOwnProperty.call(l,o)?l[o]:o},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Vt(e),e.registerHelper=function(o,l,f){s.hasOwnProperty(o)||(s[o]=e[o]={_global:[]}),s[o][l]=f},e.registerGlobalHelper=function(o,l,f,p){e.registerHelper(o,l,p),s[o]._global.push({pred:f,val:p})}}function Ma(e,r,s,o,l){var f=r,p=s,m=ce(e,r.line),v=l&&e.direction=="rtl"?-s:s;function y(){var ve=r.line+v;return ve<e.first||ve>=e.first+e.size?!1:(r=new ie(ve,r.ch,r.sticky),m=ce(e,ve))}function E(ve){var pe;if(o=="codepoint"){var we=m.text.charCodeAt(r.ch+(s>0?0:-1));if(isNaN(we))pe=null;else{var Ie=s>0?we>=55296&&we<56320:we>=56320&&we<57343;pe=new ie(r.line,Math.max(0,Math.min(m.text.length,r.ch+s*(Ie?2:1))),-s)}}else l?pe=By(e.cm,m,r,s):pe=wa(m,r,s);if(pe==null)if(!ve&&y())r=xa(l,e.cm,m,r.line,v);else return!1;else r=pe;return!0}if(o=="char"||o=="codepoint")E();else if(o=="column")E(!0);else if(o=="word"||o=="group")for(var I=null,F=o=="group",z=e.cm&&e.cm.getHelper(r,"wordChars"),G=!0;!(s<0&&!E(!G));G=!1){var re=m.text.charAt(r.ch)||`
`,le=B(re,z)?"w":F&&re==`
`?"n":!F||/\s/.test(re)?null:"p";if(F&&!G&&!le&&(le="s"),I&&I!=le){s<0&&(s=1,E(),r.sticky="after");break}if(le&&(I=le),s>0&&!E(!G))break}var he=Wo(e,r,f,p,!0);return O(f,he)&&(he.hitSide=!0),he}function Xc(e,r,s,o){var l=e.doc,f=r.left,p;if(o=="page"){var m=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),v=Math.max(m-.5*Un(e.display),3);p=(s>0?r.bottom:r.top)+s*v}else o=="line"&&(p=s>0?r.bottom+3:r.top-3);for(var y;y=Zs(e,f,p),!!y.outside;){if(s<0?p<=0:p>=l.height){y.hitSide=!0;break}p+=s*5}return y}var tt=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new be,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};tt.prototype.init=function(e){var r=this,s=this,o=s.cm,l=s.div=e.lineDiv;l.contentEditable=!0,Zc(l,o.options.spellcheck,o.options.autocorrect,o.options.autocapitalize);function f(m){for(var v=m.target;v;v=v.parentNode){if(v==l)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(v.className))break}return!1}De(l,"paste",function(m){!f(m)||ut(o,m)||Yc(m,o)||h<=11&&setTimeout(St(o,function(){return r.updateFromDOM()}),20)}),De(l,"compositionstart",function(m){r.composing={data:m.data,done:!1}}),De(l,"compositionupdate",function(m){r.composing||(r.composing={data:m.data,done:!1})}),De(l,"compositionend",function(m){r.composing&&(m.data!=r.composing.data&&r.readFromDOMSoon(),r.composing.done=!0)}),De(l,"touchstart",function(){return s.forceCompositionEnd()}),De(l,"input",function(){r.composing||r.readFromDOMSoon()});function p(m){if(!(!f(m)||ut(o,m))){if(o.somethingSelected())Yo({lineWise:!1,text:o.getSelections()}),m.type=="cut"&&o.replaceSelection("",null,"cut");else if(o.options.lineWiseCopyCut){var v=Qc(o);Yo({lineWise:!0,text:v.text}),m.type=="cut"&&o.operation(function(){o.setSelections(v.ranges,0,xe),o.replaceSelection("",null,"cut")})}else return;if(m.clipboardData){m.clipboardData.clearData();var y=Er.text.join(`
`);if(m.clipboardData.setData("Text",y),m.clipboardData.getData("Text")==y){m.preventDefault();return}}var E=Jc(),I=E.firstChild;o.display.lineSpace.insertBefore(E,o.display.lineSpace.firstChild),I.value=Er.text.join(`
`);var F=fe();$e(I),setTimeout(function(){o.display.lineSpace.removeChild(E),F.focus(),F==l&&s.showPrimarySelection()},50)}}De(l,"copy",p),De(l,"cut",p)},tt.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},tt.prototype.prepareSelection=function(){var e=Wu(this.cm,!1);return e.focus=fe()==this.div,e},tt.prototype.showSelection=function(e,r){!e||!this.cm.display.view.length||((e.focus||r)&&this.showPrimarySelection(),this.showMultipleSelections(e))},tt.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},tt.prototype.showPrimarySelection=function(){var e=this.getSelection(),r=this.cm,s=r.doc.sel.primary(),o=s.from(),l=s.to();if(r.display.viewTo==r.display.viewFrom||o.line>=r.display.viewTo||l.line<r.display.viewFrom){e.removeAllRanges();return}var f=Ko(r,e.anchorNode,e.anchorOffset),p=Ko(r,e.focusNode,e.focusOffset);if(!(f&&!f.bad&&p&&!p.bad&&w(je(f,p),o)==0&&w(ne(f,p),l)==0)){var m=r.display.view,v=o.line>=r.display.viewFrom&&ef(r,o)||{node:m[0].measure.map[2],offset:0},y=l.line<r.display.viewTo&&ef(r,l);if(!y){var E=m[m.length-1].measure,I=E.maps?E.maps[E.maps.length-1]:E.map;y={node:I[I.length-1],offset:I[I.length-2]-I[I.length-3]}}if(!v||!y){e.removeAllRanges();return}var F=e.rangeCount&&e.getRangeAt(0),z;try{z=Q(v.node,v.offset,y.offset,y.node)}catch(G){}z&&(!i&&r.state.focused?(e.collapse(v.node,v.offset),z.collapsed||(e.removeAllRanges(),e.addRange(z))):(e.removeAllRanges(),e.addRange(z)),F&&e.anchorNode==null?e.addRange(F):i&&this.startGracePeriod()),this.rememberSelection()}},tt.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},tt.prototype.showMultipleSelections=function(e){W(this.cm.display.cursorDiv,e.cursors),W(this.cm.display.selectionDiv,e.selection)},tt.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},tt.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var r=e.getRangeAt(0).commonAncestorContainer;return te(this.div,r)},tt.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||fe()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},tt.prototype.blur=function(){this.div.blur()},tt.prototype.getField=function(){return this.div},tt.prototype.supportsTouch=function(){return!0},tt.prototype.receivedFocus=function(){var e=this,r=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):ir(this.cm,function(){return r.cm.curOp.selectionChanged=!0});function s(){r.cm.state.focused&&(r.pollSelection(),r.polling.set(r.cm.options.pollInterval,s))}this.polling.set(this.cm.options.pollInterval,s)},tt.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},tt.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var e=this.getSelection(),r=this.cm;if(N&&x&&this.cm.display.gutterSpecs.length&&a1(e.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var s=Ko(r,e.anchorNode,e.anchorOffset),o=Ko(r,e.focusNode,e.focusOffset);s&&o&&ir(r,function(){It(r.doc,sn(s,o),xe),(s.bad||o.bad)&&(r.curOp.selectionChanged=!0)})}}},tt.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e=this.cm,r=e.display,s=e.doc.sel.primary(),o=s.from(),l=s.to();if(o.ch==0&&o.line>e.firstLine()&&(o=ie(o.line-1,ce(e.doc,o.line-1).length)),l.ch==ce(e.doc,l.line).text.length&&l.line<e.lastLine()&&(l=ie(l.line+1,0)),o.line<r.viewFrom||l.line>r.viewTo-1)return!1;var f,p,m;o.line==r.viewFrom||(f=Mn(e,o.line))==0?(p=We(r.view[0].line),m=r.view[0].node):(p=We(r.view[f].line),m=r.view[f-1].node.nextSibling);var v=Mn(e,l.line),y,E;if(v==r.view.length-1?(y=r.viewTo-1,E=r.lineDiv.lastChild):(y=We(r.view[v+1].line)-1,E=r.view[v+1].node.previousSibling),!m)return!1;for(var I=e.doc.splitLines(l1(e,m,E,p,y)),F=J(e.doc,ie(p,0),ie(y,ce(e.doc,y).text.length));I.length>1&&F.length>1;)if(He(I)==He(F))I.pop(),F.pop(),y--;else if(I[0]==F[0])I.shift(),F.shift(),p++;else break;for(var z=0,G=0,re=I[0],le=F[0],he=Math.min(re.length,le.length);z<he&&re.charCodeAt(z)==le.charCodeAt(z);)++z;for(var ve=He(I),pe=He(F),we=Math.min(ve.length-(I.length==1?z:0),pe.length-(F.length==1?z:0));G<we&&ve.charCodeAt(ve.length-G-1)==pe.charCodeAt(pe.length-G-1);)++G;if(I.length==1&&F.length==1&&p==o.line)for(;z&&z>o.ch&&ve.charCodeAt(ve.length-G-1)==pe.charCodeAt(pe.length-G-1);)z--,G++;I[I.length-1]=ve.slice(0,ve.length-G).replace(/^\u200b+/,""),I[0]=I[0].slice(z).replace(/\u200b+$/,"");var Ie=ie(p,z),Ae=ie(y,F.length?He(F).length-G:0);if(I.length>1||I[0]||w(Ie,Ae))return Xn(e.doc,I,Ie,Ae,"+input"),!0},tt.prototype.ensurePolled=function(){this.forceCompositionEnd()},tt.prototype.reset=function(){this.forceCompositionEnd()},tt.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},tt.prototype.readFromDOMSoon=function(){var e=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing)if(e.composing.done)e.composing=null;else return;e.updateFromDOM()},80))},tt.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&ir(this.cm,function(){return Qt(e.cm)})},tt.prototype.setUneditable=function(e){e.contentEditable="false"},tt.prototype.onKeyPress=function(e){e.charCode==0||this.composing||(e.preventDefault(),this.cm.isReadOnly()||St(this.cm,Ta)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0))},tt.prototype.readOnlyChanged=function(e){this.div.contentEditable=String(e!="nocursor")},tt.prototype.onContextMenu=function(){},tt.prototype.resetPosition=function(){},tt.prototype.needsContentAttribute=!0;function ef(e,r){var s=Ys(e,r.line);if(!s||s.hidden)return null;var o=ce(e.doc,r.line),l=Eu(s,o,r.line),f=Ot(o,e.doc.direction),p="left";if(f){var m=nt(f,r.ch);p=m%2?"right":"left"}var v=Au(l.map,r.ch,p);return v.offset=v.collapse=="right"?v.end:v.start,v}function a1(e){for(var r=e;r;r=r.parentNode)if(/CodeMirror-gutter-wrapper/.test(r.className))return!0;return!1}function ii(e,r){return r&&(e.bad=!0),e}function l1(e,r,s,o,l){var f="",p=!1,m=e.doc.lineSeparator(),v=!1;function y(z){return function(G){return G.id==z}}function E(){p&&(f+=m,v&&(f+=m),p=v=!1)}function I(z){z&&(E(),f+=z)}function F(z){if(z.nodeType==1){var G=z.getAttribute("cm-text");if(G){I(G);return}var re=z.getAttribute("cm-marker"),le;if(re){var he=e.findMarks(ie(o,0),ie(l+1,0),y(+re));he.length&&(le=he[0].find(0))&&I(J(e.doc,le.from,le.to).join(m));return}if(z.getAttribute("contenteditable")=="false")return;var ve=/^(pre|div|p|li|table|br)$/i.test(z.nodeName);if(!/^br$/i.test(z.nodeName)&&z.textContent.length==0)return;ve&&E();for(var pe=0;pe<z.childNodes.length;pe++)F(z.childNodes[pe]);/^(pre|p)$/i.test(z.nodeName)&&(v=!0),ve&&(p=!0)}else z.nodeType==3&&I(z.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;F(r),r!=s;)r=r.nextSibling,v=!1;return f}function Ko(e,r,s){var o;if(r==e.display.lineDiv){if(o=e.display.lineDiv.childNodes[s],!o)return ii(e.clipPos(ie(e.display.viewTo-1)),!0);r=null,s=0}else for(o=r;;o=o.parentNode){if(!o||o==e.display.lineDiv)return null;if(o.parentNode&&o.parentNode==e.display.lineDiv)break}for(var l=0;l<e.display.view.length;l++){var f=e.display.view[l];if(f.node==o)return u1(f,r,s)}}function u1(e,r,s){var o=e.text.firstChild,l=!1;if(!r||!te(o,r))return ii(ie(We(e.line),0),!0);if(r==o&&(l=!0,r=o.childNodes[s],s=0,!r)){var f=e.rest?He(e.rest):e.line;return ii(ie(We(f),f.text.length),l)}var p=r.nodeType==3?r:null,m=r;for(!p&&r.childNodes.length==1&&r.firstChild.nodeType==3&&(p=r.firstChild,s&&(s=p.nodeValue.length));m.parentNode!=o;)m=m.parentNode;var v=e.measure,y=v.maps;function E(le,he,ve){for(var pe=-1;pe<(y?y.length:0);pe++)for(var we=pe<0?v.map:y[pe],Ie=0;Ie<we.length;Ie+=3){var Ae=we[Ie+2];if(Ae==le||Ae==he){var Ue=We(pe<0?e.line:e.rest[pe]),rt=we[Ie]+ve;return(ve<0||Ae!=le)&&(rt=we[Ie+(ve?1:0)]),ie(Ue,rt)}}}var I=E(p,m,s);if(I)return ii(I,l);for(var F=m.nextSibling,z=p?p.nodeValue.length-s:0;F;F=F.nextSibling){if(I=E(F,F.firstChild,0),I)return ii(ie(I.line,I.ch-z),l);z+=F.textContent.length}for(var G=m.previousSibling,re=s;G;G=G.previousSibling){if(I=E(G,G.firstChild,-1),I)return ii(ie(I.line,I.ch+re),l);re+=G.textContent.length}}var vt=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new be,this.hasSelection=!1,this.composing=null};vt.prototype.init=function(e){var r=this,s=this,o=this.cm;this.createField(e);var l=this.textarea;e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),M&&(l.style.width="0px"),De(l,"input",function(){d&&h>=9&&r.hasSelection&&(r.hasSelection=null),s.poll()}),De(l,"paste",function(p){ut(o,p)||Yc(p,o)||(o.state.pasteIncoming=+new Date,s.fastPoll())});function f(p){if(!ut(o,p)){if(o.somethingSelected())Yo({lineWise:!1,text:o.getSelections()});else if(o.options.lineWiseCopyCut){var m=Qc(o);Yo({lineWise:!0,text:m.text}),p.type=="cut"?o.setSelections(m.ranges,null,xe):(s.prevInput="",l.value=m.text.join(`
`),$e(l))}else return;p.type=="cut"&&(o.state.cutIncoming=+new Date)}}De(l,"cut",f),De(l,"copy",f),De(e.scroller,"paste",function(p){if(!(Yr(e,p)||ut(o,p))){if(!l.dispatchEvent){o.state.pasteIncoming=+new Date,s.focus();return}var m=new Event("paste");m.clipboardData=p.clipboardData,l.dispatchEvent(m)}}),De(e.lineSpace,"selectstart",function(p){Yr(e,p)||gt(p)}),De(l,"compositionstart",function(){var p=o.getCursor("from");s.composing&&s.composing.range.clear(),s.composing={start:p,range:o.markText(p,o.getCursor("to"),{className:"CodeMirror-composing"})}}),De(l,"compositionend",function(){s.composing&&(s.poll(),s.composing.range.clear(),s.composing=null)})},vt.prototype.createField=function(e){this.wrapper=Jc(),this.textarea=this.wrapper.firstChild},vt.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},vt.prototype.prepareSelection=function(){var e=this.cm,r=e.display,s=e.doc,o=Wu(e);if(e.options.moveInputWithCursor){var l=Tr(e,s.sel.primary().head,"div"),f=r.wrapper.getBoundingClientRect(),p=r.lineDiv.getBoundingClientRect();o.teTop=Math.max(0,Math.min(r.wrapper.clientHeight-10,l.top+p.top-f.top)),o.teLeft=Math.max(0,Math.min(r.wrapper.clientWidth-10,l.left+p.left-f.left))}return o},vt.prototype.showSelection=function(e){var r=this.cm,s=r.display;W(s.cursorDiv,e.cursors),W(s.selectionDiv,e.selection),e.teTop!=null&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},vt.prototype.reset=function(e){if(!(this.contextMenuPending||this.composing)){var r=this.cm;if(r.somethingSelected()){this.prevInput="";var s=r.getSelection();this.textarea.value=s,r.state.focused&&$e(this.textarea),d&&h>=9&&(this.hasSelection=s)}else e||(this.prevInput=this.textarea.value="",d&&h>=9&&(this.hasSelection=null))}},vt.prototype.getField=function(){return this.textarea},vt.prototype.supportsTouch=function(){return!1},vt.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!A||fe()!=this.textarea))try{this.textarea.focus()}catch(e){}},vt.prototype.blur=function(){this.textarea.blur()},vt.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},vt.prototype.receivedFocus=function(){this.slowPoll()},vt.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},vt.prototype.fastPoll=function(){var e=!1,r=this;r.pollingFast=!0;function s(){var o=r.poll();!o&&!e?(e=!0,r.polling.set(60,s)):(r.pollingFast=!1,r.slowPoll())}r.polling.set(20,s)},vt.prototype.poll=function(){var e=this,r=this.cm,s=this.textarea,o=this.prevInput;if(this.contextMenuPending||!r.state.focused||Ur(s)&&!o&&!this.composing||r.isReadOnly()||r.options.disableInput||r.state.keySeq)return!1;var l=s.value;if(l==o&&!r.somethingSelected())return!1;if(d&&h>=9&&this.hasSelection===l||j&&/[\uf700-\uf7ff]/.test(l))return r.display.input.reset(),!1;if(r.doc.sel==r.display.selForContextMenu){var f=l.charCodeAt(0);if(f==8203&&!o&&(o="\u200B"),f==8666)return this.reset(),this.cm.execCommand("undo")}for(var p=0,m=Math.min(o.length,l.length);p<m&&o.charCodeAt(p)==l.charCodeAt(p);)++p;return ir(r,function(){Ta(r,l.slice(p),o.length-p,null,e.composing?"*compose":null),l.length>1e3||l.indexOf(`
`)>-1?s.value=e.prevInput="":e.prevInput=l,e.composing&&(e.composing.range.clear(),e.composing.range=r.markText(e.composing.start,r.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},vt.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},vt.prototype.onKeyPress=function(){d&&h>=9&&(this.hasSelection=null),this.fastPoll()},vt.prototype.onContextMenu=function(e){var r=this,s=r.cm,o=s.display,l=r.textarea;r.contextMenuPending&&r.contextMenuPending();var f=Tn(s,e),p=o.scroller.scrollTop;if(!f||C)return;var m=s.options.resetSelectionOnContextMenu;m&&s.doc.sel.contains(f)==-1&&St(s,It)(s.doc,sn(f),xe);var v=l.style.cssText,y=r.wrapper.style.cssText,E=r.wrapper.offsetParent.getBoundingClientRect();r.wrapper.style.cssText="position: static",l.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(e.clientY-E.top-5)+"px; left: "+(e.clientX-E.left-5)+`px;
      z-index: 1000; background: `+(d?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var I;g&&(I=window.scrollY),o.input.focus(),g&&window.scrollTo(null,I),o.input.reset(),s.somethingSelected()||(l.value=r.prevInput=" "),r.contextMenuPending=z,o.selForContextMenu=s.doc.sel,clearTimeout(o.detectingSelectAll);function F(){if(l.selectionStart!=null){var re=s.somethingSelected(),le="\u200B"+(re?l.value:"");l.value="\u21DA",l.value=le,r.prevInput=re?"":"\u200B",l.selectionStart=1,l.selectionEnd=le.length,o.selForContextMenu=s.doc.sel}}function z(){if(r.contextMenuPending==z&&(r.contextMenuPending=!1,r.wrapper.style.cssText=y,l.style.cssText=v,d&&h<9&&o.scrollbars.setScrollTop(o.scroller.scrollTop=p),l.selectionStart!=null)){(!d||d&&h<9)&&F();var re=0,le=function(){o.selForContextMenu==s.doc.sel&&l.selectionStart==0&&l.selectionEnd>0&&r.prevInput=="\u200B"?St(s,yc)(s):re++<10?o.detectingSelectAll=setTimeout(le,500):(o.selForContextMenu=null,o.input.reset())};o.detectingSelectAll=setTimeout(le,200)}}if(d&&h>=9&&F(),$){hr(e);var G=function(){wt(window,"mouseup",G),setTimeout(z,20)};De(window,"mouseup",G)}else setTimeout(z,50)},vt.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled=e=="nocursor",this.textarea.readOnly=!!e},vt.prototype.setUneditable=function(){},vt.prototype.needsContentAttribute=!1;function c1(e,r){if(r=r?Me(r):{},r.value=e.value,!r.tabindex&&e.tabIndex&&(r.tabindex=e.tabIndex),!r.placeholder&&e.placeholder&&(r.placeholder=e.placeholder),r.autofocus==null){var s=fe();r.autofocus=s==e||e.getAttribute("autofocus")!=null&&s==document.body}function o(){e.value=m.getValue()}var l;if(e.form&&(De(e.form,"submit",o),!r.leaveSubmitMethodAlone)){var f=e.form;l=f.submit;try{var p=f.submit=function(){o(),f.submit=l,f.submit(),f.submit=p}}catch(v){}}r.finishInit=function(v){v.save=o,v.getTextArea=function(){return e},v.toTextArea=function(){v.toTextArea=isNaN,o(),e.parentNode.removeChild(v.getWrapperElement()),e.style.display="",e.form&&(wt(e.form,"submit",o),!r.leaveSubmitMethodAlone&&typeof e.form.submit=="function"&&(e.form.submit=l))}},e.style.display="none";var m=at(function(v){return e.parentNode.insertBefore(v,e.nextSibling)},r);return m}function f1(e){e.off=wt,e.on=De,e.wheelEventPixels=yy,e.Doc=Zt,e.splitLines=Xr,e.countColumn=Se,e.findColumn=ze,e.isWordChar=Xe,e.Pass=me,e.signal=Pe,e.Line=Wn,e.changeEnd=an,e.scrollbarModel=Yu,e.Pos=ie,e.cmpPos=w,e.modes=Gt,e.mimeModes=Bt,e.resolveMode=Ar,e.getMode=tn,e.modeExtensions=Yt,e.extendMode=nr,e.copyState=it,e.startState=Ee,e.innerMode=oe,e.commands=Bi,e.keyMap=Qr,e.keyName=Ic,e.isModifierKey=Oc,e.lookupKey=ti,e.normalizeKeyMap=Fy,e.StringStream=Ne,e.SharedTextMarker=_i,e.TextMarker=un,e.LineWidget=Ri,e.e_preventDefault=gt,e.e_stopPropagation=xr,e.e_stop=hr,e.addClass=Oe,e.contains=te,e.rmClass=H,e.keyNames=cn}r1(at),s1(at);var d1="iter insert remove copy getEditor constructor".split(" ");for(var Qo in Zt.prototype)Zt.prototype.hasOwnProperty(Qo)&&ue(d1,Qo)<0&&(at.prototype[Qo]=function(e){return function(){return e.apply(this.doc,arguments)}}(Zt.prototype[Qo]));return Vt(Zt),at.inputStyles={textarea:vt,contenteditable:tt},at.defineMode=function(e){!at.defaults.mode&&e!="null"&&(at.defaults.mode=e),Cn.apply(this,arguments)},at.defineMIME=gr,at.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),at.defineMIME("text/plain","null"),at.defineExtension=function(e,r){at.prototype[e]=r},at.defineDocExtension=function(e,r){Zt.prototype[e]=r},at.fromTextArea=c1,f1(at),at.version="5.65.1",at})});var $a=ke((_f,Hf)=>{(function(n){typeof _f=="object"&&typeof Hf=="object"?n(Jr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";n.defineMode("javascript",function(t,i){var a=t.indentUnit,u=i.statementIndent,c=i.jsonld,d=i.json||c,h=i.trackScope!==!1,g=i.typescript,b=i.wordCharacters||/[\w$\xa1-\uffff]/,x=function(){function w(Re){return{type:Re,style:"keyword"}}var O=w("keyword a"),ee=w("keyword b"),ne=w("keyword c"),je=w("keyword d"),se=w("operator"),ae={type:"atom",style:"atom"};return{if:w("if"),while:O,with:O,else:ee,do:ee,try:ee,finally:ee,return:je,break:je,continue:je,new:w("new"),delete:ne,void:ne,throw:ne,debugger:w("debugger"),var:w("var"),const:w("var"),let:w("var"),function:w("function"),catch:w("catch"),for:w("for"),switch:w("switch"),case:w("case"),default:w("default"),in:se,typeof:se,instanceof:se,true:ae,false:ae,null:ae,undefined:ae,NaN:ae,Infinity:ae,this:w("this"),class:w("class"),super:w("atom"),yield:ne,export:w("export"),import:w("import"),extends:ne,await:ne}}(),C=/[+\-*&%=<>!?|~^@]/,S=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function L(w){for(var O=!1,ee,ne=!1;(ee=w.next())!=null;){if(!O){if(ee=="/"&&!ne)return;ee=="["?ne=!0:ne&&ee=="]"&&(ne=!1)}O=!O&&ee=="\\"}}var T,M;function N(w,O,ee){return T=w,M=ee,O}function A(w,O){var ee=w.next();if(ee=='"'||ee=="'")return O.tokenize=j(ee),O.tokenize(w,O);if(ee=="."&&w.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return N("number","number");if(ee=="."&&w.match(".."))return N("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(ee))return N(ee);if(ee=="="&&w.eat(">"))return N("=>","operator");if(ee=="0"&&w.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return N("number","number");if(/\d/.test(ee))return w.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),N("number","number");if(ee=="/")return w.eat("*")?(O.tokenize=D,D(w,O)):w.eat("/")?(w.skipToEnd(),N("comment","comment")):ie(w,O,1)?(L(w),w.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),N("regexp","string-2")):(w.eat("="),N("operator","operator",w.current()));if(ee=="`")return O.tokenize=P,P(w,O);if(ee=="#"&&w.peek()=="!")return w.skipToEnd(),N("meta","meta");if(ee=="#"&&w.eatWhile(b))return N("variable","property");if(ee=="<"&&w.match("!--")||ee=="-"&&w.match("->")&&!/\S/.test(w.string.slice(0,w.start)))return w.skipToEnd(),N("comment","comment");if(C.test(ee))return(ee!=">"||!O.lexical||O.lexical.type!=">")&&(w.eat("=")?(ee=="!"||ee=="=")&&w.eat("="):/[<>*+\-|&?]/.test(ee)&&(w.eat(ee),ee==">"&&w.eat(ee))),ee=="?"&&w.eat(".")?N("."):N("operator","operator",w.current());if(b.test(ee)){w.eatWhile(b);var ne=w.current();if(O.lastType!="."){if(x.propertyIsEnumerable(ne)){var je=x[ne];return N(je.type,je.style,ne)}if(ne=="async"&&w.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return N("async","keyword",ne)}return N("variable","variable",ne)}}function j(w){return function(O,ee){var ne=!1,je;if(c&&O.peek()=="@"&&O.match(S))return ee.tokenize=A,N("jsonld-keyword","meta");for(;(je=O.next())!=null&&!(je==w&&!ne);)ne=!ne&&je=="\\";return ne||(ee.tokenize=A),N("string","string")}}function D(w,O){for(var ee=!1,ne;ne=w.next();){if(ne=="/"&&ee){O.tokenize=A;break}ee=ne=="*"}return N("comment","comment")}function P(w,O){for(var ee=!1,ne;(ne=w.next())!=null;){if(!ee&&(ne=="`"||ne=="$"&&w.eat("{"))){O.tokenize=A;break}ee=!ee&&ne=="\\"}return N("quasi","string-2",w.current())}var R="([{}])";function _(w,O){O.fatArrowAt&&(O.fatArrowAt=null);var ee=w.string.indexOf("=>",w.start);if(!(ee<0)){if(g){var ne=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(w.string.slice(w.start,ee));ne&&(ee=ne.index)}for(var je=0,se=!1,ae=ee-1;ae>=0;--ae){var Re=w.string.charAt(ae),Ce=R.indexOf(Re);if(Ce>=0&&Ce<3){if(!je){++ae;break}if(--je==0){Re=="("&&(se=!0);break}}else if(Ce>=3&&Ce<6)++je;else if(b.test(Re))se=!0;else if(/["'\/`]/.test(Re))for(;;--ae){if(ae==0)return;var qe=w.string.charAt(ae-1);if(qe==Re&&w.string.charAt(ae-2)!="\\"){ae--;break}}else if(se&&!je){++ae;break}}se&&!je&&(O.fatArrowAt=ae)}}var $={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function q(w,O,ee,ne,je,se){this.indented=w,this.column=O,this.type=ee,this.prev=je,this.info=se,ne!=null&&(this.align=ne)}function H(w,O){if(!h)return!1;for(var ee=w.localVars;ee;ee=ee.next)if(ee.name==O)return!0;for(var ne=w.context;ne;ne=ne.prev)for(var ee=ne.vars;ee;ee=ee.next)if(ee.name==O)return!0}function K(w,O,ee,ne,je){var se=w.cc;for(W.state=w,W.stream=je,W.marked=null,W.cc=se,W.style=O,w.lexical.hasOwnProperty("align")||(w.lexical.align=!0);;){var ae=se.length?se.pop():d?de:xe;if(ae(ee,ne)){for(;se.length&&se[se.length-1].lex;)se.pop()();return W.marked?W.marked:ee=="variable"&&H(w,ne)?"variable-2":O}}}var W={state:null,column:null,marked:null,cc:null};function U(){for(var w=arguments.length-1;w>=0;w--)W.cc.push(arguments[w])}function k(){return U.apply(null,arguments),!0}function Q(w,O){for(var ee=O;ee;ee=ee.next)if(ee.name==w)return!0;return!1}function te(w){var O=W.state;if(W.marked="def",!!h){if(O.context){if(O.lexical.info=="var"&&O.context&&O.context.block){var ee=fe(w,O.context);if(ee!=null){O.context=ee;return}}else if(!Q(w,O.localVars)){O.localVars=new $e(w,O.localVars);return}}i.globalVars&&!Q(w,O.globalVars)&&(O.globalVars=new $e(w,O.globalVars))}}function fe(w,O){if(O)if(O.block){var ee=fe(w,O.prev);return ee?ee==O.prev?O:new Be(ee,O.vars,!0):null}else return Q(w,O.vars)?O:new Be(O.prev,new $e(w,O.vars),!1);else return null}function Oe(w){return w=="public"||w=="private"||w=="protected"||w=="abstract"||w=="readonly"}function Be(w,O,ee){this.prev=w,this.vars=O,this.block=ee}function $e(w,O){this.name=w,this.next=O}var Qe=new $e("this",new $e("arguments",null));function Me(){W.state.context=new Be(W.state.context,W.state.localVars,!1),W.state.localVars=Qe}function Se(){W.state.context=new Be(W.state.context,W.state.localVars,!0),W.state.localVars=null}Me.lex=Se.lex=!0;function be(){W.state.localVars=W.state.context.vars,W.state.context=W.state.context.prev}be.lex=!0;function ue(w,O){var ee=function(){var ne=W.state,je=ne.indented;if(ne.lexical.type=="stat")je=ne.lexical.indented;else for(var se=ne.lexical;se&&se.type==")"&&se.align;se=se.prev)je=se.indented;ne.lexical=new q(je,W.stream.column(),w,null,ne.lexical,O)};return ee.lex=!0,ee}function ge(){var w=W.state;w.lexical.prev&&(w.lexical.type==")"&&(w.indented=w.lexical.indented),w.lexical=w.lexical.prev)}ge.lex=!0;function me(w){function O(ee){return ee==w?k():w==";"||ee=="}"||ee==")"||ee=="]"?U():k(O)}return O}function xe(w,O){return w=="var"?k(ue("vardef",O),pr,me(";"),ge):w=="keyword a"?k(ue("form"),Ge,xe,ge):w=="keyword b"?k(ue("form"),xe,ge):w=="keyword d"?W.stream.match(/^\s*$/,!1)?k():k(ue("stat"),He,me(";"),ge):w=="debugger"?k(me(";")):w=="{"?k(ue("}"),Se,Ot,ge,be):w==";"?k():w=="if"?(W.state.lexical.info=="else"&&W.state.cc[W.state.cc.length-1]==ge&&W.state.cc.pop()(),k(ue("form"),Ge,xe,ge,Ur)):w=="function"?k(Gt):w=="for"?k(ue("form"),Se,en,xe,be,ge):w=="class"||g&&O=="interface"?(W.marked="keyword",k(ue("form",w=="class"?w:O),tn,ge)):w=="variable"?g&&O=="declare"?(W.marked="keyword",k(xe)):g&&(O=="module"||O=="enum"||O=="type")&&W.stream.match(/^\s*\w/,!1)?(W.marked="keyword",O=="enum"?k(Dt):O=="type"?k(Cn,me("operator"),Pe,me(";")):k(ue("form"),Et,me("{"),ue("}"),Ot,ge,ge)):g&&O=="namespace"?(W.marked="keyword",k(ue("form"),de,xe,ge)):g&&O=="abstract"?(W.marked="keyword",k(xe)):k(ue("stat"),Ve):w=="switch"?k(ue("form"),Ge,me("{"),ue("}","switch"),Se,Ot,ge,ge,be):w=="case"?k(de,me(":")):w=="default"?k(me(":")):w=="catch"?k(ue("form"),Me,ye,xe,ge,be):w=="export"?k(ue("stat"),oe,ge):w=="import"?k(ue("stat"),Ne,ge):w=="async"?k(xe):O=="@"?k(de,xe):U(ue("stat"),de,me(";"),ge)}function ye(w){if(w=="(")return k(gr,me(")"))}function de(w,O){return Ut(w,O,!1)}function ze(w,O){return Ut(w,O,!0)}function Ge(w){return w!="("?U():k(ue(")"),He,me(")"),ge)}function Ut(w,O,ee){if(W.state.fatArrowAt==W.stream.start){var ne=ee?Xe:br;if(w=="(")return k(Me,ue(")"),nt(gr,")"),ge,me("=>"),ne,be);if(w=="variable")return U(Me,Et,me("=>"),ne,be)}var je=ee?ft:Ye;return $.hasOwnProperty(w)?k(je):w=="function"?k(Gt,je):w=="class"||g&&O=="interface"?(W.marked="keyword",k(ue("form"),Ar,ge)):w=="keyword c"||w=="async"?k(ee?ze:de):w=="("?k(ue(")"),He,me(")"),ge,je):w=="operator"||w=="spread"?k(ee?ze:de):w=="["?k(ue("]"),We,ge,je):w=="{"?Te(ar,"}",null,je):w=="quasi"?U(At,je):w=="new"?k(B(ee)):k()}function He(w){return w.match(/[;\}\)\],]/)?U():U(de)}function Ye(w,O){return w==","?k(He):ft(w,O,!1)}function ft(w,O,ee){var ne=ee==!1?Ye:ft,je=ee==!1?de:ze;if(w=="=>")return k(Me,ee?Xe:br,be);if(w=="operator")return/\+\+|--/.test(O)||g&&O=="!"?k(ne):g&&O=="<"&&W.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?k(ue(">"),nt(Pe,">"),ge,ne):O=="?"?k(de,me(":"),je):k(je);if(w=="quasi")return U(At,ne);if(w!=";"){if(w=="(")return Te(ze,")","call",ne);if(w==".")return k(kt,ne);if(w=="[")return k(ue("]"),He,me("]"),ge,ne);if(g&&O=="as")return W.marked="keyword",k(Pe,ne);if(w=="regexp")return W.state.lastType=W.marked="operator",W.stream.backUp(W.stream.pos-W.stream.start-1),k(je)}}function At(w,O){return w!="quasi"?U():O.slice(O.length-2)!="${"?k(At):k(He,Rt)}function Rt(w){if(w=="}")return W.marked="string-2",W.state.tokenize=P,k(At)}function br(w){return _(W.stream,W.state),U(w=="{"?xe:de)}function Xe(w){return _(W.stream,W.state),U(w=="{"?xe:ze)}function B(w){return function(O){return O=="."?k(w?Z:V):O=="variable"&&g?k(hr,w?ft:Ye):U(w?ze:de)}}function V(w,O){if(O=="target")return W.marked="keyword",k(Ye)}function Z(w,O){if(O=="target")return W.marked="keyword",k(ft)}function Ve(w){return w==":"?k(ge,xe):U(Ye,me(";"),ge)}function kt(w){if(w=="variable")return W.marked="property",k()}function ar(w,O){if(w=="async")return W.marked="property",k(ar);if(w=="variable"||W.style=="keyword"){if(W.marked="property",O=="get"||O=="set")return k(Bn);var ee;return g&&W.state.fatArrowAt==W.stream.start&&(ee=W.stream.match(/^\s*:\s*/,!1))&&(W.state.fatArrowAt=W.stream.pos+ee[0].length),k(_t)}else{if(w=="number"||w=="string")return W.marked=c?"property":W.style+" property",k(_t);if(w=="jsonld-keyword")return k(_t);if(g&&Oe(O))return W.marked="keyword",k(ar);if(w=="[")return k(de,Ht,me("]"),_t);if(w=="spread")return k(ze,_t);if(O=="*")return W.marked="keyword",k(ar);if(w==":")return U(_t)}}function Bn(w){return w!="variable"?U(_t):(W.marked="property",k(Gt))}function _t(w){if(w==":")return k(ze);if(w=="(")return U(Gt)}function nt(w,O,ee){function ne(je,se){if(ee?ee.indexOf(je)>-1:je==","){var ae=W.state.lexical;return ae.info=="call"&&(ae.pos=(ae.pos||0)+1),k(function(Re,Ce){return Re==O||Ce==O?U():U(w)},ne)}return je==O||se==O?k():ee&&ee.indexOf(";")>-1?U(w):k(me(O))}return function(je,se){return je==O||se==O?k():U(w,ne)}}function Te(w,O,ee){for(var ne=3;ne<arguments.length;ne++)W.cc.push(arguments[ne]);return k(ue(O,ee),nt(w,O),ge)}function Ot(w){return w=="}"?k():U(xe,Ot)}function Ht(w,O){if(g){if(w==":")return k(Pe);if(O=="?")return k(Ht)}}function De(w,O){if(g&&(w==":"||O=="in"))return k(Pe)}function dr(w){if(g&&w==":")return W.stream.match(/^\s*\w+\s+is\b/,!1)?k(de,wt,Pe):k(Pe)}function wt(w,O){if(O=="is")return W.marked="keyword",k()}function Pe(w,O){if(O=="keyof"||O=="typeof"||O=="infer"||O=="readonly")return W.marked="keyword",k(O=="typeof"?ze:Pe);if(w=="variable"||O=="void")return W.marked="type",k(Ft);if(O=="|"||O=="&")return k(Pe);if(w=="string"||w=="number"||w=="atom")return k(Ft);if(w=="[")return k(ue("]"),nt(Pe,"]",","),ge,Ft);if(w=="{")return k(ue("}"),wr,ge,Ft);if(w=="(")return k(nt(xr,")"),ut,Ft);if(w=="<")return k(nt(Pe,">"),Pe);if(w=="quasi")return U(Vt,Ft)}function ut(w){if(w=="=>")return k(Pe)}function wr(w){return w.match(/[\}\)\]]/)?k():w==","||w==";"?k(wr):U(dt,wr)}function dt(w,O){if(w=="variable"||W.style=="keyword")return W.marked="property",k(dt);if(O=="?"||w=="number"||w=="string")return k(dt);if(w==":")return k(Pe);if(w=="[")return k(me("variable"),De,me("]"),dt);if(w=="(")return U(Bt,dt);if(!w.match(/[;\}\)\],]/))return k()}function Vt(w,O){return w!="quasi"?U():O.slice(O.length-2)!="${"?k(Vt):k(Pe,gt)}function gt(w){if(w=="}")return W.marked="string-2",W.state.tokenize=P,k(Vt)}function xr(w,O){return w=="variable"&&W.stream.match(/^\s*[?:]/,!1)||O=="?"?k(xr):w==":"?k(Pe):w=="spread"?k(xr):U(Pe)}function Ft(w,O){if(O=="<")return k(ue(">"),nt(Pe,">"),ge,Ft);if(O=="|"||w=="."||O=="&")return k(Pe);if(w=="[")return k(Pe,me("]"),Ft);if(O=="extends"||O=="implements")return W.marked="keyword",k(Pe);if(O=="?")return k(Pe,me(":"),Pe)}function hr(w,O){if(O=="<")return k(ue(">"),nt(Pe,">"),ge,Ft)}function kr(){return U(Pe,$r)}function $r(w,O){if(O=="=")return k(Pe)}function pr(w,O){return O=="enum"?(W.marked="keyword",k(Dt)):U(Et,Ht,lr,Xr)}function Et(w,O){if(g&&Oe(O))return W.marked="keyword",k(Et);if(w=="variable")return te(O),k();if(w=="spread")return k(Et);if(w=="[")return Te(mt,"]");if(w=="{")return Te(kn,"}")}function kn(w,O){return w=="variable"&&!W.stream.match(/^\s*:/,!1)?(te(O),k(lr)):(w=="variable"&&(W.marked="property"),w=="spread"?k(Et):w=="}"?U():w=="["?k(de,me("]"),me(":"),kn):k(me(":"),Et,lr))}function mt(){return U(Et,lr)}function lr(w,O){if(O=="=")return k(ze)}function Xr(w){if(w==",")return k(pr)}function Ur(w,O){if(w=="keyword b"&&O=="else")return k(ue("form","else"),xe,ge)}function en(w,O){if(O=="await")return k(en);if(w=="(")return k(ue(")"),jr,ge)}function jr(w){return w=="var"?k(pr,Cr):w=="variable"?k(Cr):U(Cr)}function Cr(w,O){return w==")"?k():w==";"?k(Cr):O=="in"||O=="of"?(W.marked="keyword",k(de,Cr)):U(de,Cr)}function Gt(w,O){if(O=="*")return W.marked="keyword",k(Gt);if(w=="variable")return te(O),k(Gt);if(w=="(")return k(Me,ue(")"),nt(gr,")"),ge,dr,xe,be);if(g&&O=="<")return k(ue(">"),nt(kr,">"),ge,Gt)}function Bt(w,O){if(O=="*")return W.marked="keyword",k(Bt);if(w=="variable")return te(O),k(Bt);if(w=="(")return k(Me,ue(")"),nt(gr,")"),ge,dr,be);if(g&&O=="<")return k(ue(">"),nt(kr,">"),ge,Bt)}function Cn(w,O){if(w=="keyword"||w=="variable")return W.marked="type",k(Cn);if(O=="<")return k(ue(">"),nt(kr,">"),ge)}function gr(w,O){return O=="@"&&k(de,gr),w=="spread"?k(gr):g&&Oe(O)?(W.marked="keyword",k(gr)):g&&w=="this"?k(Ht,lr):U(Et,Ht,lr)}function Ar(w,O){return w=="variable"?tn(w,O):Yt(w,O)}function tn(w,O){if(w=="variable")return te(O),k(Yt)}function Yt(w,O){if(O=="<")return k(ue(">"),nt(kr,">"),ge,Yt);if(O=="extends"||O=="implements"||g&&w==",")return O=="implements"&&(W.marked="keyword"),k(g?Pe:de,Yt);if(w=="{")return k(ue("}"),nr,ge)}function nr(w,O){if(w=="async"||w=="variable"&&(O=="static"||O=="get"||O=="set"||g&&Oe(O))&&W.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return W.marked="keyword",k(nr);if(w=="variable"||W.style=="keyword")return W.marked="property",k(it,nr);if(w=="number"||w=="string")return k(it,nr);if(w=="[")return k(de,Ht,me("]"),it,nr);if(O=="*")return W.marked="keyword",k(nr);if(g&&w=="(")return U(Bt,nr);if(w==";"||w==",")return k(nr);if(w=="}")return k();if(O=="@")return k(de,nr)}function it(w,O){if(O=="!"||O=="?")return k(it);if(w==":")return k(Pe,lr);if(O=="=")return k(ze);var ee=W.state.lexical.prev,ne=ee&&ee.info=="interface";return U(ne?Bt:Gt)}function oe(w,O){return O=="*"?(W.marked="keyword",k(Y,me(";"))):O=="default"?(W.marked="keyword",k(de,me(";"))):w=="{"?k(nt(Ee,"}"),Y,me(";")):U(xe)}function Ee(w,O){if(O=="as")return W.marked="keyword",k(me("variable"));if(w=="variable")return U(ze,Ee)}function Ne(w){return w=="string"?k():w=="("?U(de):w=="."?U(Ye):U(ce,J,Y)}function ce(w,O){return w=="{"?Te(ce,"}"):(w=="variable"&&te(O),O=="*"&&(W.marked="keyword"),k(Ke))}function J(w){if(w==",")return k(ce,J)}function Ke(w,O){if(O=="as")return W.marked="keyword",k(ce)}function Y(w,O){if(O=="from")return W.marked="keyword",k(de)}function We(w){return w=="]"?k():U(nt(ze,"]"))}function Dt(){return U(ue("form"),Et,me("{"),ue("}"),nt(Je,"}"),ge,ge)}function Je(){return U(Et,lr)}function Or(w,O){return w.lastType=="operator"||w.lastType==","||C.test(O.charAt(0))||/[,.]/.test(O.charAt(0))}function ie(w,O,ee){return O.tokenize==A&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(O.lastType)||O.lastType=="quasi"&&/\{\s*$/.test(w.string.slice(0,w.pos-(ee||0)))}return{startState:function(w){var O={tokenize:A,lastType:"sof",cc:[],lexical:new q((w||0)-a,0,"block",!1),localVars:i.localVars,context:i.localVars&&new Be(null,null,!1),indented:w||0};return i.globalVars&&typeof i.globalVars=="object"&&(O.globalVars=i.globalVars),O},token:function(w,O){if(w.sol()&&(O.lexical.hasOwnProperty("align")||(O.lexical.align=!1),O.indented=w.indentation(),_(w,O)),O.tokenize!=D&&w.eatSpace())return null;var ee=O.tokenize(w,O);return T=="comment"?ee:(O.lastType=T=="operator"&&(M=="++"||M=="--")?"incdec":T,K(O,ee,T,M,w))},indent:function(w,O){if(w.tokenize==D||w.tokenize==P)return n.Pass;if(w.tokenize!=A)return 0;var ee=O&&O.charAt(0),ne=w.lexical,je;if(!/^\s*else\b/.test(O))for(var se=w.cc.length-1;se>=0;--se){var ae=w.cc[se];if(ae==ge)ne=ne.prev;else if(ae!=Ur&&ae!=be)break}for(;(ne.type=="stat"||ne.type=="form")&&(ee=="}"||(je=w.cc[w.cc.length-1])&&(je==Ye||je==ft)&&!/^[,\.=+\-*:?[\(]/.test(O));)ne=ne.prev;u&&ne.type==")"&&ne.prev.type=="stat"&&(ne=ne.prev);var Re=ne.type,Ce=ee==Re;return Re=="vardef"?ne.indented+(w.lastType=="operator"||w.lastType==","?ne.info.length+1:0):Re=="form"&&ee=="{"?ne.indented:Re=="form"?ne.indented+a:Re=="stat"?ne.indented+(Or(w,O)?u||a:0):ne.info=="switch"&&!Ce&&i.doubleIndentSwitch!=!1?ne.indented+(/^(?:case|default)\b/.test(O)?a:2*a):ne.align?ne.column+(Ce?0:1):ne.indented+(Ce?0:a)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:d?null:"/*",blockCommentEnd:d?null:"*/",blockCommentContinue:d?null:" * ",lineComment:d?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:d?"json":"javascript",jsonldMode:c,jsonMode:d,expressionAllowed:ie,skipExpression:function(w){K(w,"atom","atom","true",new n.StringStream("",2,null))}}}),n.registerHelper("wordChars","javascript",/[\w$]/),n.defineMIME("text/javascript","javascript"),n.defineMIME("text/ecmascript","javascript"),n.defineMIME("application/javascript","javascript"),n.defineMIME("application/x-javascript","javascript"),n.defineMIME("application/ecmascript","javascript"),n.defineMIME("application/json",{name:"javascript",json:!0}),n.defineMIME("application/x-json",{name:"javascript",json:!0}),n.defineMIME("application/manifest+json",{name:"javascript",json:!0}),n.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),n.defineMIME("text/typescript",{name:"javascript",typescript:!0}),n.defineMIME("application/typescript",{name:"javascript",typescript:!0})})});var ss=ke((R2,Yd)=>{function nb(n,t){switch(n.charCodeAt(t)){default:return 0;case 10:return 1;case 13:return t+1<n.length&&n.charCodeAt(t+1)===10?2:1}}Yd.exports={newLineLength:nb}});var Qd=ke((_2,Kd)=>{var{newLineLength:ib}=ss();Kd.exports=(n,t)=>{let i=1,a=0;for(let u=0;u<n.length;u++){let c=ib(n,u);c!==0&&(t(a,u+c,i++),a=u+c,u+=c-1)}t(a,n.length,i++)}});var Jd=ke((H2,Zd)=>{var{newLineLength:ob}=ss();Zd.exports=(n,t)=>{let i=1,a=0;for(let u=0;u<n.length;u++){let c=ob(n,u);c!==0&&(t(a,u,i++),a=u+c,u+=c-1)}t(a,n.length,i++)}});var eh=ke((F2,Xd)=>{Xd.exports=function(n){if(n instanceof RegExp){let t=n.flags.indexOf("g")!==-1?n.flags:n.flags+"g",i=new RegExp(n,t);return function(a,u){let c;for(;c=i.exec(a);)u(c.index,c.index+c[0].length)}}return n=String(n),function(t,i){let a=-1;for(;a=t.indexOf(n,a+1),a!==-1;)i(a,a+n.length)}}});var rh=ke((B2,th)=>{var{newLineLength:sb}=ss();th.exports=(n,t)=>{let i=1;for(let a=0;a<n.length;a++){let u=sb(n,a);u!==0&&(t(a,a+u,i++),a+=u-1)}}});var ih=ke((W2,nh)=>{nh.exports={lines:Qd(),lineContents:Jd(),matches:eh(),newlines:rh()}});var as=ke((q2,ah)=>{function oh(n){return il.call(null,n)}function il(n){let t=this===window?{}:this||{},i={};return Object.assign(i,t,n,{fork:il.bind(i),ranges:Object.assign({},t.ranges,n&&n.ranges)}),typeof i.createHook!="function"&&(i.createHook=a=>a()),i}function sh(n){let t=Object.assign({},this);for(let i in n){let a=n[i];if(!(!a||typeof a!="object"))if(hasOwnProperty.call(t,i)){let u=t[i];t[i]=u&&typeof u.fork=="function"?u.fork(n[i]):u}else t[i]=oh(n[i])}return t.fork=sh.bind(t),t}ah.exports={createPrinter:oh,forkPrinter:il,forkPrinterSet:sh}});var ol=ke(($2,lh)=>{lh.exports=as().createPrinter()});var ch=ke((U2,uh)=>{var{createPrinter:ab}=as();uh.exports=ab({print:n=>n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")})});var dh=ke((V2,fh)=>{var{forkPrinterSet:lb}=as();fh.exports=lb.call({},{noop:ol(),html:ch(),tty:ol()})});var ph=ke((G2,hh)=>{hh.exports=function(t,i){let a=[];return i.forEach(({generate:u,marker:c})=>u(t,(d,h,g)=>a.push({type:c,start:d,end:h,data:g}))),a}});var mh=ke((Y2,gh)=>{var ls=()=>"",ub=function(){};function _n(n,t){return typeof n=="function"?n:t||ub}gh.exports=function(t,i,a){let u=_n(a.print,D=>D),c=Object.assign(Object.defineProperties(Object.create(null),{offset:{get:()=>C},line:{get:()=>S},column:{get:()=>L},start:{get:()=>h.start},end:{get:()=>h.end},data:{get:()=>h.data}}),_n(a.createContext)()),d=[],h={start:0,end:t.length},g=a.ranges||{},b=[],x=Infinity,C=0,S=1,L=1,T="";T+=_n(a.open,ls)(c),g=[].concat(Object.getOwnPropertyNames(g),Object.getOwnPropertySymbols(g)).reduce((D,P)=>{let R=g[P];return typeof R=="function"&&(g[P]=R=a.createHook(R)),R&&(b.push(P),D[P]={open:_n(R.open,ls),close:_n(R.close,ls),print:_n(R.print,u)}),D},{}),i=i.slice().sort((D,P)=>D.start-P.start||P.end-D.end||b.indexOf(D.type)-b.indexOf(P.type));let M=D=>g[(h=d[D]).type].open(c)||"",N=D=>g[(h=d[D]).type].close(c)||"",A=D=>{if(C!==D){let P=t.substring(C,D),R=d.length?g[d[d.length-1].type].print:u;for(let _=C;_<D;_++){let $=t.charCodeAt(_);$===10||$===13&&(_>=t.length||t.charCodeAt(_+1)!==10)?(S++,L=1):L++}T+=R(P,c),C=D}},j=D=>{for(;x<=D;){A(x);for(let P=d.length-1;P>=0&&d[P].end===x;P--)T+=N(P),d.pop();x=Infinity;for(let P=0;P<d.length;P++)d[P].end<x&&(x=d[P].end)}};for(let D=0;D<i.length;D++){let P=i[D],R=0;if(g.hasOwnProperty(P.type)!==!1&&!(P.start>P.end||!Number.isFinite(P.start)||!Number.isFinite(P.end))){for(j(P.start),A(P.start),R=0;R<d.length;R++)if(d[R].end<P.end){for(let _=d.length-1;_>=R;_--)T+=N(_);break}for(d.splice(R,0,P);R<d.length;R++)T+=M(R);P.end<x&&(x=P.end)}}j(t.length),A(t.length);for(let D=d.length-1;D>=0;D--)T+=N(D);return T+=_n(a.close,ls)(c)||"",T}});var bh=ke((K2,yh)=>{var cb=ih(),sl=dh(),vh=ph(),fb=mh();function db(n,t){return{marker:n,generate:t}}function hb(n,t){let i={};for(let a in t)i[a]={ranges:{[n]:t[a]}};return i}function al(n,t,i){let a=(u,c)=>{let d=t[c||i]||sl.noop,h=vh(u,n);return fb(u,h,d)};return Object.assign(a,{print:a,generateRanges(u){return vh(u,n)},use(u,c){let d=Symbol(u.name),h=u.ranges||u,g=Array.isArray(h)?(b,x)=>h.forEach(C=>x(...C)):h;return typeof g!="function"||(c||(c=u.printer),!c)?a:al(n.concat(db(d,g)),t.fork(hb(d,c)),i)},printer(u){return al(n,t,u)}})}function ll(n,t,i){let a=al([],i||sl,t);return Array.isArray(n)&&(a=n.reduce((u,c)=>Array.isArray(c)?u.use(...c):u.use(c),a)),a}yh.exports=Object.assign(ll,{gen:cb,printer:Object.assign((...n)=>ll().printer(...n),sl),use(...n){return ll().use(...n)}})});var kh=ke((wh,xh)=>{(function(n){typeof wh=="object"&&typeof xh=="object"?n(Jr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";n.defineMode("css",function(q,H){var K=H.inline;H.propertyKeywords||(H=n.resolveMode("text/css"));var W=q.indentUnit,U=H.tokenHooks,k=H.documentTypes||{},Q=H.mediaTypes||{},te=H.mediaFeatures||{},fe=H.mediaValueKeywords||{},Oe=H.propertyKeywords||{},Be=H.nonStandardPropertyKeywords||{},$e=H.fontProperties||{},Qe=H.counterDescriptors||{},Me=H.colorKeywords||{},Se=H.valueKeywords||{},be=H.allowNested,ue=H.lineComment,ge=H.supportsAtComponent===!0,me=q.highlightNonStandardPropertyKeywords!==!1,xe,ye;function de(B,V){return xe=V,B}function ze(B,V){var Z=B.next();if(U[Z]){var Ve=U[Z](B,V);if(Ve!==!1)return Ve}if(Z=="@")return B.eatWhile(/[\w\\\-]/),de("def",B.current());if(Z=="="||(Z=="~"||Z=="|")&&B.eat("="))return de(null,"compare");if(Z=='"'||Z=="'")return V.tokenize=Ge(Z),V.tokenize(B,V);if(Z=="#")return B.eatWhile(/[\w\\\-]/),de("atom","hash");if(Z=="!")return B.match(/^\s*\w*/),de("keyword","important");if(/\d/.test(Z)||Z=="."&&B.eat(/\d/))return B.eatWhile(/[\w.%]/),de("number","unit");if(Z==="-"){if(/[\d.]/.test(B.peek()))return B.eatWhile(/[\w.%]/),de("number","unit");if(B.match(/^-[\w\\\-]*/))return B.eatWhile(/[\w\\\-]/),B.match(/^\s*:/,!1)?de("variable-2","variable-definition"):de("variable-2","variable");if(B.match(/^\w+-/))return de("meta","meta")}else return/[,+>*\/]/.test(Z)?de(null,"select-op"):Z=="."&&B.match(/^-?[_a-z][_a-z0-9-]*/i)?de("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(Z)?de(null,Z):B.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(B.current())&&(V.tokenize=Ut),de("variable callee","variable")):/[\w\\\-]/.test(Z)?(B.eatWhile(/[\w\\\-]/),de("property","word")):de(null,null)}function Ge(B){return function(V,Z){for(var Ve=!1,kt;(kt=V.next())!=null;){if(kt==B&&!Ve){B==")"&&V.backUp(1);break}Ve=!Ve&&kt=="\\"}return(kt==B||!Ve&&B!=")")&&(Z.tokenize=null),de("string","string")}}function Ut(B,V){return B.next(),B.match(/^\s*[\"\')]/,!1)?V.tokenize=null:V.tokenize=Ge(")"),de(null,"(")}function He(B,V,Z){this.type=B,this.indent=V,this.prev=Z}function Ye(B,V,Z,Ve){return B.context=new He(Z,V.indentation()+(Ve===!1?0:W),B.context),Z}function ft(B){return B.context.prev&&(B.context=B.context.prev),B.context.type}function At(B,V,Z){return Xe[Z.context.type](B,V,Z)}function Rt(B,V,Z,Ve){for(var kt=Ve||1;kt>0;kt--)Z.context=Z.context.prev;return At(B,V,Z)}function br(B){var V=B.current().toLowerCase();Se.hasOwnProperty(V)?ye="atom":Me.hasOwnProperty(V)?ye="keyword":ye="variable"}var Xe={};return Xe.top=function(B,V,Z){if(B=="{")return Ye(Z,V,"block");if(B=="}"&&Z.context.prev)return ft(Z);if(ge&&/@component/i.test(B))return Ye(Z,V,"atComponentBlock");if(/^@(-moz-)?document$/i.test(B))return Ye(Z,V,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(B))return Ye(Z,V,"atBlock");if(/^@(font-face|counter-style)/i.test(B))return Z.stateArg=B,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(B))return"keyframes";if(B&&B.charAt(0)=="@")return Ye(Z,V,"at");if(B=="hash")ye="builtin";else if(B=="word")ye="tag";else{if(B=="variable-definition")return"maybeprop";if(B=="interpolation")return Ye(Z,V,"interpolation");if(B==":")return"pseudo";if(be&&B=="(")return Ye(Z,V,"parens")}return Z.context.type},Xe.block=function(B,V,Z){if(B=="word"){var Ve=V.current().toLowerCase();return Oe.hasOwnProperty(Ve)?(ye="property","maybeprop"):Be.hasOwnProperty(Ve)?(ye=me?"string-2":"property","maybeprop"):be?(ye=V.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(ye+=" error","maybeprop")}else return B=="meta"?"block":!be&&(B=="hash"||B=="qualifier")?(ye="error","block"):Xe.top(B,V,Z)},Xe.maybeprop=function(B,V,Z){return B==":"?Ye(Z,V,"prop"):At(B,V,Z)},Xe.prop=function(B,V,Z){if(B==";")return ft(Z);if(B=="{"&&be)return Ye(Z,V,"propBlock");if(B=="}"||B=="{")return Rt(B,V,Z);if(B=="(")return Ye(Z,V,"parens");if(B=="hash"&&!/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(V.current()))ye+=" error";else if(B=="word")br(V);else if(B=="interpolation")return Ye(Z,V,"interpolation");return"prop"},Xe.propBlock=function(B,V,Z){return B=="}"?ft(Z):B=="word"?(ye="property","maybeprop"):Z.context.type},Xe.parens=function(B,V,Z){return B=="{"||B=="}"?Rt(B,V,Z):B==")"?ft(Z):B=="("?Ye(Z,V,"parens"):B=="interpolation"?Ye(Z,V,"interpolation"):(B=="word"&&br(V),"parens")},Xe.pseudo=function(B,V,Z){return B=="meta"?"pseudo":B=="word"?(ye="variable-3",Z.context.type):At(B,V,Z)},Xe.documentTypes=function(B,V,Z){return B=="word"&&k.hasOwnProperty(V.current())?(ye="tag",Z.context.type):Xe.atBlock(B,V,Z)},Xe.atBlock=function(B,V,Z){if(B=="(")return Ye(Z,V,"atBlock_parens");if(B=="}"||B==";")return Rt(B,V,Z);if(B=="{")return ft(Z)&&Ye(Z,V,be?"block":"top");if(B=="interpolation")return Ye(Z,V,"interpolation");if(B=="word"){var Ve=V.current().toLowerCase();Ve=="only"||Ve=="not"||Ve=="and"||Ve=="or"?ye="keyword":Q.hasOwnProperty(Ve)?ye="attribute":te.hasOwnProperty(Ve)?ye="property":fe.hasOwnProperty(Ve)?ye="keyword":Oe.hasOwnProperty(Ve)?ye="property":Be.hasOwnProperty(Ve)?ye=me?"string-2":"property":Se.hasOwnProperty(Ve)?ye="atom":Me.hasOwnProperty(Ve)?ye="keyword":ye="error"}return Z.context.type},Xe.atComponentBlock=function(B,V,Z){return B=="}"?Rt(B,V,Z):B=="{"?ft(Z)&&Ye(Z,V,be?"block":"top",!1):(B=="word"&&(ye="error"),Z.context.type)},Xe.atBlock_parens=function(B,V,Z){return B==")"?ft(Z):B=="{"||B=="}"?Rt(B,V,Z,2):Xe.atBlock(B,V,Z)},Xe.restricted_atBlock_before=function(B,V,Z){return B=="{"?Ye(Z,V,"restricted_atBlock"):B=="word"&&Z.stateArg=="@counter-style"?(ye="variable","restricted_atBlock_before"):At(B,V,Z)},Xe.restricted_atBlock=function(B,V,Z){return B=="}"?(Z.stateArg=null,ft(Z)):B=="word"?(Z.stateArg=="@font-face"&&!$e.hasOwnProperty(V.current().toLowerCase())||Z.stateArg=="@counter-style"&&!Qe.hasOwnProperty(V.current().toLowerCase())?ye="error":ye="property","maybeprop"):"restricted_atBlock"},Xe.keyframes=function(B,V,Z){return B=="word"?(ye="variable","keyframes"):B=="{"?Ye(Z,V,"top"):At(B,V,Z)},Xe.at=function(B,V,Z){return B==";"?ft(Z):B=="{"||B=="}"?Rt(B,V,Z):(B=="word"?ye="tag":B=="hash"&&(ye="builtin"),"at")},Xe.interpolation=function(B,V,Z){return B=="}"?ft(Z):B=="{"||B==";"?Rt(B,V,Z):(B=="word"?ye="variable":B!="variable"&&B!="("&&B!=")"&&(ye="error"),"interpolation")},{startState:function(B){return{tokenize:null,state:K?"block":"top",stateArg:null,context:new He(K?"block":"top",B||0,null)}},token:function(B,V){if(!V.tokenize&&B.eatSpace())return null;var Z=(V.tokenize||ze)(B,V);return Z&&typeof Z=="object"&&(xe=Z[1],Z=Z[0]),ye=Z,xe!="comment"&&(V.state=Xe[V.state](xe,B,V)),ye},indent:function(B,V){var Z=B.context,Ve=V&&V.charAt(0),kt=Z.indent;return Z.type=="prop"&&(Ve=="}"||Ve==")")&&(Z=Z.prev),Z.prev&&(Ve=="}"&&(Z.type=="block"||Z.type=="top"||Z.type=="interpolation"||Z.type=="restricted_atBlock")?(Z=Z.prev,kt=Z.indent):(Ve==")"&&(Z.type=="parens"||Z.type=="atBlock_parens")||Ve=="{"&&(Z.type=="at"||Z.type=="atBlock"))&&(kt=Math.max(0,Z.indent-W))),kt},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:ue,fold:"brace"}});function t(q){for(var H={},K=0;K<q.length;++K)H[q[K].toLowerCase()]=!0;return H}var i=["domain","regexp","url","url-prefix"],a=t(i),u=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],c=t(u),d=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme","dynamic-range","video-dynamic-range"],h=t(d),g=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light","standard","high"],b=t(g),x=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],C=t(x),S=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],L=t(S),T=["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],M=t(T),N=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],A=t(N),j=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],D=t(j),P=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","conic-gradient","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeating-conic-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],R=t(P),_=i.concat(u).concat(d).concat(g).concat(x).concat(S).concat(j).concat(P);n.registerHelper("hintWords","css",_);function $(q,H){for(var K=!1,W;(W=q.next())!=null;){if(K&&W=="/"){H.tokenize=null;break}K=W=="*"}return["comment","comment"]}n.defineMIME("text/css",{documentTypes:a,mediaTypes:c,mediaFeatures:h,mediaValueKeywords:b,propertyKeywords:C,nonStandardPropertyKeywords:L,fontProperties:M,counterDescriptors:A,colorKeywords:D,valueKeywords:R,tokenHooks:{"/":function(q,H){return q.eat("*")?(H.tokenize=$,$(q,H)):!1}},name:"css"}),n.defineMIME("text/x-scss",{mediaTypes:c,mediaFeatures:h,mediaValueKeywords:b,propertyKeywords:C,nonStandardPropertyKeywords:L,colorKeywords:D,valueKeywords:R,fontProperties:M,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(q,H){return q.eat("/")?(q.skipToEnd(),["comment","comment"]):q.eat("*")?(H.tokenize=$,$(q,H)):["operator","operator"]},":":function(q){return q.match(/^\s*\{/,!1)?[null,null]:!1},$:function(q){return q.match(/^[\w-]+/),q.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(q){return q.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),n.defineMIME("text/x-less",{mediaTypes:c,mediaFeatures:h,mediaValueKeywords:b,propertyKeywords:C,nonStandardPropertyKeywords:L,colorKeywords:D,valueKeywords:R,fontProperties:M,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(q,H){return q.eat("/")?(q.skipToEnd(),["comment","comment"]):q.eat("*")?(H.tokenize=$,$(q,H)):["operator","operator"]},"@":function(q){return q.eat("{")?[null,"interpolation"]:q.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)?!1:(q.eatWhile(/[\w\\\-]/),q.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),n.defineMIME("text/x-gss",{documentTypes:a,mediaTypes:c,mediaFeatures:h,propertyKeywords:C,nonStandardPropertyKeywords:L,fontProperties:M,counterDescriptors:A,colorKeywords:D,valueKeywords:R,supportsAtComponent:!0,tokenHooks:{"/":function(q,H){return q.eat("*")?(H.tokenize=$,$(q,H)):!1}},name:"css",helperType:"gss"})})});var Lh=ke((Ch,Sh)=>{(function(n){typeof Ch=="object"&&typeof Sh=="object"?n(Jr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";var t={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},i={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};n.defineMode("xml",function(a,u){var c=a.indentUnit,d={},h=u.htmlMode?t:i;for(var g in h)d[g]=h[g];for(var g in u)d[g]=u[g];var b,x;function C(k,Q){function te(Be){return Q.tokenize=Be,Be(k,Q)}var fe=k.next();if(fe=="<")return k.eat("!")?k.eat("[")?k.match("CDATA[")?te(T("atom","]]>")):null:k.match("--")?te(T("comment","-->")):k.match("DOCTYPE",!0,!0)?(k.eatWhile(/[\w\._\-]/),te(M(1))):null:k.eat("?")?(k.eatWhile(/[\w\._\-]/),Q.tokenize=T("meta","?>"),"meta"):(b=k.eat("/")?"closeTag":"openTag",Q.tokenize=S,"tag bracket");if(fe=="&"){var Oe;return k.eat("#")?k.eat("x")?Oe=k.eatWhile(/[a-fA-F\d]/)&&k.eat(";"):Oe=k.eatWhile(/[\d]/)&&k.eat(";"):Oe=k.eatWhile(/[\w\.\-:]/)&&k.eat(";"),Oe?"atom":"error"}else return k.eatWhile(/[^&<]/),null}C.isInText=!0;function S(k,Q){var te=k.next();if(te==">"||te=="/"&&k.eat(">"))return Q.tokenize=C,b=te==">"?"endTag":"selfcloseTag","tag bracket";if(te=="=")return b="equals",null;if(te=="<"){Q.tokenize=C,Q.state=P,Q.tagName=Q.tagStart=null;var fe=Q.tokenize(k,Q);return fe?fe+" tag error":"tag error"}else return/[\'\"]/.test(te)?(Q.tokenize=L(te),Q.stringStartCol=k.column(),Q.tokenize(k,Q)):(k.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function L(k){var Q=function(te,fe){for(;!te.eol();)if(te.next()==k){fe.tokenize=S;break}return"string"};return Q.isInAttribute=!0,Q}function T(k,Q){return function(te,fe){for(;!te.eol();){if(te.match(Q)){fe.tokenize=C;break}te.next()}return k}}function M(k){return function(Q,te){for(var fe;(fe=Q.next())!=null;){if(fe=="<")return te.tokenize=M(k+1),te.tokenize(Q,te);if(fe==">")if(k==1){te.tokenize=C;break}else return te.tokenize=M(k-1),te.tokenize(Q,te)}return"meta"}}function N(k){return k&&k.toLowerCase()}function A(k,Q,te){this.prev=k.context,this.tagName=Q||"",this.indent=k.indented,this.startOfLine=te,(d.doNotIndent.hasOwnProperty(Q)||k.context&&k.context.noIndent)&&(this.noIndent=!0)}function j(k){k.context&&(k.context=k.context.prev)}function D(k,Q){for(var te;;){if(!k.context||(te=k.context.tagName,!d.contextGrabbers.hasOwnProperty(N(te))||!d.contextGrabbers[N(te)].hasOwnProperty(N(Q))))return;j(k)}}function P(k,Q,te){return k=="openTag"?(te.tagStart=Q.column(),R):k=="closeTag"?_:P}function R(k,Q,te){return k=="word"?(te.tagName=Q.current(),x="tag",H):d.allowMissingTagName&&k=="endTag"?(x="tag bracket",H(k,Q,te)):(x="error",R)}function _(k,Q,te){if(k=="word"){var fe=Q.current();return te.context&&te.context.tagName!=fe&&d.implicitlyClosed.hasOwnProperty(N(te.context.tagName))&&j(te),te.context&&te.context.tagName==fe||d.matchClosing===!1?(x="tag",$):(x="tag error",q)}else return d.allowMissingTagName&&k=="endTag"?(x="tag bracket",$(k,Q,te)):(x="error",q)}function $(k,Q,te){return k!="endTag"?(x="error",$):(j(te),P)}function q(k,Q,te){return x="error",$(k,Q,te)}function H(k,Q,te){if(k=="word")return x="attribute",K;if(k=="endTag"||k=="selfcloseTag"){var fe=te.tagName,Oe=te.tagStart;return te.tagName=te.tagStart=null,k=="selfcloseTag"||d.autoSelfClosers.hasOwnProperty(N(fe))?D(te,fe):(D(te,fe),te.context=new A(te,fe,Oe==te.indented)),P}return x="error",H}function K(k,Q,te){return k=="equals"?W:(d.allowMissing||(x="error"),H(k,Q,te))}function W(k,Q,te){return k=="string"?U:k=="word"&&d.allowUnquoted?(x="string",H):(x="error",H(k,Q,te))}function U(k,Q,te){return k=="string"?U:H(k,Q,te)}return{startState:function(k){var Q={tokenize:C,state:P,indented:k||0,tagName:null,tagStart:null,context:null};return k!=null&&(Q.baseIndent=k),Q},token:function(k,Q){if(!Q.tagName&&k.sol()&&(Q.indented=k.indentation()),k.eatSpace())return null;b=null;var te=Q.tokenize(k,Q);return(te||b)&&te!="comment"&&(x=null,Q.state=Q.state(b||te,k,Q),x&&(te=x=="error"?te+" error":x)),te},indent:function(k,Q,te){var fe=k.context;if(k.tokenize.isInAttribute)return k.tagStart==k.indented?k.stringStartCol+1:k.indented+c;if(fe&&fe.noIndent)return n.Pass;if(k.tokenize!=S&&k.tokenize!=C)return te?te.match(/^(\s*)/)[0].length:0;if(k.tagName)return d.multilineTagIndentPastTag!==!1?k.tagStart+k.tagName.length+2:k.tagStart+c*(d.multilineTagIndentFactor||1);if(d.alignCDATA&&/<!\[CDATA\[/.test(Q))return 0;var Oe=Q&&/^<(\/)?([\w_:\.-]*)/.exec(Q);if(Oe&&Oe[1])for(;fe;)if(fe.tagName==Oe[2]){fe=fe.prev;break}else if(d.implicitlyClosed.hasOwnProperty(N(fe.tagName)))fe=fe.prev;else break;else if(Oe)for(;fe;){var Be=d.contextGrabbers[N(fe.tagName)];if(Be&&Be.hasOwnProperty(N(Oe[2])))fe=fe.prev;else break}for(;fe&&fe.prev&&!fe.startOfLine;)fe=fe.prev;return fe?fe.indent+c:k.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:d.htmlMode?"html":"xml",helperType:d.htmlMode?"html":"xml",skipAttribute:function(k){k.state==W&&(k.state=H)},xmlCurrentTag:function(k){return k.tagName?{name:k.tagName,close:k.type=="closeTag"}:null},xmlCurrentContext:function(k){for(var Q=[],te=k.context;te;te=te.prev)Q.push(te.tagName);return Q.reverse()}}}),n.defineMIME("text/xml","xml"),n.defineMIME("application/xml","xml"),n.mimeModes.hasOwnProperty("text/html")||n.defineMIME("text/html",{name:"xml",htmlMode:!0})})});var jh=ke((n3,yb)=>{yb.exports={name:"@discoveryjs/json-ext",version:"0.5.6",description:"A set of utilities that extend the use of JSON",keywords:["json","utils","stream","async","promise","stringify","info"],author:"Roman Dvornov <rdvornov@gmail.com> (https://github.com/lahmatiy)",license:"MIT",repository:"discoveryjs/json-ext",main:"./src/index",browser:{"./src/stringify-stream.js":"./src/stringify-stream-browser.js","./src/text-decoder.js":"./src/text-decoder-browser.js"},types:"./index.d.ts",scripts:{test:"mocha --reporter progress",lint:"eslint src test","lint-and-test":"npm run lint && npm test",build:"rollup --config","test:all":"npm run test:src && npm run test:dist","test:src":"npm test","test:dist":"cross-env MODE=dist npm test && cross-env MODE=dist-min npm test","build-and-test":"npm run build && npm run test:dist",coverage:"nyc npm test",travis:"nyc npm run lint-and-test && npm run build-and-test && npm run coveralls",coveralls:"nyc report --reporter=text-lcov | coveralls",prepublishOnly:"npm run build"},dependencies:{},devDependencies:{"@rollup/plugin-commonjs":"^15.1.0","@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^9.0.0",chalk:"^4.1.0",coveralls:"^3.1.0","cross-env":"^7.0.3",eslint:"^7.6.0",mocha:"^8.1.1",nyc:"^15.1.0",rollup:"^2.28.2","rollup-plugin-terser":"^7.0.2"},engines:{node:">=10.0.0"},files:["dist","src","index.d.ts"],_resolved:"https://registry.npmjs.org/@discoveryjs/json-ext/-/json-ext-0.5.6.tgz",_integrity:"sha512-ws57AidsDvREKrZKYffXddNkyaF14iHNHm8VQnZH6t99E8gczjNN0GpvcGny0imC80yQ0tHz1xVUKk/KFQSUyA==",_from:"@discoveryjs/json-ext@0.5.6"}});var gl=ke((i3,Ph)=>{var dl=1,hl=2,pl=3,Ah=4,Oh=5,Dh=6,bb={8:"\\b",9:"\\t",10:"\\n",12:"\\f",13:"\\r",34:'\\"',92:"\\\\"};function wb(n){return n>=55296&&n<=56319}function xb(n){return n>=56320&&n<=57343}function Ih(n){return typeof n.pipe=="function"&&typeof n._read=="function"&&typeof n._readableState=="object"&&n._readableState!==null}function kb(n,t,i,a){switch(i&&typeof i.toJSON=="function"&&(i=i.toJSON()),a!==null&&(i=a.call(n,String(t),i)),typeof i){case"function":case"symbol":i=void 0;break;case"object":if(i!==null){let u=i.constructor;(u===String||u===Number||u===Boolean)&&(i=i.valueOf())}break}return i}function Cb(n){return n===null||typeof n!="object"?dl:Array.isArray(n)?pl:hl}function Sb(n){return n===null||typeof n!="object"?dl:typeof n.then=="function"?Ah:Ih(n)?n._readableState.objectMode?Dh:Oh:Array.isArray(n)?pl:hl}function Lb(n){return typeof n=="function"?n:Array.isArray(n)?[...new Set(n.map(i=>{let a=i&&i.constructor;return a===String||a===Number?String(i):null}).filter(i=>typeof i=="string"))]:null}function Tb(n){return typeof n=="number"?!Number.isFinite(n)||n<1?!1:" ".repeat(Math.min(n,10)):typeof n=="string"&&n.slice(0,10)||!1}Ph.exports={escapableCharCodeSubstitution:bb,isLeadingSurrogate:wb,isTrailingSurrogate:xb,type:{PRIMITIVE:dl,PROMISE:Ah,ARRAY:pl,OBJECT:hl,STRING_STREAM:Oh,OBJECT_STREAM:Dh},isReadableStream:Ih,replaceValue:kb,getTypeNative:Cb,getTypeAsync:Sb,normalizeReplacer:Lb,normalizeSpace:Tb}});var Hh=ke((o3,_h)=>{var{normalizeReplacer:Mb,normalizeSpace:Eb,replaceValue:Nb,getTypeNative:jb,getTypeAsync:Ab,isLeadingSurrogate:Ob,isTrailingSurrogate:Db,escapableCharCodeSubstitution:Ib,type:{PRIMITIVE:zh,OBJECT:Pb,ARRAY:zb,PROMISE:Rb,STRING_STREAM:_b,OBJECT_STREAM:Hb}}=gl(),Fb=Array.from({length:2048}).map((n,t)=>Ib.hasOwnProperty(t)?2:t<32?6:t<128?1:2);function Rh(n){let t=0,i=!1;for(let a=0;a<n.length;a++){let u=n.charCodeAt(a);if(u<2048)t+=Fb[u];else if(Ob(u)){t+=6,i=!0;continue}else Db(u)?t=i?t-2:t+6:t+=3;i=!1}return t+2}function Bb(n){switch(typeof n){case"string":return Rh(n);case"number":return Number.isFinite(n)?String(n).length:4;case"boolean":return n?4:5;case"undefined":case"object":return 4;default:return 0}}function Wb(n){return n=Eb(n),typeof n=="string"?n.length:0}_h.exports=function(t,i,a,u){function c(N,A,j){if(T)return;j=Nb(N,A,j,i);let D=S(j);if(D!==zh&&g.has(j)){x.add(j),M+=4,u.continueOnCircular||(T=!0);return}switch(D){case zh:j!==void 0||Array.isArray(N)?M+=Bb(j):N===L&&(M+=9);break;case Pb:{if(h.has(j)){b.add(j),M+=h.get(j);break}let P=M,R=0;M+=2,g.add(j);for(let _ in j)if(hasOwnProperty.call(j,_)&&(d===null||d.has(_))){let $=M;c(j,_,j[_]),$!==M&&(M+=Rh(_)+1,R++)}R>1&&(M+=R-1),g.delete(j),a>0&&R>0&&(M+=(1+(g.size+1)*a+1)*R,M+=1+g.size*a),h.set(j,M-P);break}case zb:{if(h.has(j)){b.add(j),M+=h.get(j);break}let P=M;M+=2,g.add(j);for(let R=0;R<j.length;R++)c(j,R,j[R]);j.length>1&&(M+=j.length-1),g.delete(j),a>0&&j.length>0&&(M+=(1+(g.size+1)*a)*j.length,M+=1+g.size*a),h.set(j,M-P);break}case Rb:case _b:C.add(j);break;case Hb:M+=2,C.add(j);break}}let d=null;i=Mb(i),Array.isArray(i)&&(d=new Set(i),i=null),a=Wb(a),u=u||{};let h=new Map,g=new Set,b=new Set,x=new Set,C=new Set,S=u.async?Ab:jb,L={"":t},T=!1,M=0;return c(L,"",t),{minLength:isNaN(M)?Infinity:M,circular:[...x],duplicate:[...b],async:[...C]}}});var Bh=ke((s3,Fh)=>{Fh.exports=()=>{throw new Error("Method is not supported")}});var qh=ke((a3,Wh)=>{Wh.exports=TextDecoder});var vl=ke((l3,Vh)=>{var{isReadableStream:qb}=gl(),$b=qh(),ro=1,Ub=2,Vb=new $b;function $h(n){return n!==null&&typeof n=="object"}function ml(n,t){return n.name==="SyntaxError"&&t.jsonParseOffset&&(n.message=n.message.replace(/at position (\d+)/,(i,a)=>"at position "+(Number(a)+t.jsonParseOffset))),n}function Gb(n,t){let i=n.length;n.length+=t.length;for(let a=0;a<t.length;a++)n[i+a]=t[a]}Vh.exports=function(n){let t=new Uh;if($h(n)&&qb(n))return new Promise((i,a)=>{n.on("data",u=>{try{t.push(u)}catch(c){a(ml(c,t)),t=null}}).on("error",u=>{t=null,a(u)}).on("end",()=>{try{i(t.finish())}catch(u){a(ml(u,t))}finally{t=null}})});if(typeof n=="function"){let i=n();if($h(i)&&(Symbol.iterator in i||Symbol.asyncIterator in i))return new Promise(async(a,u)=>{try{for await(let c of i)t.push(c);a(t.finish())}catch(c){u(ml(c,t))}finally{t=null}})}throw new Error("Chunk emitter should be readable stream, generator, async generator or function returning an iterable object")};var Uh=class{constructor(){this.value=void 0,this.valueStack=null,this.stack=new Array(100),this.lastFlushDepth=0,this.flushDepth=0,this.stateString=!1,this.stateStringEscape=!1,this.pendingByteSeq=null,this.pendingChunk=null,this.chunkOffset=0,this.jsonParseOffset=0}parseAndAppend(t,i){this.stack[this.lastFlushDepth-1]===ro?(i&&(this.jsonParseOffset--,t="{"+t+"}"),Object.assign(this.valueStack.value,JSON.parse(t))):(i&&(this.jsonParseOffset--,t="["+t+"]"),Gb(this.valueStack.value,JSON.parse(t)))}prepareAddition(t){let{value:i}=this.valueStack;if(Array.isArray(i)?i.length!==0:Object.keys(i).length!==0){if(t[0]===",")return this.jsonParseOffset++,t.slice(1);if(t[0]!=="}"&&t[0]!=="]")return this.jsonParseOffset-=3,"[[]"+t}return t}flush(t,i,a){let u=t.slice(i,a);if(this.jsonParseOffset=this.chunkOffset+i,this.pendingChunk!==null&&(u=this.pendingChunk+u,this.jsonParseOffset-=this.pendingChunk.length,this.pendingChunk=null),this.flushDepth===this.lastFlushDepth)this.flushDepth>0?this.parseAndAppend(this.prepareAddition(u),!0):(this.value=JSON.parse(u),this.valueStack={value:this.value,prev:null});else if(this.flushDepth>this.lastFlushDepth){for(let c=this.flushDepth-1;c>=this.lastFlushDepth;c--)u+=this.stack[c]===ro?"}":"]";this.lastFlushDepth===0?(this.value=JSON.parse(u),this.valueStack={value:this.value,prev:null}):this.parseAndAppend(this.prepareAddition(u),!0);for(let c=this.lastFlushDepth||1;c<this.flushDepth;c++){let d=this.valueStack.value;if(this.stack[c-1]===ro){let h;for(h in d);d=d[h]}else d=d[d.length-1];this.valueStack={value:d,prev:this.valueStack}}}else{u=this.prepareAddition(u);for(let c=this.lastFlushDepth-1;c>=this.flushDepth;c--)this.jsonParseOffset--,u=(this.stack[c]===ro?"{":"[")+u;this.parseAndAppend(u,!1);for(let c=this.lastFlushDepth-1;c>=this.flushDepth;c--)this.valueStack=this.valueStack.prev}this.lastFlushDepth=this.flushDepth}push(t){if(typeof t!="string"){if(this.pendingByteSeq!==null){let c=t;t=new Uint8Array(this.pendingByteSeq.length+c.length),t.set(this.pendingByteSeq),t.set(c,this.pendingByteSeq.length),this.pendingByteSeq=null}if(t[t.length-1]>127)for(let c=0;c<t.length;c++){let d=t[t.length-1-c];if(d>>6==3){c++,(c!==4&&d>>3==30||c!==3&&d>>4==14||c!==2&&d>>5==6)&&(this.pendingByteSeq=t.slice(t.length-c),t=t.slice(0,-c));break}}t=Vb.decode(t)}let i=t.length,a=0,u=0;e:for(let c=0;c<i;c++){if(this.stateString){for(;c<i;c++)if(this.stateStringEscape)this.stateStringEscape=!1;else switch(t.charCodeAt(c)){case 34:this.stateString=!1;continue e;case 92:this.stateStringEscape=!0}break}switch(t.charCodeAt(c)){case 34:this.stateString=!0,this.stateStringEscape=!1;break;case 44:u=c;break;case 123:u=c+1,this.stack[this.flushDepth++]=ro;break;case 91:u=c+1,this.stack[this.flushDepth++]=Ub;break;case 93:case 125:u=c+1,this.flushDepth--,this.flushDepth<this.lastFlushDepth&&(this.flush(t,a,u),a=u);break;case 9:case 10:case 13:case 32:a===c&&a++,u===c&&u++;break}}u>a&&this.flush(t,a,u),u<i&&(this.pendingChunk!==null?this.pendingChunk+=t:this.pendingChunk=t.slice(u,i)),this.chunkOffset+=i}finish(){return this.pendingChunk!==null&&(this.flush("",0,0),this.pendingChunk=null),this.value}}});var Yh=ke((u3,Gh)=>{Gh.exports={version:jh().version,stringifyInfo:Hh(),stringifyStream:Bh(),parseChunked:vl()}});var ig=ke((KC,jw)=>{jw.exports={name:"jora",version:"1.0.0-beta.5",description:"JavaScript object query engine",author:"Roman Dvornov <rdvornov@gmail.com> (https://github.com/lahmatiy)",repository:"discoveryjs/jora",license:"MIT",keywords:["query","data","path","language","javascript","json"],main:"src/index",unpkg:"dist/jora.min.js",jsdelivr:"dist/jora.min.js",scripts:{lint:"eslint src test","lint-and-test":"npm run lint && npm test",test:"mocha --reporter ${REPORTER:-progress}","test:all":"npm run test:src && npm run test:dist","test:src":"npm test","test:dist":"MODE=dist npm test && MODE=dist-min npm test",build:"rollup --config","build-and-test":"npm run build && npm run test:dist","parser:bake":`node -e "require('./src/lang/parse').bake()"`,"parser:rollback":"git checkout -- src/lang/parse.js",prepublishOnly:"npm run build && npm run parser:bake",postpublish:"npm run parser:rollback",coverage:"nyc npm test",travis:"nyc npm run lint-and-test && npm run build-and-test && npm run parser:bake && npm test && npm run coveralls",coveralls:"nyc report --reporter=text-lcov | coveralls"},dependencies:{},devDependencies:{"@rollup/plugin-commonjs":"^11.0.2","@rollup/plugin-json":"^4.0.2","@rollup/plugin-node-resolve":"^7.1.1",coveralls:"^3.0.11",eslint:"^6.5.1","@lahmatiy/jison":"^0.4.18-remastered.1",mocha:"^6.2.3",nyc:"^14.1.0",rollup:"^1.32.1","rollup-plugin-terser":"^5.3.0"},engines:{node:">=8.10.0"},files:["dist","src","!src/lang/parse-raw.js"],_resolved:"https://registry.npmjs.org/jora/-/jora-1.0.0-beta.5.tgz",_integrity:"sha512-hPJKQyF0eiCqQOwfgIuQa+8wIn+WcEcjjyeOchuiXEUnt6zbV0tHKsUqRRwJY47ZtBiGcJQNr/BGuYW1Sfwbvg==",_from:"jora@1.0.0-beta.5"}});var og=ke((co,gi)=>{gi.exports=function(){var n=function(it,oe,Ee={}){return it.forEach(Ne=>Ee[Ne]=oe),Ee},t=[2,5],i=[1,13],a=[1,41],u=[1,18],c=[1,7],d=[1,8],h=[1,10],g=[1,11],b=[1,12],x=[1,19],C=[1,20],S=[1,21],L=[1,22],T=[1,23],M=[1,24],N=[1,25],A=[1,29],j=[1,32],D=[1,33],P=[1,34],R=[1,35],_=[1,36],$=[1,37],q=[1,42],H=[1,43],K=[1,40],W=[5,18,56,59],U=[1,47],k=[1,55],Q=[1,54],te=[1,48],fe=[1,49],Oe=[1,50],Be=[1,51],$e=[1,52],Qe=[1,53],Me=[1,56],Se=[1,57],be=[1,58],ue=[1,59],ge=[1,60],me=[1,61],xe=[1,62],ye=[1,63],de=[1,64],ze=[1,65],Ge=[1,66],Ut=[5,9,14,15,17,18,19,22,23,24,44,45,46,47,48,49,50,54,56,58,59,60,61,62,63,64,72,73,76,77,80],He=[5,10,11,18,21,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,56,59,66,74,75,77],Ye=[1,67],ft=[1,68],At=[1,69],Rt=[1,70],br=[1,71],Xe=[1,72],B=[1,73],V=[1,76],Z=[5,18,21,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,54,56,59,60,61,62,63,64,66,74,75,77,84],Ve=[2,46],kt=[1,82],ar=[1,83],Bn=[2,48],_t=[1,84],nt=[1,86],Te=[5,10,11,18,21,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,54,56,59,60,61,62,63,64,66,74,75,77,84],Ot=[5,10,11,18,21,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,54,56,58,59,60,61,62,63,64,66,74,75,77,84],Ht=[1,93],De=[1,94],dr=[1,95],wt=[1,111],Pe=[1,110],ut=[1,116],wr=[1,119],dt=[1,120],Vt=[1,121],gt=[1,122],xr=[1,123],Ft=[9,14,15,17,19,22,23,24,44,45,46,47,48,49,50,54,58,60,61,62,63,64,72,73,74,75,76],hr=[5,10,11,18,21,56,59,66,74,75,77],kr=[5,10,11,18,21,29,30,41,56,59,66,74,75,77],$r=[5,10,11,18,21,23,24,25,26,27,28,29,30,34,35,36,37,38,39,40,41,56,59,66,74,75,77],pr=[56,66],Et=[2,115],kn=[11,56],mt=[66,77],lr=[2,102],Xr=[2,103],Ur=[5,10,11,18,21,25,26,27,28,29,30,41,56,59,66,74,75,77],en=[5,10,11,18,21,25,26,27,28,29,30,34,35,40,41,56,59,66,74,75,77],jr=[5,10,11,18,21,25,26,27,28,29,30,34,35,36,37,38,39,40,41,56,59,66,74,75,77],Cr=[1,199],Gt=[1,201],Bt=[59,66],Cn=[1,211],gr=[2,109];let Ar={trace:function(...it){this.DEBUG&&Jison.print(...it)},yy:{},symbols_:{error:2,root:3,block:4,EOF:5,definitions:6,e:7,def:8,$:9,";":10,":":11,$ident:12,ident:13,IDENT:14,$IDENT:15,query:16,FUNCTION_START:17,FUNCTION_END:18,FUNCTION:19,sortingCompareList:20,"|":21,NOT:22,"-":23,"+":24,IN:25,HAS:26,NOTIN:27,HASNO:28,AND:29,OR:30,"*":31,"/":32,"%":33,"=":34,"!=":35,"<":36,"<=":37,">":38,">=":39,"~=":40,"?":41,queryRoot:42,relativePath:43,"@":44,"#":45,$$:46,STRING:47,NUMBER:48,REGEXP:49,LITERAL:50,template:51,object:52,array:53,"[":54,sliceNotation:55,"]":56,"method()":57,"(":58,")":59,".":60,".(":61,".[":62,"..":63,"..(":64,arguments:65,",":66,templateString:67,templateStart:68,templateTail:69,templateEnd:70,templateContinue:71,TEMPLATE:72,TPL_START:73,TPL_CONTINUE:74,TPL_END:75,"{":76,"}":77,properties:78,property:79,"...":80,arrayElements:81,arrayElement:82,sortingCompare:83,ORDER:84,sliceNotationComponent:85,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",9:"$",10:";",11:":",14:"IDENT",15:"$IDENT",17:"FUNCTION_START",18:"FUNCTION_END",19:"FUNCTION",21:"|",22:"NOT",23:"-",24:"+",25:"IN",26:"HAS",27:"NOTIN",28:"HASNO",29:"AND",30:"OR",31:"*",32:"/",33:"%",34:"=",35:"!=",36:"<",37:"<=",38:">",39:">=",40:"~=",41:"?",44:"@",45:"#",46:"$$",47:"STRING",48:"NUMBER",49:"REGEXP",50:"LITERAL",54:"[",56:"]",58:"(",59:")",60:".",61:".(",62:".[",63:"..",64:"..(",66:",",72:"TEMPLATE",73:"TPL_START",74:"TPL_CONTINUE",75:"TPL_END",76:"{",77:"}",80:"...",84:"ORDER"},productions_:[0,[3,2],[4,2],[4,1],[4,1],[4,0],[6,1],[6,2],[8,2],[8,4],[8,2],[8,4],[13,1],[12,1],[7,1],[7,3],[7,2],[7,1],[7,3],[7,4],[7,2],[7,2],[7,2],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,5],[16,1],[16,1],[42,1],[42,1],[42,1],[42,1],[42,1],[42,1],[42,1],[42,1],[42,1],[42,1],[42,1],[42,1],[42,3],[42,1],[42,1],[42,3],[42,4],[42,2],[42,2],[42,3],[42,3],[42,2],[42,2],[42,3],[43,3],[43,4],[43,4],[43,3],[43,3],[43,4],[43,4],[43,3],[43,3],[43,4],[57,3],[57,4],[57,3],[57,4],[65,1],[65,3],[51,1],[51,2],[69,1],[69,2],[69,2],[69,3],[67,1],[68,1],[71,1],[70,1],[52,2],[52,3],[52,4],[52,3],[52,4],[52,5],[78,1],[78,3],[79,1],[79,1],[79,1],[79,3],[79,3],[79,3],[79,3],[79,3],[79,5],[79,1],[79,2],[81,1],[81,3],[82,1],[82,1],[82,2],[53,2],[53,3],[53,4],[20,1],[20,3],[83,2],[55,1],[55,2],[55,2],[55,3],[85,1],[85,2]],performAction:function(it,oe,Ee,Ne,ce,J,Ke){var Y=J.length-1;switch(ce){case 1:return Ne.buildResult(J[Y-1]);case 2:this.$={type:"Block",definitions:J[Y-1],body:J[Y],range:this._$.range};break;case 3:this.$={type:"Block",definitions:J[Y],body:null,range:this._$.range};break;case 4:this.$={type:"Block",definitions:[],body:J[Y],range:this._$.range};break;case 5:this.$={type:"Block",definitions:[],body:null,range:this._$.range};break;case 6:case 82:case 84:case 100:case 113:case 121:this.$=[J[Y]];break;case 7:J[Y-1].push(J[Y]);break;case 8:this.$={type:"Definition",declarator:{type:"Declarator",name:null,range:Ke[Y-1].range},value:null,range:this._$.range};break;case 9:this.$={type:"Definition",declarator:{type:"Declarator",name:null,range:Ke[Y-3].range},value:J[Y-1],range:this._$.range};break;case 10:this.$={type:"Definition",declarator:{type:"Declarator",name:J[Y-1].name,range:Ke[Y-1].range},value:null,range:this._$.range};break;case 11:this.$={type:"Definition",declarator:{type:"Declarator",name:J[Y-3].name,range:Ke[Y-3].range},value:J[Y-1],range:this._$.range};break;case 12:case 13:this.$={type:"Identifier",name:J[Y],range:this._$.range};break;case 14:case 42:case 43:case 54:case 55:case 115:break;case 15:this.$={type:"Function",arguments:[],body:J[Y-1],legacy:!0,range:this._$.range};break;case 16:this.$={type:"Function",arguments:[],body:J[Y],legacy:!1,range:this._$.range};break;case 17:this.$={type:"SortingFunction",compares:J[Y],range:this._$.range};break;case 18:this.$={type:"Pipeline",left:J[Y-2],right:J[Y],range:this._$.range};break;case 19:this.$={type:"Pipeline",left:J[Y-3],right:{type:"Block",definitions:J[Y-1],body:J[Y]},range:this._$.range};break;case 20:case 21:case 22:this.$={type:"Unary",operator:J[Y-1],argument:J[Y],range:this._$.range};break;case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:this.$={type:"Binary",operator:J[Y-1],left:J[Y-2],right:J[Y],range:this._$.range};break;case 41:this.$={type:"Conditional",test:J[Y-4],consequent:J[Y-2],alternate:J[Y],range:this._$.range};break;case 44:this.$={type:"Data",range:this._$.range};break;case 45:this.$={type:"Context",range:this._$.range};break;case 46:this.$={type:"Current",range:this._$.range};break;case 47:this.$={type:"Arg1",range:this._$.range};break;case 48:this.$={type:"Reference",name:J[Y],range:this._$.range};break;case 49:case 50:case 51:case 52:case 90:case 91:case 92:case 93:this.$={type:"Literal",value:J[Y],range:this._$.range};break;case 53:this.$={type:"Template",values:J[Y],range:this._$.range};break;case 56:this.$={type:"SliceNotation",value:null,arguments:J[Y-1],range:this._$.range};break;case 57:case 61:this.$={type:"GetProperty",value:null,property:J[Y],range:this._$.range};break;case 58:case 62:this.$={type:"MethodCall",value:null,method:J[Y],range:this._$.range};break;case 59:this.$={type:"Parentheses",body:J[Y-1],range:this._$.range};break;case 60:this.$={type:"Parentheses",body:{type:"Block",definitions:J[Y-2],body:J[Y-1]},range:this._$.range};break;case 63:this.$={type:"Map",value:null,query:J[Y-1],range:this._$.range};break;case 64:this.$={type:"Filter",value:null,query:J[Y-1],range:this._$.range};break;case 65:this.$={type:"MapRecursive",value:null,query:{type:"GetProperty",value:null,property:J[Y]},range:this._$.range};break;case 66:this.$={type:"MapRecursive",value:null,query:{type:"MethodCall",value:null,method:J[Y]},range:this._$.range};break;case 67:this.$={type:"MapRecursive",value:null,query:J[Y-1],range:this._$.range};break;case 68:this.$={type:"Pick",value:J[Y-2],getter:null,range:this._$.range};break;case 69:this.$={type:"Pick",value:J[Y-3],getter:J[Y-1],range:this._$.range};break;case 70:this.$={type:"SliceNotation",value:J[Y-3],arguments:J[Y-1],range:this._$.range};break;case 71:this.$={type:"GetProperty",value:J[Y-2],property:J[Y],range:this._$.range};break;case 72:this.$={type:"MethodCall",value:J[Y-2],method:J[Y],range:this._$.range};break;case 73:this.$={type:"Map",value:J[Y-3],query:J[Y-1],range:this._$.range};break;case 74:this.$={type:"Filter",value:J[Y-3],query:J[Y-1],range:this._$.range};break;case 75:this.$={type:"MapRecursive",value:J[Y-2],query:{type:"GetProperty",value:null,property:J[Y]},range:this._$.range};break;case 76:this.$={type:"MapRecursive",value:J[Y-2],query:{type:"MethodCall",value:null,method:J[Y]},range:this._$.range};break;case 77:this.$={type:"MapRecursive",value:J[Y-3],query:J[Y-1],range:this._$.range};break;case 78:this.$={type:"Method",reference:J[Y-2],arguments:[],range:this._$.range};break;case 79:this.$={type:"Method",reference:J[Y-3],arguments:J[Y-1],range:this._$.range};break;case 80:this.$={type:"Method",reference:{type:"Reference",name:J[Y-2]},arguments:[],range:this._$.range};break;case 81:this.$={type:"Method",reference:{type:"Reference",name:J[Y-3]},arguments:J[Y-1],range:this._$.range};break;case 83:case 101:case 114:case 122:J[Y-2].push(J[Y]);break;case 85:this.$=[J[Y-1],...J[Y]];break;case 86:case 124:this.$=[null,J[Y]];break;case 87:case 126:this.$=[J[Y-1],J[Y]];break;case 88:this.$=[null,J[Y-1],...J[Y]];break;case 89:this.$=[J[Y-2],J[Y-1],...J[Y]];break;case 94:case 97:this.$={type:"Object",properties:[],range:this._$.range};break;case 95:this.$={type:"Object",properties:J[Y-1],range:this._$.range};break;case 96:this.$={type:"Object",properties:J[Y-2],range:this._$.range};break;case 98:this.$={type:"Block",definitions:J[Y-2],body:{type:"Object",properties:J[Y-1]},range:this._$.range};break;case 99:this.$={type:"Block",definitions:J[Y-3],body:{type:"Object",properties:J[Y-2]},range:this._$.range};break;case 102:this.$={type:"ObjectEntry",key:{type:"Current"},value:null,range:this._$.range};break;case 103:this.$={type:"ObjectEntry",key:{type:"Reference",name:J[Y]},value:null,range:this._$.range};break;case 104:this.$={type:"ObjectEntry",key:J[Y],value:null,range:this._$.range};break;case 105:this.$={type:"ObjectEntry",key:J[Y-2],value:J[Y],range:this._$.range};break;case 106:case 107:case 108:this.$={type:"ObjectEntry",key:{type:"Literal",value:J[Y-2]},value:J[Y],range:this._$.range};break;case 109:this.$={type:"ObjectEntry",key:{type:"Identifier",name:"$"+J[Y-2].name},value:J[Y],range:this._$.range};break;case 110:this.$={type:"ObjectEntry",key:J[Y-3],value:J[Y],range:this._$.range};break;case 111:this.$={type:"Spread",query:null,array:!1,range:this._$.range};break;case 112:this.$={type:"Spread",query:J[Y],array:!1,range:this._$.range};break;case 116:this.$={type:"Spread",query:null,array:!0,range:this._$.range};break;case 117:this.$={type:"Spread",query:J[Y],array:!0,range:this._$.range};break;case 118:this.$={type:"Array",elements:[],range:this._$.range};break;case 119:this.$={type:"Array",elements:J[Y-1],range:this._$.range};break;case 120:this.$={type:"Array",elements:J[Y-2],range:this._$.range};break;case 123:this.$={type:"Compare",query:J[Y-1],order:J[Y],range:this._$.range};break;case 125:this.$=[null,J[Y-1],J[Y]];break;case 127:this.$=[J[Y-2],J[Y-1],J[Y]];break;case 128:this.$=null;break;case 129:this.$=J[Y];break}},table:[{3:1,4:2,5:t,6:3,7:4,8:5,9:i,12:14,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{1:[3]},{5:[1,44]},n(W,[2,3],{16:6,20:9,12:14,42:15,43:16,83:17,51:26,52:27,53:28,13:30,57:31,67:38,68:39,7:45,8:46,9:i,14:a,15:u,17:c,19:d,22:h,23:g,24:b,44:x,45:C,46:S,47:L,48:T,49:M,50:N,54:A,58:j,60:D,61:P,62:R,63:_,64:$,72:q,73:H,76:K}),n(W,[2,4],{21:U,23:k,24:Q,25:te,26:fe,27:Oe,28:Be,29:$e,30:Qe,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze,41:Ge}),n(Ut,[2,6]),n(He,[2,14],{54:Ye,60:ft,61:At,62:Rt,63:br,64:Xe,84:B}),{4:74,6:3,7:4,8:5,9:i,12:14,13:30,14:a,15:u,16:6,17:c,18:t,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{7:75,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},n([5,10,11,18,21,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,56,59,74,75,77],[2,17],{66:[1,78]}),{7:79,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{7:80,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{7:81,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},n(Z,Ve,{10:kt,11:ar}),n(Z,Bn,{10:_t,11:[1,85],58:nt}),n(Te,[2,42]),n(Te,[2,43]),n(He,[2,121]),n(Ot,[2,13]),n(Te,[2,44]),n(Te,[2,45]),n(Te,[2,47]),n(Te,[2,49]),n(Te,[2,50]),n(Te,[2,51]),n(Te,[2,52]),n(Te,[2,53]),n(Te,[2,54]),n(Te,[2,55]),{7:91,9:V,11:Ht,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,55:87,56:[1,88],57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,80:De,81:89,82:92,83:17,85:90},n(Te,[2,57],{58:dr}),n(Te,[2,58]),{6:97,7:96,8:5,9:i,12:14,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{12:100,13:98,14:a,15:u,57:99},{4:101,6:3,7:4,8:5,9:i,12:14,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,59:t,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{4:102,6:3,7:4,8:5,9:i,12:14,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,56:t,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{12:100,13:103,14:a,15:u,57:104},{4:105,6:3,7:4,8:5,9:i,12:14,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,59:t,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},n(Te,[2,84]),{7:108,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,69:106,70:107,71:109,72:q,73:H,74:wt,75:Pe,76:K,83:17},{6:114,8:5,9:ut,12:117,13:118,14:a,15:u,47:wr,48:dt,50:Vt,54:gt,77:[1,112],78:113,79:115,80:xr},n(Ot,[2,12]),n(Te,[2,90]),n(Ft,[2,91]),{1:[2,1]},n(W,[2,2],{21:U,23:k,24:Q,25:te,26:fe,27:Oe,28:Be,29:$e,30:Qe,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze,41:Ge}),n(Ut,[2,7]),{6:125,7:124,8:5,9:i,12:14,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{7:126,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{7:127,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{7:128,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{7:129,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{7:130,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{7:131,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{7:132,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{7:133,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{7:134,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{7:135,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{7:136,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{7:137,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{7:138,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{7:139,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{7:140,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{7:141,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{7:142,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{7:143,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{7:144,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{7:146,9:V,11:Ht,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,55:147,56:[1,145],57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17,85:90},{12:100,13:148,14:a,15:u,57:149},{4:150,6:3,7:4,8:5,9:i,12:14,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,59:t,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{4:151,6:3,7:4,8:5,9:i,12:14,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,56:t,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{12:100,13:152,14:a,15:u,57:153},{4:154,6:3,7:4,8:5,9:i,12:14,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,59:t,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},n(He,[2,123]),{18:[1,155]},n(hr,[2,16],{23:k,24:Q,25:te,26:fe,27:Oe,28:Be,29:$e,30:Qe,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze,41:Ge}),n(Te,Ve),n(Te,Bn,{58:nt}),{9:V,12:77,13:30,14:a,15:u,16:157,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:156},n(kr,[2,20],{23:k,24:Q,25:te,26:fe,27:Oe,28:Be,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze}),n($r,[2,21],{31:Me,32:Se,33:be}),n($r,[2,22],{31:Me,32:Se,33:be}),n(Ut,[2,8]),{7:158,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},n(Ut,[2,10]),{7:159,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{7:162,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,59:[1,160],60:D,61:P,62:R,63:_,64:$,65:161,67:38,68:39,72:q,73:H,76:K,83:17},{56:[1,163]},n(Te,[2,118]),{56:[1,164],66:[1,165]},{11:Ht,56:[2,124],85:166},n(pr,Et,{85:167,11:Ht,21:U,23:k,24:Q,25:te,26:fe,27:Oe,28:Be,29:$e,30:Qe,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze,41:Ge}),n(pr,[2,113]),n(kn,[2,128],{16:6,20:9,42:15,43:16,83:17,51:26,52:27,53:28,13:30,57:31,67:38,68:39,12:77,7:168,9:V,14:a,15:u,17:c,19:d,22:h,23:g,24:b,44:x,45:C,46:S,47:L,48:T,49:M,50:N,54:A,58:j,60:D,61:P,62:R,63:_,64:$,72:q,73:H,76:K}),n(pr,[2,116],{16:6,20:9,42:15,43:16,83:17,51:26,52:27,53:28,13:30,57:31,67:38,68:39,12:77,7:169,9:V,14:a,15:u,17:c,19:d,22:h,23:g,24:b,44:x,45:C,46:S,47:L,48:T,49:M,50:N,54:A,58:j,60:D,61:P,62:R,63:_,64:$,72:q,73:H,76:K}),{7:162,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,59:[1,170],60:D,61:P,62:R,63:_,64:$,65:171,67:38,68:39,72:q,73:H,76:K,83:17},{21:U,23:k,24:Q,25:te,26:fe,27:Oe,28:Be,29:$e,30:Qe,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze,41:Ge,59:[1,172]},{7:173,8:46,9:i,12:14,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},n(Te,[2,61],{58:dr}),n(Te,[2,62]),{58:nt},{59:[1,174]},{56:[1,175]},n(Te,[2,65],{58:dr}),n(Te,[2,66]),{59:[1,176]},n(Te,[2,85]),n(Te,[2,86]),{21:U,23:k,24:Q,25:te,26:fe,27:Oe,28:Be,29:$e,30:Qe,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze,41:Ge,70:177,71:178,74:wt,75:Pe},{7:108,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,69:179,70:107,71:109,72:q,73:H,74:wt,75:Pe,76:K,83:17},n(Te,[2,93]),n(Ft,[2,92]),n(Te,[2,94]),{66:[1,181],77:[1,180]},{8:46,9:ut,12:117,13:118,14:a,15:u,47:wr,48:dt,50:Vt,54:gt,77:[1,182],78:183,79:115,80:xr},n(mt,[2,100]),n(mt,lr,{10:kt,11:ar}),n(mt,Xr,{10:_t,11:[1,184]}),n(mt,[2,104],{11:[1,185]}),{11:[1,186]},{11:[1,187]},{11:[1,188]},{7:189,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},n(mt,[2,111],{42:15,43:16,51:26,52:27,53:28,13:30,57:31,67:38,68:39,12:77,16:190,9:V,14:a,15:u,44:x,45:C,46:S,47:L,48:T,49:M,50:N,54:A,58:j,60:D,61:P,62:R,63:_,64:$,72:q,73:H,76:K}),n(hr,[2,18],{23:k,24:Q,25:te,26:fe,27:Oe,28:Be,29:$e,30:Qe,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze,41:Ge}),{7:191,8:46,9:i,12:14,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},n(Ur,[2,23],{23:k,24:Q,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze}),n(Ur,[2,24],{23:k,24:Q,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze}),n(Ur,[2,25],{23:k,24:Q,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze}),n(Ur,[2,26],{23:k,24:Q,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze}),n(kr,[2,27],{23:k,24:Q,25:te,26:fe,27:Oe,28:Be,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze}),n([5,10,11,18,21,30,41,56,59,66,74,75,77],[2,28],{23:k,24:Q,25:te,26:fe,27:Oe,28:Be,29:$e,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze}),n($r,[2,29],{31:Me,32:Se,33:be}),n($r,[2,30],{31:Me,32:Se,33:be}),n(He,[2,31]),n(He,[2,32]),n(He,[2,33]),n(en,[2,34],{23:k,24:Q,31:Me,32:Se,33:be,36:me,37:xe,38:ye,39:de}),n(en,[2,35],{23:k,24:Q,31:Me,32:Se,33:be,36:me,37:xe,38:ye,39:de}),n(jr,[2,36],{23:k,24:Q,31:Me,32:Se,33:be}),n(jr,[2,37],{23:k,24:Q,31:Me,32:Se,33:be}),n(jr,[2,38],{23:k,24:Q,31:Me,32:Se,33:be}),n(jr,[2,39],{23:k,24:Q,31:Me,32:Se,33:be}),n(en,[2,40],{23:k,24:Q,31:Me,32:Se,33:be,36:me,37:xe,38:ye,39:de}),{11:[1,192],21:U,23:k,24:Q,25:te,26:fe,27:Oe,28:Be,29:$e,30:Qe,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze,41:Ge},n(Te,[2,68]),{11:Ht,21:U,23:k,24:Q,25:te,26:fe,27:Oe,28:Be,29:$e,30:Qe,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze,41:Ge,56:[1,193],85:167},{56:[1,194]},n(Te,[2,71],{58:dr}),n(Te,[2,72]),{59:[1,195]},{56:[1,196]},n(Te,[2,75],{58:dr}),n(Te,[2,76]),{59:[1,197]},n(He,[2,15]),n(He,[2,122]),{54:Ye,60:ft,61:At,62:Rt,63:br,64:Xe,84:B},{10:[1,198],21:U,23:k,24:Q,25:te,26:fe,27:Oe,28:Be,29:$e,30:Qe,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze,41:Ge},{10:Cr,21:U,23:k,24:Q,25:te,26:fe,27:Oe,28:Be,29:$e,30:Qe,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze,41:Ge},n(Te,[2,80]),{59:[1,200],66:Gt},n(Bt,[2,82],{21:U,23:k,24:Q,25:te,26:fe,27:Oe,28:Be,29:$e,30:Qe,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze,41:Ge}),n(Te,[2,56]),n(Te,[2,119]),{7:204,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,56:[1,202],57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,80:De,82:203,83:17},{56:[2,125]},{11:Ht,56:[2,126],85:205},n(kn,[2,129],{21:U,23:k,24:Q,25:te,26:fe,27:Oe,28:Be,29:$e,30:Qe,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze,41:Ge}),n(pr,[2,117],{21:U,23:k,24:Q,25:te,26:fe,27:Oe,28:Be,29:$e,30:Qe,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze,41:Ge}),n(Te,[2,78]),{59:[1,206],66:Gt},n(Te,[2,59]),{21:U,23:k,24:Q,25:te,26:fe,27:Oe,28:Be,29:$e,30:Qe,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze,41:Ge,59:[1,207]},n(Te,[2,63]),n(Te,[2,64]),n(Te,[2,67]),n(Te,[2,87]),{7:108,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,69:208,70:107,71:109,72:q,73:H,74:wt,75:Pe,76:K,83:17},n(Te,[2,88]),n(Te,[2,95]),{9:Cn,12:212,13:118,14:a,15:u,47:wr,48:dt,50:Vt,54:gt,77:[1,209],79:210,80:xr},n(Te,[2,97]),{66:[1,214],77:[1,213]},{7:215,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{7:216,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{7:217,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{7:218,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{7:219,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},{21:U,23:k,24:Q,25:te,26:fe,27:Oe,28:Be,29:$e,30:Qe,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze,41:Ge,56:[1,220]},n(mt,[2,112],{54:Ye,60:ft,61:At,62:Rt,63:br,64:Xe}),n(hr,[2,19],{23:k,24:Q,25:te,26:fe,27:Oe,28:Be,29:$e,30:Qe,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze,41:Ge}),{7:221,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},n(Te,[2,69]),n(Te,[2,70]),n(Te,[2,73]),n(Te,[2,74]),n(Te,[2,77]),n(Ut,[2,9]),n(Ut,[2,11]),n(Te,[2,81]),{7:222,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},n(Te,[2,120]),n(pr,[2,114]),n(pr,Et,{21:U,23:k,24:Q,25:te,26:fe,27:Oe,28:Be,29:$e,30:Qe,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze,41:Ge}),{56:[2,127]},n(Te,[2,79]),n(Te,[2,60]),n(Te,[2,89]),n(Te,[2,96]),n(mt,[2,101]),n(mt,lr),n(mt,Xr,{11:[1,223]}),n(Te,[2,98]),{9:Cn,12:212,13:118,14:a,15:u,47:wr,48:dt,50:Vt,54:gt,77:[1,224],79:210,80:xr},n(mt,gr,{10:Cr,21:U,23:k,24:Q,25:te,26:fe,27:Oe,28:Be,29:$e,30:Qe,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze,41:Ge}),n(mt,[2,105],{21:U,23:k,24:Q,25:te,26:fe,27:Oe,28:Be,29:$e,30:Qe,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze,41:Ge}),n(mt,[2,106],{21:U,23:k,24:Q,25:te,26:fe,27:Oe,28:Be,29:$e,30:Qe,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze,41:Ge}),n(mt,[2,107],{21:U,23:k,24:Q,25:te,26:fe,27:Oe,28:Be,29:$e,30:Qe,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze,41:Ge}),n(mt,[2,108],{21:U,23:k,24:Q,25:te,26:fe,27:Oe,28:Be,29:$e,30:Qe,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze,41:Ge}),{11:[1,225]},n(hr,[2,41],{23:k,24:Q,25:te,26:fe,27:Oe,28:Be,29:$e,30:Qe,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze,41:Ge}),n(Bt,[2,83],{21:U,23:k,24:Q,25:te,26:fe,27:Oe,28:Be,29:$e,30:Qe,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze,41:Ge}),{7:226,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},n(Te,[2,99]),{7:227,9:V,12:77,13:30,14:a,15:u,16:6,17:c,19:d,20:9,22:h,23:g,24:b,42:15,43:16,44:x,45:C,46:S,47:L,48:T,49:M,50:N,51:26,52:27,53:28,54:A,57:31,58:j,60:D,61:P,62:R,63:_,64:$,67:38,68:39,72:q,73:H,76:K,83:17},n(mt,gr,{21:U,23:k,24:Q,25:te,26:fe,27:Oe,28:Be,29:$e,30:Qe,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze,41:Ge}),n(mt,[2,110],{21:U,23:k,24:Q,25:te,26:fe,27:Oe,28:Be,29:$e,30:Qe,31:Me,32:Se,33:be,34:ue,35:ge,36:me,37:xe,38:ye,39:de,40:ze,41:Ge})],defaultActions:{44:[2,1],166:[2,125],205:[2,127]},parseError:function(it,oe){if(oe.recoverable)this.trace(it);else{let Ee=new Error(it);throw Ee.hash=oe,Ee}},parse:function(oe,...Ee){let Ne=1,ce=2,J=3,Ke=2,Y=1,We=ht=>{ne.length-=2*ht,je.length-=ht,se.length-=ht},Dt=()=>{let ht=Je.lex()||Y;return typeof ht!="number"&&(ht=this.symbols_[ht]||ht),ht},Je=Object.create(this.lexer),Or=Je.options&&Je.options.ranges,ie={...this.yy,parser:this,lexer:Je};Je.setInput(oe,ie),typeof ie.parseError=="function"&&(this.parseError=ie.parseError),typeof Je.yylloc=="undefined"&&(Je.yylloc={});let w=this.table,O={},ee=Je.yylloc,ne=[0],je=[null],se=[ee],ae=[],Re="",Ce=0,qe=0,ot=0,Ze,Sr;for(;;){let ht=ne[ne.length-1],Kt;if(this.defaultActions[ht]?Kt=this.defaultActions[ht]:((Ze===null||typeof Ze=="undefined")&&(Ze=Dt()),Kt=w[ht]&&w[ht][Ze]),!Kt||!Kt[0]){var bi=function(Ir){let Pr=ne.length-1,xo=0;for(;;){if(Ke.toString()in w[Ir])return xo;if(Ir===0||Pr<2)return!1;Pr-=2,Ir=ne[Pr],++xo}};let ur,Dr="";if(!ot){let Ir=[];for(let Pr in w[ht])Pr in this.terminals_&&Pr>Ke&&Ir.push("'"+this.terminals_[Pr]+"'");Dr=Je.showPosition?"Parse error on line "+(Ce+1)+`:
`+Je.showPosition()+`
Expecting `+Ir.join(", ")+", got '"+(this.terminals_[Ze]||Ze)+"'":"Parse error on line "+(Ce+1)+": Unexpected "+(Ze===Y?"end of input":"'"+(this.terminals_[Ze]||Ze)+"'"),this.parseError(Dr,{text:Je.match,token:this.terminals_[Ze]||Ze,line:Je.yylineno,loc:ee,expected:Ir})}if(ot===3){if(Ze===Y||Sr===Y)throw new Error(Dr||"Parsing halted while starting to recover from another error.");qe=Je.yyleng,Re=Je.yytext,Ce=Je.yylineno,ee=Je.yylloc,Ze=Dt()}if(ur===!1)throw new Error(Dr||"Parsing halted. No suitable error recovery rule available.");We(ur),Sr=Ze==Ke?null:Ze,Ze=Ke,ht=ne[ne.length-1],Kt=w[ht]&&w[ht][Ke],ot=3}if(Array.isArray(Kt[0])&&Kt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ht+", token: "+Ze);switch(Kt[0]){case Ne:ne.push(Ze),je.push(Je.yytext),se.push(Je.yylloc),ne.push(Kt[1]),Ze=null,Sr?(Ze=Sr,Sr=null):(qe=Je.yyleng,Re=Je.yytext,Ce=Je.yylineno,ee=Je.yylloc,ot>0&&ot--);break;case ce:{let ur=this.productions_[Kt[1]][1];O.$=je[je.length-ur],O._$={first_line:se[se.length-(ur||1)].first_line,last_line:se[se.length-1].last_line,first_column:se[se.length-(ur||1)].first_column,last_column:se[se.length-1].last_column},Or&&(O._$.range=[se[se.length-(ur||1)].range[0],se[se.length-1].range[1]]);let Dr=this.performAction.call(O,Re,qe,Ce,ie,Kt[1],je,se,...Ee);if(typeof Dr!="undefined")return Dr;ur&&We(ur),ne.push(this.productions_[Kt[1]][0]),je.push(O.$),se.push(O._$),ne.push(w[ne[ne.length-2]][ne[ne.length-1]]);break}case J:return!0}}}};var tn=function(){var it={options:{ranges:!0},performAction:function(oe,Ee,Ne,ce){var J=ce;switch(Ne){case 0:{oe.commentRanges.push(Ee.yylloc.range);break}case 1:break;case 2:{return this.popState(),32;break}case 3:{return this.popState(),36;break}case 4:{this.done=!1,this.popState();break}case 5:{let Ke=Ee.yytext.endsWith("`")?"TEMPLATE":"TPL_START";return Ee.yytext=this.toStringLiteral(Ee.yytext,!0,1+(Ke!=="TEMPLATE")),Ke==="TEMPLATE"&&oe.pps(),Ke;break}case 6:{let Ke=Ee.yytext.endsWith("`")?"TPL_END":"TPL_CONTINUE";return Ee.yytext=this.toStringLiteral(Ee.yytext,!0,1+(Ke!=="TPL_END")),this.popState(),Ke==="TPL_END"&&oe.pps(),Ke;break}case 7:break;case 8:return 58;case 9:{return oe.pps(),59;break}case 10:return 54;case 11:{return oe.pps(),56;break}case 12:return 76;case 13:{if(this.bracketStack[this.bracketStack.length-1]!=="TPL_END")return oe.pps(),77;this.unput("}"),this.begin("template");break}case 14:{return Ee.yytext=this.toLiteral(Ee.yytext),50;break}case 15:return 29;case 16:return 30;case 17:return 28;case 18:return 26;case 19:return 25;case 20:return 27;case 21:return 22;case 22:return 84;case 23:{return oe.pps(),Ee.yytext=Number(Ee.yytext),48;break}case 24:{return oe.pps(),Ee.yytext=parseInt(Ee.yytext,16),48;break}case 25:{return oe.pps(),Ee.yytext=this.toStringLiteral(Ee.yytext),47;break}case 26:{return oe.pps(),Ee.yytext=this.toStringLiteral(Ee.yytext),47;break}case 27:{return oe.pps(),Ee.yytext=this.toRegExp(Ee.yytext),49;break}case 28:{return oe.pps(),Ee.yytext=this.ident(Ee.yytext),14;break}case 29:{return oe.pps(),Ee.yytext=this.ident(Ee.yytext.slice(1)),15;break}case 30:{return oe.pps(),44;break}case 31:{return oe.pps(),45;break}case 32:{return oe.pps(),46;break}case 33:{return oe.pps(),9;break}case 34:return 19;case 35:{return this.fnOpened++,17;break}case 36:return 34;case 37:return 35;case 38:return 40;case 39:return 39;case 40:return 37;case 41:return 36;case 42:return this.fnOpened?(this.fnOpened--,18):38;case 43:return 64;case 44:return 61;case 45:return 62;case 46:return 80;case 47:{return oe.pps(),63;break}case 48:{return oe.pps(),60;break}case 49:return 41;case 50:return 66;case 51:return 11;case 52:return 10;case 53:return 23;case 54:return 24;case 55:return 31;case 56:return 32;case 57:return 33;case 58:return 21;case 59:return 5}},rules:[/^(?:\/\/.*?(?:\n|\r\n?|\u2028|\u2029|$)|\/\*(?:.|\s)*?(?:\*\/|$))/,/^\s+/,/^\//,/^<(?!=)/,/^/,(oe,Ee)=>{if(oe[0]!==(Ee==="template"?"}":"`"))return null;for(let Ne=1;Ne<oe.length;Ne++){if(oe[Ne]==="`")return Ne+1;if(oe[Ne]==="$"&&oe[Ne+1]==="{")return Ne+2;oe[Ne]==="\\"&&Ne++}return null},(oe,Ee)=>{if(oe[0]!==(Ee==="template"?"}":"`"))return null;for(let Ne=1;Ne<oe.length;Ne++){if(oe[Ne]==="`")return Ne+1;if(oe[Ne]==="$"&&oe[Ne+1]==="{")return Ne+2;oe[Ne]==="\\"&&Ne++}return null},/^/,/^\(/,/^\)/,/^\[/,/^\]/,/^\{/,/^\}/,/^(?:(true|false|null|undefined|Infinity|NaN)\b)/,/^and\b/,/^or\b/,/^has\s+no\b/,/^has\b/,/^in\b/,/^not\s+in\b/,/^not?\b/,/^(?:(asc|desc)(NA?|AN?)?\b)/,/^(?:(\d+\.|\.)?\d+([eE][-+]?\d+)?\b)/,/^0[xX][0-9a-fA-F]+/,/^(?:"(?:\\[\\"]|[^"])*")/,/^(?:'(?:\\[\\']|[^'])*')/,/^(?:\/(?:\\.|[^/])+\/i?)/,/^(?:(?:[a-zA-Z_]|\\u[0-9a-fA-F]{4})(?:[a-zA-Z_$0-9]|\\u[0-9a-fA-F]{4})*)/,/^(?:\$(?:[a-zA-Z_]|\\u[0-9a-fA-F]{4})(?:[a-zA-Z_$0-9]|\\u[0-9a-fA-F]{4})*)/,/^@/,/^#/,/^\$\$/,/^\$/,/^=>/,/^<(?!=)/,/^=/,/^!=/,/^~=/,/^>=/,/^<=/,/^</,/^>/,/^\.\.\(/,/^\.\(/,/^\.\[/,/^\.\.\./,/^\.\./,/^\./,/^\?/,/^,/,/^:/,/^;/,/^\-/,/^\+/,/^\*/,/^\//,/^\%/,/^(?:\|)/,/^$/],conditions:{preventPrimitive:{rules:[0,1,2,3,4,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],inclusive:!0},template:{rules:[6,7],inclusive:!1},INITIAL:{rules:[0,1,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],inclusive:!0}},EOF:1,setInput(oe,Ee){return this.yy=Ee||this.yy||{},this._input=oe,this._more=!1,this._backtrack=!1,this.done=!1,this.currentCondition="INITIAL",this.conditionStack=["INITIAL"],this.offset=0,this.yytext=this.matched=this.match="",this.yyleng=0,this.yylineno=0,this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.yylloc.range=[0,0],this},parseError(oe,Ee){if(!this.yy.parser)throw new Error(oe);this.yy.parser.parseError(oe,Ee)},input(){let oe=this._input[0];return this.offset++,this.yyleng++,this.yytext=this.match=this.matched=this.yytext+oe,/\n|\r\n?|\u2028|\u2029/g.test(oe)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.yylloc.range[1]++,this._input=this._input.slice(1),oe},unput(oe){let Ee=oe.split(/\n|\r\n?|\u2028|\u2029/g),Ne=this.yytext.split(/\n|\r\n?|\u2028|\u2029/g);this._input=oe+this._input,this.offset-=oe.length,this.yytext=this.matched=this.match=this.yytext.slice(0,-oe.length),this.yyleng=this.yytext.length,this.done=!1,Ee.length-1&&(this.yylineno-=Ee.length-1);let ce=this.yylloc;return this.yylloc={first_line:ce.first_line,last_line:this.yylineno+1,first_column:ce.first_column,last_column:Ee?(Ee.length===Ne.length?ce.first_column:0)+Ne[Ne.length-Ee.length].length-Ee[0].length:ce.first_column-oe.length},this.yylloc.range=[ce.range[0],ce.range[0]+this.yyleng],this},more(){return this._more=!0,this},reject(){throw new Error("reject() is allowed only when options.backtrack_lexer = true")},less(oe){this.unput(this.match.slice(oe))},pastInput(){let oe=this.matched.substr(0,this.matched.length-this.match.length);return(oe.length>20?"...":"")+oe.substr(-20).replace(/\n|\r\n?|\u2028|\u2029/g,"\\n")},upcomingInput(){let oe=this.match;return oe.length<20&&(oe+=this._input.substr(0,20-oe.length)),(oe.substr(0,20)+(oe.length>20?"...":"")).replace(/\n|\r\n?|\u2028|\u2029/g,"\\n")},showPosition(){let oe=this.pastInput();return oe+this.upcomingInput()+`
${"-".repeat(oe.length)}^`},test_match(oe,Ee){let Ne,ce=oe[0];this.yytext+=ce,this.match+=ce,this.matched+=ce,this.matches=oe,this.yyleng=this.yytext.length,this.offset+=this.yyleng,this._more=!1,this._backtrack=!1,this._input=this._input.slice(ce.length);let J=/\n|\r\n?|\u2028|\u2029/g,Ke=-1,Y;for(;Y=J.exec(ce);)this.yylineno++,Ke=Y.index+Y[0].length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Ke!==-1?ce.length-Ke:this.yylloc.last_column+ce.length},this.yylloc.range=[this.offset-this.yyleng,this.offset];let We=this.performAction.call(this,this.yy,this,Ee,this.conditionStack[this.conditionStack.length-1]);return!We&&this._backtrack?(Object.assign(this,Ne),!1):(this._input&&(this.done=!1),typeof We=="number"&&this.yy.parser?this.yy.parser.terminals_[We]:We||!1)},next(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");let oe,Ee;for(let Ne of this.conditions[this.currentCondition].rules){let ce=this.rules[Ne],J;if(typeof ce=="function"){let Ke=ce(this._input,this.currentCondition);switch(typeof Ke){case"string":J=[Ke];break;case"number":J=[this._input.slice(0,Ke)];break;default:J=Ke}}else J=this._input.match(ce);if(J&&(!oe||J[0].length>oe[0].length)){oe=J,Ee=Ne;break}}if(oe)return this.test_match(oe,Ee);if(this._input==="")return this.EOF;this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex(){let oe;for(;!oe;)oe=this.next();return oe},begin(oe){this.currentCondition=oe,this.conditionStack.push(oe)},pushState(oe){this.begin(oe)},popState(){return this.conditionStack.pop(),this.currentCondition=this.conditionStack.length?this.conditionStack[this.conditionStack.length-1]:"INITIAL"},topState(oe){return oe=this.conditionStack.length-1-Math.abs(oe||0),oe>=0?this.conditionStack[oe]:"INITIAL"},stateStackSize(){return this.conditionStack.length}};return typeof gi!="undefined"&&typeof co=="object"&&(gi.exports=co=it),it.lexer=it}();Ar.lexer=tn;function Yt(){this.yy={}}Yt.prototype=Ar,Ar.Parser=Yt;let nr=function(oe){function Ee(se,ae){Object.entries(ae).forEach(([Re,Ce])=>se[Re]=Ce(se[Re]))}function Ne(se,ae,Re){let Ce=Re.split(/\r\n?|\n|\u2028|\u2029/g);se.yylineno+=Ce.length-1,se.yylloc.first_line=se.yylineno+1,se.yylloc.first_column=se.length>1?Ce[Ce.length-1].length+1:se.yylloc.first_column+Ce[0].length,se.yylloc.range[0]+=ae,se.offset+=ae,se.match=se.match.slice(ae)}let ce=new Map([["EOF",["<end of input>"]],["IDENT",["ident"]],["$IDENT",["$ident"]],["FUNCTION_START",["'<'"]],["FUNCTION_END",["'>'"]],["FUNCTION",["'=>'"]],["NOT",["'not'"]],["IN",["'in'"]],["HAS",["'has'"]],["NOTIN",["'not in'"]],["HASNO",["'has no'"]],["AND",["'and'"]],["OR",["'or'"]],["STRING",["string"]],["TPL_START",["template"]],["TEMPLATE",["template"]],["NUMBER",["number"]],["REGEXP",["regexp"]],["LITERAL",["'true'","'false'","'null'","'undefined'"]],["ORDER",["'asc'","'desc'","'ascN'","'descN'"]]]),J=se=>ce.get(se)||`'${se}'`,Ke=function(se,ae={},Re){if(ae.recoverable)this.trace(se);else{typeof ae.inside=="number"&&Ne(Re.lexer,ae.inside,Re.lexer.match.slice(0,ae.inside));let Ce=Re.lexer.yylloc,qe=[se.split(/\n/)[0],"",Re.lexer.showPosition()],ot=Array.isArray(ae.expected)?[...new Set([].concat(...ae.expected.map(Sr=>J(Sr.slice(1,-1)))))]:null;ot&&qe.push("","Expecting "+ot.join(", ")+" got "+J(ae.token));let Ze=new SyntaxError(qe.join(`
`));throw Ze.details={rawMessage:se,text:ae.text,token:ae.token,expected:ot,loc:{range:Ce.range,start:{line:Ce.first_line,column:Ce.first_column,offset:Ce.range[0]},end:{line:Ce.last_line,column:Ce.last_column,offset:Ce.range[1]}}},Ze}},Y=new Set([`
`,"\r","\u2028","\u2029"]);Object.assign(oe.lexer,{ident:se=>se.replace(/\\u[0-9a-fA-F]{4}/g,ae=>String.fromCharCode(parseInt(ae.slice(2),16))),toLiteral:se=>se==="null"?null:se==="false"?!1:se==="true"?!0:se==="Infinity"?Infinity:se==="NaN"?NaN:void 0,toStringLiteral(se,ae=!1,Re=1){let Ce="";for(let qe=1;qe<se.length-Re;qe++){if(!ae&&Y.has(se[qe])&&this.parseError("Invalid line terminator",{inside:qe}),se[qe]!=="\\"){Ce+=se[qe];continue}let ot=se[++qe];switch(ot){case"\r":qe+=se[qe+1]===`
`;break;case`
`:case"\u2028":case"\u2029":break;case"b":Ce+="\b";break;case"n":Ce+=`
`;break;case"r":Ce+="\r";break;case"f":Ce+="\f";break;case"t":Ce+="	";break;case"v":Ce+="\v";break;case"u":{let Ze=se.slice(qe+1,qe+5);if(/^[0-9a-f]{4}$/i.test(Ze)){Ce+=String.fromCharCode(parseInt(Ze,16)),qe+=4;break}this.parseError("Invalid Unicode escape sequence",{inside:qe-1});break}case"x":{let Ze=se.slice(qe+1,qe+3);if(/^[0-9a-f]{2}$/i.test(Ze)){Ce+=String.fromCharCode(parseInt(Ze,16)),qe+=2;break}this.parseError("Invalid hexadecimal escape sequence",{inside:qe-1});break}default:Ce+=ot}}return Ce},toRegExp:se=>new RegExp(se.substr(1,se.lastIndexOf("/")-1),se.substr(se.lastIndexOf("/")+1))}),Ee(oe.lexer,{setInput:se=>function(ae,Re){let Ce=[];return Re.commentRanges=Ce,Re.buildResult=qe=>({ast:qe,commentRanges:Ce}),Re.parseError=function(...qe){return Ke.call(this,...qe,Re)},Re.pps=()=>{this._input&&this.begin("preventPrimitive")},this.fnOpened=0,this.fnOpenedStack=[],this.bracketStack=[],this.prevToken=null,this.prevYylloc={first_line:1,last_line:1,first_column:0,last_column:0,range:[0,0]},se.call(this,ae,Re)}});let We=new oe.Parser;We.lexer={...oe.lexer},We.yy={...oe.yy};let Dt=["AND","OR","IN","NOTIN","HAS","HASNO"],Je=[...Dt,"NOT","ORDER"],Or=["+","-","*","/","%","|","=","!=","~=",">=","<=","<",">"],ie=[null,":",";",",",".","..","FUNCTION",...Or,...Dt,"NOT"],w=new Set([",","?",":",";","EOF","]",")","}",...Or,...Dt,"ORDER"]),O=new Map(ie.map(se=>[se,w]));O.set("{",new Set([","])),O.set("[",new Set([","])),O.set("(",new Set([","])),Ee(We.lexer,{lex:se=>function(){let Re=this._input,Ce=se.call(this);if(O.has(this.prevToken)&&O.get(this.prevToken).has(Ce)){let qe={first_line:this.prevYylloc.last_line,last_line:this.yylloc.first_line,first_column:this.prevYylloc.last_column,last_column:this.yylloc.first_column,range:[this.prevYylloc.range[1],this.yylloc.range[0]]};if(this.unput(this.yytext),this.pushState("preventPrimitive"),this.done=!1,this.yytext="_",this.yylloc=this.prevYylloc=qe,Re!==this._input&&Je.includes(Ce)){let ot=Re.length-this._input.length-1;switch(Re[ot]){case" ":case"	":qe.last_column--,qe.range[1]--;break;case`
`:{let Ze=Re.lastIndexOf(`
`,ot-1);qe.last_line--,qe.last_column=Ze===-1?qe.last_column-1:ot-Ze,qe.range[1]--;break}}}return this.prevToken="IDENT"}if(this.prevYylloc=this.yylloc,Je.includes(Ce))switch(this._input[0]){case" ":case"	":this.prevYylloc={...this.prevYylloc,last_column:this.prevYylloc.last_column+1,range:[this.prevYylloc.range[0],this.prevYylloc.range[1]+1]};break;case`
`:this.prevYylloc={...this.prevYylloc,last_line:this.prevYylloc.last_line+1,last_column:0,range:[this.prevYylloc.range[0],this.prevYylloc.range[1]+1]};break}return this.prevToken=Ce}});let ee=new Map([["(",")"],[".(",")"],["..(",")"],["[","]"],[".[","]"],["{","}"],["TPL_START","TPL_END"]]),ne=new Set([")","]","}","TPL_END"]),je=se=>function(){let Re=se.call(this);if(ne.has(Re)){let Ce=this.bracketStack.pop();Ce!==Re&&this.parseError(`Expected "${Ce}" got "${Re}"`),this.fnOpened=this.fnOpenedStack.pop()||0}return ee.has(Re)&&(this.bracketStack.push(ee.get(Re)),this.fnOpenedStack.push(this.fnOpened),this.fnOpened=0),Re};return Ee(oe.lexer,{lex:je}),Ee(We.lexer,{lex:je}),{parse(se,ae){return ae?We.parse(se):oe.parse(se)},*tokenize(se,ae,Re){let Ce=Object.create(ae?We.lexer:oe.lexer);for(Ce.setInput(se,{parser:oe});!Ce.done;){let qe={type:Ce.lex(),value:Ce.match,offset:Ce.yylloc.range[0]};Re&&(qe.loc={range:Ce.yylloc.range,start:{line:Ce.yylloc.first_line,column:Ce.yylloc.first_column},end:{line:Ce.yylloc.last_line,column:Ce.yylloc.last_column}}),yield qe}}}}(new Yt);return typeof gi!="undefined"&&typeof co=="object"&&(gi.exports=co=nr),nr}()});var ag=ke((QC,sg)=>{sg.exports={build(){return{type:"Arg1"}},compile(n,t){t.put(t.scope.arg1?"arguments[1]":"undefined")},walk(){},stringify(n,t){t.put("$$")}}});var ug=ke((ZC,lg)=>{lg.exports={build(n){return{type:"Array",elements:n}},suggest(n,t){n.elements.length===0&&t.queryRoot(n.range[0]+1,n.range[1]-1)},compile(n,t){t.put("["),t.list(n.elements,","),t.put("]")},walk(n,t){t.list(n.elements)},stringify(n,t){t.put("["),t.list(n.elements,","),t.put("]")}}});var dg=ke((JC,fg)=>{var cg={in:"in","not in":"in",has:"-","has no":"-",and:"and",or:"or","+":"add","-":"sub","*":"mul","/":"div","%":"mod","=":"eq","!=":"ne","<":"lt","<=":"lte",">":"gt",">=":"gte","~=":"match"};function Cs(n,t,i){if(i.type==="Array"){i.elements.length===0&&n.range([i.range[0]+1,i.range[1]-1],"value-subset",t,i);for(let{type:a,range:u,value:c}of i.elements)u&&(a==="Literal"||a==="Identifier"||a==="GetProperty"&&c===null)&&n.range(u,"value-subset",t,i)}}fg.exports={build(n,t,i){return{type:"Binary",operator:n,left:t,right:i}},suggest(n,t){switch(n.operator){case"in":t.range(n.left.range,"in-value",n.right,null),Cs(t,n.left,n.right);break;case"not in":Cs(t,n.left,n.right);break;case"has":t.range(n.right.range,"in-value",n.left,null),Cs(t,n.right,n.left);break;case"has no":Cs(t,n.right,n.left);break;case"=":case"!=":t.range(n.right.range,"value",n.left,null);break}},compile(n,t){if(!(n.operator in cg)){t.error('Unknown operator "'+n.operator+'"',n);return}switch((n.operator==="and"||n.operator==="not in"||n.operator==="has no")&&t.put("!"),n.operator){case"or":case"and":{let i=t.allocateVar();t.put(`f.bool(${i}=`),t.node(n.left),t.put(`)?${i}:`),t.scope.captureCurrent.disabled=!0,t.node(n.right),t.scope.captureCurrent.disabled=!1;break}case"has":case"has no":t.put("f.in("),t.node(n.right),t.put(","),t.node(n.left),t.put(")");break;default:t.put("f."),t.put(cg[n.operator]),t.put("("),t.node(n.left),t.put(","),t.node(n.right),t.put(")")}},walk(n,t){t.node(n.left),t.node(n.right)},stringify(n,t){t.node(n.left),/^[a-z]/i.test(n.operator)?(t.put(" "),t.put(n.operator),t.put(" ")):t.put(n.operator),t.node(n.right)}}});var pg=ke((XC,hg)=>{hg.exports={build(n,t){return{type:"Block",definitions:n,body:t}},suggest(n,t){n.body===null&&t.queryRoot(n.range[1])},compile(n,t){n.definitions.length?t.createScope(()=>{t.put("(()=>{"),t.list(n.definitions),t.put("return "),t.nodeOrCurrent(n.body),t.put("})()")},(i,a)=>i+a+";"):n.body&&n.body.type==="Object"?(t.put("("),t.nodeOrCurrent(n.body),t.put(")")):t.nodeOrCurrent(n.body)},walk(n,t){t.list(n.definitions),t.nodeOrNothing(n.body)},stringify(n,t){t.list(n.definitions),t.nodeOrNothing(n.body)}}});var vg=ke((eS,mg)=>{var gg={"":"cmp",N:"cmpNatural",A:"cmpAnalytical",NA:"cmpNaturalAnalytical",AN:"cmpNaturalAnalytical"};mg.exports={build(n,t){return{type:"Compare",query:n,order:t}},compile(n,t){n.order.startsWith("desc")&&t.put("-"),t.createScope(()=>{let i=gg[n.order.slice(3+n.order.startsWith("desc"))]||gg[""];t.put("f."+i+"((_q=current=>("),t.node(n.query),t.put("))(a),_q(b))")},(i,a)=>i+a+",")},walk(n,t){t.node(n.query)},stringify(n,t){t.node(n.query),t.put(" "),t.put(n.order)}}});var bg=ke((tS,yg)=>{yg.exports={build(n,t,i){return{type:"Conditional",test:n,consequent:t,alternate:i}},compile(n,t){t.put("f.bool("),t.node(n.test),t.scope.captureCurrent.disabled=!0,t.put(")?"),t.node(n.consequent),t.put(":"),t.node(n.alternate),t.scope.captureCurrent.disabled=!1},walk(n,t){t.node(n.test),t.node(n.consequent),t.node(n.alternate)},stringify(n,t){t.node(n.test),t.put("?"),t.node(n.consequent),t.put(":"),t.node(n.alternate)}}});var xg=ke((rS,wg)=>{wg.exports={build(){return{type:"Context"}},compile(n,t){t.put("context")},walk(){},stringify(n,t){t.put("#")}}});var Cg=ke((nS,kg)=>{kg.exports={build(){return{type:"Current"}},suggest(n,t){n.range&&t.range(n.range,"var")},compile(n,t){t.put("current")},walk(){},stringify(n,t){t.put("$")}}});var Lg=ke((iS,Sg)=>{Sg.exports={build(){return{type:"Data"}},compile(n,t){t.put("data")},walk(){},stringify(n,t){t.put("@")}}});var Mg=ke((oS,Tg)=>{Tg.exports={build(n){return{type:"Declarator",name:n}},compile(n,t){n.name&&t.put("$"+n.name)},walk(){},stringify(n,t){t.put(n.name?"$"+n.name:"$")}}});var Ss=ke((sS,Eg)=>{Eg.exports={build(n,t){return{type:"GetProperty",value:n,property:t}},suggest(n,t){t.range(n.property.range,"path",n.value||void 0,!n.value),n.value===null&&t.range(n.property.range,"var"),n.range&&n.value===null&&n.property.range[0]!==n.range[0]&&t.queryRoot(n.range[0])},compile(n,t){t.put("f.map("),t.nodeOrCurrent(n.value),t.put(","),n.property.type==="Identifier"?t.put(JSON.stringify(n.property.name)):t.node(n.property),t.put(")")},walk(n,t){t.nodeOrNothing(n.value),t.node(n.property)},stringify(n,t){t.nodeOrNothing(n.value)&&t.put("."),t.node(n.property)}}});var Ls=ke((aS,Ng)=>{Ng.exports={build(n){return{type:"Identifier",name:n}},compile(n,t){t.put(n.name)},walk(){},stringify(n,t){t.put(n.name)}}});var Ag=ke((lS,jg)=>{var Aw=Ss().build,Ow=Ls().build,Dw=["data","context","ctx","array","idx","index"];jg.exports={build(n,t){return{type:"Definition",declarator:n,value:t}},suggest(n,t){n.value===null&&t.range(n.declarator.range,"path")},compile(n,t){if(n.declarator.name===null){t.node(n.declarator),t.nodeOrCurrent(n.value),t.put(";");return}if(t.scope.own.includes(n.declarator.name)){t.error(`Identifier "$${n.declarator.name}" has already been declared`,n.declarator);return}if(Dw.includes(n.declarator.name)){t.error(`Identifier "$${n.declarator.name}" is reserved for future use`,n.declarator);return}t.put("const "),t.node(n.declarator),t.put("="),t.node(n.value||Aw(null,Ow(n.declarator.name))),t.put(";"),t.scope.push(n.declarator.name),t.scope.own.push(n.declarator.name)},walk(n,t){t.node(n.declarator),t.nodeOrNothing(n.value)},stringify(n,t){t.node(n.declarator),n.value!==null&&(t.put(":"),t.node(n.value)),t.put(";")}}});var Dg=ke((uS,Og)=>{Og.exports={build(n,t){return{type:"Filter",value:n,query:t}},compile(n,t){t.put("f.filter("),t.nodeOrCurrent(n.value),t.createScope(()=>{t.put(",current=>"),t.node(n.query)},(i,a)=>(t.put(")"),i+"("+a+",")),t.put(")")},walk(n,t){t.nodeOrNothing(n.value),t.node(n.query)},stringify(n,t){t.nodeOrNothing(n.value),t.put(".["),t.node(n.query),t.put("]")}}});var Pg=ke((cS,Ig)=>{Ig.exports={build(n,t,i){return{type:"Function",arguments:n,body:t,legacy:Boolean(i)}},compile(n,t){t.createScope(()=>{t.scope.arg1=!0,t.put("function(current){return "),t.node(n.body),t.put("}")},(i,a)=>i+a+",")},walk(n,t){t.node(n.body)},stringify(n,t){n.legacy?(t.put("<"),t.node(n.body),t.put(">")):(t.put("=>"),t.node(n.body))}}});var Rg=ke((fS,zg)=>{zg.exports={build(n){return{type:"Literal",value:n}},compile(n,t){t.put(typeof n.value=="string"?JSON.stringify(n.value):String(n.value))},walk(){},stringify(n,t){t.put(typeof n.value=="string"?JSON.stringify(n.value):String(n.value))}}});var Hg=ke((dS,_g)=>{_g.exports={build(n,t){return{type:"Map",value:n,query:t}},compile(n,t){t.put("f.map("),t.nodeOrCurrent(n.value),t.createScope(()=>{t.put(",current=>"),t.node(n.query)},(i,a)=>(t.put(")"),i+"("+a+",")),t.put(")")},walk(n,t){t.nodeOrNothing(n.value),t.node(n.query)},stringify(n,t){t.nodeOrNothing(n.value),t.put(".("),t.node(n.query),t.put(")")}}});var Bg=ke((hS,Fg)=>{Fg.exports={build(n,t){return{type:"MapRecursive",value:n,query:t}},compile(n,t){t.put("f.mapRecursive("),t.nodeOrCurrent(n.value),t.createScope(()=>{t.put(",current=>"),t.node(n.query)},(i,a)=>(t.put(")"),i+"("+a+",")),t.put(")")},walk(n,t){t.nodeOrNothing(n.value),t.node(n.query)},stringify(n,t){t.nodeOrNothing(n.value),t.put(".."),t.isSimpleGetPropertyQuery(n.query)||t.isSimpleMethodCallQuery(n.query)?t.node(n.query):(t.put("("),t.node(n.query),t.put(")"))}}});var qg=ke((pS,Wg)=>{Wg.exports={build(n,t){return{type:"Method",reference:n,arguments:t}},suggest(n,t){n.arguments.length===0&&t.queryRoot(n.range[1]-1)},compile(n,t,i){t.tolerant&&t.put("(typeof "),n.reference.type==="Identifier"&&t.put("m."),t.node(n.reference),t.tolerant&&(t.put('==="function"?'),n.reference.type==="Identifier"&&t.put("m."),t.node(n.reference)),t.put("("),t.nodeOrCurrent(i),n.arguments.length&&(t.put(","),t.list(n.arguments,",")),t.put(")"),t.tolerant&&t.put(":undefined)")},walk(n,t){t.node(n.reference),t.list(n.arguments)},stringify(n,t){t.node(n.reference),t.put("("),t.list(n.arguments,","),t.put(")")}}});var Ug=ke((gS,$g)=>{$g.exports={build(n,t){return{type:"MethodCall",value:n,method:t}},compile(n,t){t.node(n.method,n.value)},walk(n,t){t.nodeOrNothing(n.value),t.node(n.method)},stringify(n,t){t.nodeOrNothing(n.value)&&t.put("."),t.node(n.method)}}});var Gg=ke((mS,Vg)=>{Vg.exports={build(n){return{type:"Object",properties:n}},suggest(n,t){n.properties.length===0&&t.queryRoot(n.range[0]+1,n.range[1]-1)},compile(n,t){t.put("{"),t.list(n.properties,","),t.put("}")},walk(n,t){t.list(n.properties)},stringify(n,t){t.put("{"),t.list(n.properties,","),t.put("}")}}});var Kg=ke((vS,Yg)=>{var Iw=Ss().build,Pw=Ls().build,zw=new Set(["Literal","Identifier","Reference","Current"]);Yg.exports={build(n,t){return{type:"ObjectEntry",key:n,value:t}},suggest(n,t){if(n.value===null)switch(n.key.type){case"Identifier":t.range(n.range,"path"),t.range(n.range,"var");break;case"Current":case"Reference":t.range(n.range,"var");break}},compile(n,t){let i=n.value;switch(n.key.type){case"Current":return;case"Literal":t.node(n.key);break;case"Identifier":t.node(n.key),i=i||Iw(null,Pw(n.key.name));break;case"Reference":t.node(n.key.name),i=i||n.key;break;default:t.put("["),t.node(n.key),t.put("]")}t.put(":"),t.node(i)},walk(n,t){t.node(n.key),t.nodeOrNothing(n.value)},stringify(n,t){if(zw.has(n.key.type)){if(t.node(n.key),n.value===null)return}else t.put("["),t.node(n.key),t.put("]");t.put(":"),t.node(n.value)}}});var Zg=ke((yS,Qg)=>{Qg.exports={build(n){return{type:"Parentheses",body:n}},compile(n,t){t.put("("),t.node(n.body),t.put(")")},walk(n,t){t.node(n.body)},stringify(n,t){t.put("("),t.node(n.body),t.put(")")}}});var Xg=ke((bS,Jg)=>{Jg.exports={build(n,t){return{type:"Pick",value:n,getter:t}},suggest(n,t){if(n.getter===null){let i=n.range[1]-1;t.range([i,i],"key",n.value,!1),t.queryRoot(i)}else t.range(n.getter.range,"key",n.value,!1)},compile(n,t){t.put("f.pick("),t.node(n.value),n.getter&&(t.put(","),t.node(n.getter)),t.put(")")},walk(n,t){t.node(n.value),n.getter!==null&&t.node(n.getter)},stringify(n,t){t.node(n.value),t.put("["),n.getter!==null&&t.node(n.getter),t.put("]")}}});var tm=ke((wS,em)=>{em.exports={build(n,t){return{type:"Pipeline",left:n,right:t}},compile(n,t){t.createScope(()=>{t.put("(current=>("),t.node(n.right),t.put("))")},(i,a)=>i+a+";"),t.put("("),t.node(n.left),t.put(")")},walk(n,t){t.node(n.left),t.node(n.right)},stringify(n,t){t.node(n.left),t.put("|"),t.node(n.right)}}});var nm=ke((xS,rm)=>{rm.exports={build(n){return{type:"Reference",name:n}},suggest(n,t){n.range&&t.range(n.range,"var")},compile(n,t){if(!t.scope.includes(n.name.name)&&t.tolerant){t.put("(typeof $"),t.node(n.name),t.put('!=="undefined"?$'),t.node(n.name),t.put(":undefined)");return}t.put("$"),t.node(n.name)},walk(n,t){t.node(n.name)},stringify(n,t){t.put("$"),t.node(n.name)}}});var om=ke((kS,im)=>{im.exports={build(n,t){return{type:"SliceNotation",value:n,arguments:t}},compile(n,t){t.put("f.slice("),t.nodeOrCurrent(n.value),n.arguments.slice(0,3).forEach(i=>{t.put(","),i?t.node(i):t.put("undefined")}),t.put(")")},walk(n,t){t.nodeOrNothing(n.value);for(let i of n.arguments.slice(0,3))i&&t.node(i)},stringify(n,t){let[i,a,u]=n.arguments;t.nodeOrNothing(n.value),t.put("["),i&&t.node(i),t.put(":"),a&&t.node(a),u&&(t.put(":"),t.node(u)),t.put("]")}}});var am=ke((CS,sm)=>{sm.exports={build(n){return{type:"SortingFunction",compares:n}},compile(n,t){t.put("(a, b)=>{let _q;return "),t.list(n.compares,"||"),t.put("||0}")},walk(n,t){t.list(n.compares)},stringify(n,t){t.list(n.compares,",")}}});var um=ke((SS,lm)=>{lm.exports={build(n,t=!1){return{type:"Spread",query:n,array:t}},suggest(n,t){n.query===null&&t.queryRoot(n.range[1])},compile(n,t){if(n.array){t.put("...f.ensureArray("),t.nodeOrCurrent(n.query),t.put(")");return}t.put("..."),t.nodeOrCurrent(n.query)},walk(n,t){t.nodeOrNothing(n.query)},stringify(n,t){t.put("..."),t.nodeOrNothing(n.query)}}});var dm=ke((LS,fm)=>{fm.exports={build(n){return{type:"Template",values:n}},suggest(n,t){for(let[i,a]of Object.entries(n.values))a===null&&t.queryRoot(n.values[i-1].range[1])},compile(n,t){for(let[i,a]of Object.entries(n.values))a!==null&&(i!=="0"&&t.put("+"),i%2==0?t.put('"'+cm(a.value,Rw)+'"'):(t.put("("),t.node(a),t.put(")")))},walk(n,t){for(let i of n.values)i!==null&&t.node(i)},stringify(n,t){let i=String(n.values.length-1);for(let[a,u]of Object.entries(n.values))a%2==0?(t.put(a==="0"?"`":"}"),t.put(cm(u.value,_w)),t.put(a===i?"`":"${")):u!==null&&t.node(u)}};var Rw=new Map([["\b","\\b"],[`
`,"\\n"],["\r","\\r"],["\f","\\f"],["	","\\t"],["\v","\\v"],["\u2028","\\u2028"],["\u2029","\\u2029"],["\\","\\\\"],['"','\\"']]),_w=new Map([["\b","\\b"],["\f","\\f"],["	","\\t"],["\v","\\v"],["\\","\\\\"],["$","\\$"]]);function cm(n,t){let i="";for(let a=0;a<n.length;a++)i+=t.get(n[a])||n[a];return i}});var pm=ke((TS,hm)=>{hm.exports={build(n,t){return{type:"Unary",operator:n,argument:t}},compile(n,t){switch(n.operator){case"no":case"not":t.put("!f.bool("),t.node(n.argument),t.put(")");break;case"+":case"-":t.put(n.operator),t.node(n.argument);break;default:t.error('Unknown operator "'+n.operator+'"',n)}},walk(n,t){t.node(n.argument)},stringify(n,t){t.put(n.operator),n.operator!=="-"&&n.operator!=="+"&&t.put(" "),t.node(n.argument)}}});var ho=ke((MS,vm)=>{var gm={Arg1:ag(),Array:ug(),Binary:dg(),Block:pg(),Compare:vg(),Conditional:bg(),Context:xg(),Current:Cg(),Data:Lg(),Declarator:Mg(),Definition:Ag(),Filter:Dg(),Function:Pg(),GetProperty:Ss(),Identifier:Ls(),Literal:Rg(),Map:Hg(),MapRecursive:Bg(),Method:qg(),MethodCall:Ug(),Object:Gg(),ObjectEntry:Kg(),Parentheses:Zg(),Pick:Xg(),Pipeline:tm(),Reference:nm(),SliceNotation:om(),SortingFunction:am(),Spread:um(),Template:dm(),Unary:pm()},fo=n=>new Map(Object.entries(gm).map(([t,i])=>[t,i[n]]).filter(([,t])=>typeof t=="function")),mm={};fo("build").forEach((n,t)=>mm[t]=n);vm.exports={nodes:gm,build:mm,compile:fo("compile"),walk:fo("walk"),stringify:fo("stringify"),suggest:fo("suggest")}});var ql=ke((ES,bm)=>{var ym=ho().walk;bm.exports=function(t,i){function a(h){if(ym.has(h.type))c(h),ym.get(h.type)(h,u),d(h);else throw new Error("Unknown node type `"+h.type+"`")}let u={node:a,nodeOrNothing(h){h!==null&&a(h)},list(h){h.forEach(a)}},c=()=>{},d=()=>{};typeof i=="function"&&(i={enter:i}),i&&(typeof i.enter=="function"&&(c=i.enter),typeof i.leave=="function"&&(d=i.leave)),a(t)}});var Cm=ke((NS,km)=>{var wm=ho().suggest,Hw=ql();function xm(n,t){return t>=0&&t<n.length&&/[a-zA-Z_$0-9]/.test(n[t])}function $l(n,t){let i=n.charCodeAt(t);return i===9||i===10||i===13||i===32}function Fw(n,t,i){for(;t<i;t++)if(!$l(n,t))return!1;return!0}function Bw(n,t,i,a,u){let c=[];for(let d=0;d<a.length;d++){let[h,g]=a[d];if(h>=t)break;h<n||(h===n?c.push(n,n):c.push(n,h),n=g)}return(n!==i.length||!u)&&c.push(n,t),c}function Ww(n,t,i,a){let u=[];for(let c=0;c<n.length;c++){let[d,h,g,b]=n[c];if(Fw(t,d,h)){for(;d>=0&&$l(t,d-1);)d--;for(;h<t.length&&$l(t,h);)h++;if(xm(t,d-1)){if(d===h)continue;d++}if(xm(t,h)){if(d===h)continue;h--}}let x=Bw(d,h,t,i,a);for(let C=0;C<x.length;C+=2)u.push([x[C],x[C+1],g,b])}return u}function qw(n){let t=null,i=new Map,a=(c,d)=>{i.has(c)?i.get(c).push(d):i.set(c,[d])},u={range(c,d,h=t,g=!0){a(h,[...c,d,g]),g&&g!==!0&&a(g,[])},queryRoot(c,d=c){a(t,[c,d,"var",!0]),a(t,[c,d,"path",!0])}};return Hw(n,c=>{if(wm.has(c.type)){let d=t;t=c,wm.get(c.type)(c,u),t=d}}),i}km.exports=function(t,{ast:i,commentRanges:a}){let u=qw(i),c=a.length&&a[a.length-1][1]===t.length&&!/[\r\n]$/.test(t);for(let[d,h]of u)u.set(d,Ww(h,t,a,c));return u}});var Tm=ke((jS,Lm)=>{var Sm=ho().stringify;function $w(n){return!(n.type!=="GetProperty"||n.value&&n.value.type!=="Current"||n.property.type!=="Identifier")}function Uw(n){return!(n.type!=="MethodCall"||n.value&&n.value.type!=="Current")}Lm.exports=function(t){function i(c){if(Sm.has(c.type))Sm.get(c.type)(c,u);else throw new Error("Unknown node type `"+c.type+"`")}let a=[],u={isSimpleGetPropertyQuery:$w,isSimpleMethodCallQuery:Uw,put(c){a.push(c)},node:i,nodeOrNothing(c){if(c!==null)return i(c),!0},list(c,d){if(!d){c.forEach(i);return}c.forEach((h,g)=>{g>0&&u.put(d),i(h)})}};return i(t),a.join("")}});var Em=ke((AS,Mm)=>{Mm.exports=function(t,i){let a=Object.create(SyntaxError.prototype),u=new Error;return a.name=t,a.message=i,Object.defineProperty(a,"stack",{get:function(){return(u.stack||"").replace(/^(.+\n){1,3}/,t+": "+i+`
`)}}),a}});var Am=ke((OS,jm)=>{var Vw=Em(),Nm=ho().compile;jm.exports=function(t,i=!1,a=null){function u(T){let M;return b.has(T)?M=b.get(T):(g.push(M="s"+g.length),b.set(T,M)),M}function c(T,M,N,A,j){let D=[T,M,JSON.stringify(N)];if(N==="var"){if(!L.scope.length)return;D.push(JSON.stringify(L.scope))}else A||g.push(A="s"+g.length),D.push(A),j&&D.push(j);return C.push(D),A}function d(T,M){let N=L.scope,A=S.length;if(L.scope=L.scope.slice(),L.scope.own=[],L.scope.firstCurrent=null,L.scope.captureCurrent=[],L.scope.arg1=N.arg1||!1,T(),L.scope.captureCurrent.length){let j=L.scope.captureCurrent.reduce((P,R)=>c(...R,P),void 0),D="stat("+j+",current)";L.scope.firstCurrent?S[L.scope.firstCurrent]=D:S[A]=M(S[A],D)}L.scope=N}function h(T,M){let N=!1;if(a!==null){if(a.has(T))for(let[A,j,D,P]of a.get(T))D==="var"?c(A,j,D):P===!0?L.scope.captureCurrent.push([A,j,D]):(N||(N=u(T),S.push("stat("+N+",")),D&&c(A,j,D,N,P&&u(P)));T.type==="Current"&&L.scope.firstCurrent===null&&L.scope.captureCurrent.disabled!==!0&&(L.scope.firstCurrent=S.length)}if(Nm.has(T.type))Nm.get(T.type)(T,L,M);else throw new Error("Unknown node type `"+T.type+"`");N&&S.push(")")}let g=[],b=new WeakMap,x=[],C=[],S=["const current=data;",{toString(){return x.length>0?"let "+x+`;
`:""}},{toString(){return g.length===0?"":[`const stat=(s,v)=>(s.add(v),v);
`,"const "+g.map(T=>T+"=new Set()")+`;
`].join("")}},"return "],L={tolerant:i,scope:[],createScope:d,error:(T,M)=>{let N=new SyntaxError(T);if(M&&M.range&&(N.details={loc:{range:M.range}}),!i)throw N},allocateVar(){let T="tmp"+x.length;return x.push(T),T},put:T=>S.push(T),node:h,nodeOrNothing(T,M){T&&h(T,M)},nodeOrCurrent(T,M){h(T||{type:"Current"},M)},list(T,M,N){T.forEach((A,j)=>{j>0&&S.push(M),h(A,N)})}};d(()=>h(t),(T,M)=>(S.push(")"),"("+M+","+T)),a!==null&&S.push(`
,[`+C.map(T=>"["+T+"]")+"]");try{return new Function("f","m","data","context",S.join(""))}catch(T){let M=Vw("SyntaxError","Jora query compilation error"),N=S.join("");throw M.compiledSource=N,M}}});var Ts=ke((DS,Dm)=>{var Om=Object.hasOwnProperty,Gw=Object.prototype.toString;function Yw(n,t){return t!==void 0&&(Array.isArray(t)?t.forEach(i=>n.add(i)):n.add(t)),n}function Kw(n,t){return n&&Om.call(n,t)?n[t]:void 0}function Qw(n){return n!==null&&typeof n=="object"&&n.constructor===Object}function Zw(n){return Gw.call(n)==="[object RegExp]"}function Jw(n){return n&&Om.call(n,"length")}Dm.exports={addToSet:Yw,getPropertyValue:Kw,isPlainObject:Qw,isRegExp:Zw,isArrayLike:Jw}});var Hm=ke((IS,_m)=>{var Im=0,Ms=1,Es=2,Ns=3,Ul=4,Pm=["eof","ws","delim","number","word"],po=!1,zt=(n,t)=>t<n.length?n.charCodeAt(t):0,js=n=>n===43||n===45,wn=n=>n>=48&&n<=57,Vl=n=>n===9||n===10||n===12||n===13||n===32,Gl=n=>n>32&&n<256&&(n<65||n>90)&&(n<97||n>122)&&(n<48||n>57)&&n!==43&&n!==45||n===8470;function Xw(n,t,i){return js(n)?wn(t)?2:t===46&&wn(i)?3:0:wn(n)?1:0}function Yl(n,t){for(;wn(zt(n,t));)t++;return t}function e0(n,t,i){let a=zt(n,t);if(js(a)&&(a=zt(n,t+=1)),wn(a)&&(t=Yl(n,t+1),a=zt(n,t)),a===46&&wn(zt(n,t+1))){if(i)return t;let u=t+2;if(u=Yl(n,u),zt(n,u)===46)return t;t=u}if(a=zt(n,t),a===69||a===101){let u=0;a=zt(n,t+1),js(a)&&(u=1,a=zt(n,t+2)),wn(a)&&(t=Yl(n,t+1+u+1))}return t}function zm(n,t,i,a){if(t>=n.length)return Im;let u=zt(n,t);if(Vl(u)){let g=t+1;for(;Vl(zt(n,g));)g++;return Ms|g-t<<3}if(Gl(u)||a&&js(u)){let g=t+1,b=u;do u=b,b=zt(n,g++);while(Gl(b)||b===u);return Es|g-t-1<<3}let c=zt(n,t+1),d=zt(n,t+2);if(Xw(u,c,d))return Ns|e0(n,t,i)-t<<3;let h=t;do u=c,c=d,d=zt(n,3+h++);while(h<n.length&&!Vl(u)&&!Gl(u)&&!wn(u));return Ul|h-t<<3}function Rm(n,t,i){let a=0,u=0,c=!1,d=!1,h=0,g=0,b=!0;do{let x=zm(n,a,c,d),C=zm(t,u,c,d),S=x&7,L=x>>3,T=C&7,M=C>>3;if(po&&console.log({typeA:Pm[S],lenA:L,substrA:n.substr(a,L),typeB:Pm[T],lenB:M,substrB:t.substr(u,M)}),S!==T&&b){if((S===Ms||S===Es)&&(T===Ns||T===Ul)){h=1,g=S,a+=L;continue}if((T===Ms||T===Es)&&(S===Ns||S===Ul)){h=-1,g=T,u+=M;continue}}if(b=!1,S!==T)return S<T?-1:1;if(c=!1,d=!1,S===Im)return h;let N=L<M?L:M,A=L-M,j=0;for(;j<N;j++){let D=n[a+j],P=t[u+j];if(D!==P){A=D<P?-1:1;break}}if(S===Ms||S===Es)A!==0&&(h===0||S>g)&&(g=S,h=A),c=n[a+L-1]===".";else if(S===Ns){if(d=!0,A!==0){let D=n.substr(a,L)-t.substr(u,M);if(D!==0)return i?-D:D;if(h===0||S>g){let P=zt(n,a),R=zt(t,u),_=P===45?-1:1;g=S,h=P!==R&&(P===45||R===43)?-1:P!==R&&(P===43||R===45)?1:(L!==M?L<M:A<0)?-_:_,i&&(h=-h)}}}else{if(A!==0){if(j<N){let D=n[a+j].toLowerCase(),P=t[u+j].toLowerCase();if(D!==P)return D<P?-1:1}return A}c=n[a+L-1]==="."}a+=L,u+=M}while(!0)}function t0(n,t){let i=typeof n,a=typeof t,u=0;return po&&console.log("Compare",n,t),(i==="number"||i==="string")&&(a==="number"||a==="string")&&(u=Rm(String(n),String(t),!1)),po&&console.log("Result:",u),u}function r0(n,t){let i=typeof n,a=typeof t,u=0;return po&&console.log("Compare",n,t),(i==="number"||i==="string")&&(a==="number"||a==="string")&&(u=Rm(String(n),String(t),!0)),po&&console.log("Result:",u),u}_m.exports={naturalCompare:t0,naturalAnalyticalCompare:r0}});var Ql=ke((PS,Bm)=>{var{addToSet:Kl,getPropertyValue:n0,isPlainObject:Fm,isRegExp:i0,isArrayLike:o0}=Ts(),{naturalCompare:s0,naturalAnalyticalCompare:a0}=Hm(),l0=1,u0=2,mi=3,go=4,c0=5,f0=6,d0=7;function xn(n){switch(typeof n){case"boolean":return l0;case"number":return n!==n?u0:mi;case"string":return go;case"object":return n===null?c0:f0;default:return d0}}Bm.exports=Object.freeze({ensureArray(n){return Array.isArray(n)?n:[n]},bool(n){if(Array.isArray(n))return n.length>0;if(Fm(n)){for(let t in n)if(hasOwnProperty.call(n,t))return!0;return!1}return Boolean(n)},add(n,t){return Array.isArray(n)||Array.isArray(t)?[...new Set([].concat(n,t))]:n+t},sub(n,t){if(Array.isArray(n)){let i=new Set(n);return Array.isArray(t)?t.forEach(a=>i.delete(a)):i.delete(t),[...i]}return n-t},mul(n,t){return n*t},div(n,t){return n/t},mod(n,t){return n%t},eq(n,t){return Object.is(n,t)},ne(n,t){return!Object.is(n,t)},lt(n,t){return n<t},lte(n,t){return n<=t},gt(n,t){return n>t},gte(n,t){return n>=t},in(n,t){return Fm(t)?hasOwnProperty.call(t,n):t&&typeof t.indexOf=="function"?t.indexOf(n)!==-1:!1},cmp(n,t){let i=xn(n),a=xn(t);return i!==a?i<a?-1:1:n<t?-1:n>t?1:0},cmpAnalytical(n,t){let i=xn(n),a=xn(t);return i!==a?i<a?-1:1:i===mi?t-n:n<t?-1:n>t?1:0},cmpNatural(n,t){let i=xn(n),a=xn(t);return(i===mi||i===go)&&(a===mi||a===go)?s0(n,t):i!==a?i<a?-1:1:n<t?-1:n>t?1:0},cmpNaturalAnalytical(n,t){let i=xn(n),a=xn(t);return(i===mi||i===go)&&(a===mi||a===go)?a0(n,t,!0):i!==a?i<a?-1:1:n<t?-1:n>t?1:0},match(n,t){return typeof t=="function"?this.some(n,t):i0(t)?this.some(n,t.test.bind(t)):t==null},pick(n,t=()=>!0){if(!!n){if(typeof t=="function"){if(Array.isArray(n)||typeof n=="string"){for(let i=0;i<n.length;i++)if(t(n[i],i))return n[i]}for(let i in n)if(hasOwnProperty.call(n,i)&&t(n[i],i))return n[i];return}return Array.isArray(n)||typeof n=="string"?isFinite(t)?n[t<0?n.length+Number(t):Number(t)||0]:void 0:hasOwnProperty.call(n,t)?n[t]:void 0}},map(n,t){let i=typeof t=="function"?t:a=>n0(a,t);return Array.isArray(n)?[...n.reduce((a,u)=>Kl(a,i(u)),new Set)]:n!==void 0?i(n):n},mapRecursive(n,t){let i=new Set;return Kl(i,this.map(n,t)),i.forEach(a=>Kl(i,this.map(a,t))),[...i]},some(n,t){return Array.isArray(n)?n.some(i=>this.bool(t(i))):this.bool(t(n))},filter(n,t){return Array.isArray(n)?n.filter(i=>this.bool(t(i))):this.bool(t(n))?n:void 0},slice(n,t=0,i=n&&n.length,a=1){if(!o0(n))return[];if(t=parseInt(t,10)||0,i=parseInt(i,10)||n.length,a=parseInt(a,10)||1,a!==1){let u=[];t=t<0?Math.max(0,n.length+t):Math.min(n.length,t),i=i<0?Math.max(0,n.length+i):Math.min(n.length,i);for(let c=a>0?t:i-1;c>=t&&c<i;c+=a)u.push(n[c]);return u}return typeof n=="string"?n.slice(t,i):Array.prototype.slice.call(n,t,i)}})});var $m=ke((zS,qm)=>{var mo=Ql(),{addToSet:h0,isPlainObject:p0}=Ts();function g0(){}function m0(n){return n}function Wm(n){return{matched:n.slice(),start:n.index,end:n.index+n[0].length,input:n.input,groups:n.groups||null}}qm.exports=Object.freeze({bool:mo.bool,filter:mo.filter,map:mo.map,pick:mo.pick,keys(n){return Object.keys(n||{})},values(n){let t=new Set;for(let i in n)hasOwnProperty.call(n,i)&&h0(t,n[i]);return[...t]},entries(n){let t=[];for(let i in n)hasOwnProperty.call(n,i)&&t.push({key:i,value:n[i]});return t},fromEntries(n){let t={};return Array.isArray(n)&&n.forEach(i=>{i&&(t[i.key]=i.value)}),t},size(n){return p0(n)?Object.keys(n).length:n&&n.length||0},sort(n,t){let i;return Array.isArray(n)?(typeof t=="function"&&(i=t.length===2?t:(a,u)=>{if(a=t(a),u=t(u),Array.isArray(a)&&Array.isArray(u)){if(a.length!==u.length)return a.length<u.length?-1:1;for(let c=0;c<a.length;c++){if(a[c]<u[c])return-1;if(a[c]>u[c])return 1}return 0}return a<u?-1:a>u}),n.slice().sort(i)):n},reverse(n){return Array.isArray(n)?n.slice().reverse():n},slice(n,t,i){return mo.slice(n,t,i)},group(n,t,i){typeof t!="function"&&(t=g0),typeof i!="function"&&(i=m0),Array.isArray(n)||(n=[n]);let a=new Map,u=[];return n.forEach(c=>{let d=t(c);Array.isArray(d)||(d=[d]),d.forEach(h=>{a.has(h)?a.get(h).add(i(c)):a.set(h,new Set([i(c)]))})}),a.forEach((c,d)=>u.push({key:d,value:[...c]})),u},split(n,t){return String(n).split(t)},join(n,t){return Array.isArray(n)?n.join(t):String(n)},match(n,t,i){let a=String(n);if(i){let c=[],d=new RegExp(t,t.flags+"g"),h;for(;h=d.exec(a);)c.push(Wm(h));return c}let u=String(n).match(t);return u&&Wm(u)},reduce(n,t,i=void 0){return Array.isArray(n)?i!==void 0?n.reduce((a,u)=>t(u,a),i):n.reduce((a,u)=>t(u,a)):t(n,i)}})});var Ym=ke((RS,Gm)=>{var{addToSet:Um,isPlainObject:Zl}=Ts(),v0={path:"property",key:"value",value:"value","in-value":"value","value-subset":"value",var:"variable"};function y0(n,t,i){let a=new Set,u=c=>{switch(typeof c){case"string":a.add(JSON.stringify(c));break;case"number":a.add(String(c));break}};switch(n){case"":case"path":t.forEach(c=>{Array.isArray(c)?c.forEach(d=>{Zl(d)&&Um(a,Object.keys(d))}):Zl(c)&&Um(a,Object.keys(c))});break;case"key":t.forEach(c=>{c!==null&&typeof c=="object"&&!Array.isArray(c)&&Object.keys(c).forEach(u)});break;case"value":t.forEach(c=>{Array.isArray(c)?c.forEach(u):u(c)});break;case"in-value":t.forEach(c=>{Array.isArray(c)?c.forEach(u):Zl(c)?Object.keys(c).forEach(u):u(c)});break;case"var":t.forEach(c=>{a.add("$"+c)});break;case"value-subset":t.forEach(c=>{Array.isArray(c)?c.forEach(u):u(c)}),i.forEach(c=>{c.forEach(d=>{(typeof d=="string"||typeof d=="number")&&a.delete(JSON.stringify(d))})});break}return[...a]}function Vm(n,t,i,a){let u=[];for(let[c,d,h,g,b=null]of i)if(t>=c&&t<=d&&(a||g.size||g.length)){let x=n.substring(c,d);/\S/.test(x)||(x="",c=d=t),u.push({context:h,current:x,from:c,to:d,values:g,related:b})}return u}Gm.exports=(n,t)=>({stat(i,a){let u=Vm(n,i,t,a);return u.forEach(c=>{c.values=[...c.values]}),u.length?u:null},suggestion(i,a){let u=Vm(n,i,t,a),c=[];return u.forEach(d=>{let{context:h,current:g,from:b,to:x,values:C,related:S}=d;c.push(...y0(h,C,S).map(L=>({current:g,type:v0[h],value:L,from:b,to:x})))}),c.length?c:null}})});var Jl=ke((_S,tv)=>{var{version:b0}=ig(),{tokenize:w0,parse:Km}=og(),Qm=Cm(),x0=ql(),Zm=Tm(),Jm=Am(),vo=Ql(),As=$m(),Xm=Ym(),k0=new Map,C0=new Map,S0=new Map,L0=new Map;function T0(n,t){console.log(`[${n}]`),typeof t=="string"?console.log(t):t!==void 0&&console.dir(t,{depth:null}),console.log()}function ev(n,t,i,a){a=typeof a=="function"?a:Boolean(a)?T0:!1,a&&(a("========================="),a("Compile query from source",n));let u=Km(n,i);a&&(a("AST",u.ast),a("Restored source",Zm(u.ast)));let c=t?Qm(n,u):null;if(a&&c){let h=C=>JSON.stringify(C).slice(1,-1),g=[].concat(...[...c.entries()].map(([C,S])=>S.map(L=>[C,...L]))),b=[],x=null;a("Suggest ranges",g.sort((C,S)=>C[1]-S[1]).map(([C,...S])=>{let[L,T,M,N]=S,A;if(!!M){if(L===b[0]&&T===b[1])A=" ".repeat(x.length);else{let j=h(n.slice(0,L)).length,D=h(n.substring(L,T)).length;b=S,x=" ".repeat(j)+(D?"~".repeat(D):"\\")+" "+L+":"+T,A=h(n)+`
`+x}return A+" ["+M+"] on "+C.type+(N===!0?" (current)":N?" & "+N.type:"")}}).join(`
`))}let d=Jm(u.ast,i,c);return a&&a("Compiled code",d.toString()),d}function M0(n,t){t=t||{};let i=Boolean(t.stat),a=Boolean(t.tolerant),u=t.methods?{...As,...t.methods}:As,c=i?a?L0:C0:a?S0:k0,d;return n=String(n),c.has(n)&&!t.debug?d=c.get(n):(d=ev(n,i,a,t.debug),c.set(n,d)),i?(h,g)=>Xm(n,d(vo,u,h,g)):(h,g)=>d(vo,u,h,g)}function E0(n){let t=new Map,i=new Map,a=new Map,u=new Map,c={...As,...n};return function(h,g){g=g||{};let b=Boolean(g.stat),x=Boolean(g.tolerant),C=b?x?u:i:x?a:t,S;if(h=String(h),C.has(h)&&!g.debug)S=C.get(h);else{let L=ev(h,b,x,g.debug);S=b?(T,M)=>Xm(h,L(vo,c,T,M)):(T,M)=>L(vo,c,T,M),C.set(h,S)}return S}}tv.exports=Object.assign(M0,{version:b0,buildin:vo,methods:As,setup:E0,syntax:{tokenize:w0,parse:Km,suggest:Qm,walk:x0,stringify:Zm,compile:Jm}})});function tf(n){let t=[].filter(i=>{if(typeof i=="function")return!0;console.warn('[discovery-cli] "prepare" module should return a function, but got '+typeof i)});t.length&&n.setPrepare((i,...a)=>{for(let u of t)i=u(i,...a)||i})}var rf=[];var nu={};$t(nu,{App:()=>_s,Widget:()=>Os,inspector:()=>vs,navButtons:()=>ks,pages:()=>lo,router:()=>Is,upload:()=>Ds,utils:()=>gv,views:()=>io});var ja=class{constructor(){this.listeners=Object.create(null)}on(t,i){return this.listeners[t]={callback:i,next:this.listeners[t]||null},this}once(t,i){return this.on(t,function a(...u){i.apply(this,u),this.off(t,a)})}off(t,i){let a=this.listeners[t]||null,u=null;for(;a!==null;){if(a.callback===i){a.callback=null,u?u.next=a.next:this.listeners[t]=a.next;break}u=a,a=a.next}return this}emit(t,...i){let a=this.listeners[t]||null,u=!1;for(;a!==null;)typeof a.callback=="function"&&a.callback.apply(this,i),u=!0,a=a.next;return u}},dn=ja;var hn=new WeakMap,Aa=class extends dn{constructor(){super();hn.set(this,new Map)}define(t,i){return hn.get(this).set(t,i),this.emit("define",t,i),i}isDefined(t){return hn.get(this).has(t)}get(t){return hn.get(this).get(t)}get names(){return[...hn.get(this).keys()]}get keys(){return hn.get(this).keys()}get values(){return hn.get(this).values()}get entries(){return hn.get(this).entries()}},pn=Aa;var nf=Object.freeze({}),{hasOwnProperty:of}=Object,Oa=new WeakMap,ai=new WeakMap,In=new WeakMap,sf=new WeakMap,w1=new Set(["view","when","data","whenData","postRender","className"]);function gn(n,t){return sf.set(n,t),n}function af(n,t,i){if(!i.has(n)){if(In.has(n))for(let a of In.get(n)){let u=t.children.find(c=>c.view===a);u?t=u:t.children.push(t={node:null,parent:t,view:a,children:[]})}if(ai.has(n)?t.children.push(t={node:n,parent:t,view:ai.get(n),children:[]}):Oa.has(n)&&t.children.push(t={node:n,parent:t,viewRoot:Oa.get(n),children:[]}),n.nodeType===1)for(let a=n.firstChild;a;a=a.nextSibling)af(a,t,i)}}function x1(n){return{name:"config-error",render:function(t,i){if(t.className="buildin-view-config-error",t.textContent=i.reason,"config"in i){let a=t.appendChild(document.createElement("span")),u=!1;a.className="toggle-config",a.textContent="show config...",a.addEventListener("click",()=>{if(u=!u,t.classList.toggle("expanded",u),a.textContent=u?"hide config...":"show config...",u){let c=document.createDocumentFragment();n.render(c,{view:"struct",expanded:1},i.config).then(()=>t.appendChild(c))}else t.lastChild.remove()})}},options:nf}}function lf(n,t,i,a,u,c){return!of.call(i,n)||i[n]===void 0||t.queryBool(i[n]===!0?"":i[n],a,u)?!0:(ai.set(c,{skipped:n,config:i,data:a,context:u}),!1)}function uf(n,t,i,a,u,c){let{tag:d}=n.options,h=d===!1||d===null?document.createDocumentFragment():document.createElement(d||"div"),g=Promise.resolve(n.render(h,a,u,c));return typeof i.postRender=="function"&&(g=g.then(()=>i.postRender(h,i,u,c))),g.then(function(){if(h.classList&&(n.name&&h.classList.add(`view-${n.name}`),i.className)){let x=i.className;typeof x=="function"&&(x=x(u,c)),typeof x=="string"&&(x=x.trim().split(/\s+/)),Array.isArray(x)&&h.classList.add(...x.map(C=>typeof C=="function"?C(u,c):C).filter(Boolean))}let b={config:i,props:a,data:u,context:c};if(h.nodeType!==Node.DOCUMENT_FRAGMENT_NODE)ai.set(h,b);else for(let x of h.childNodes)In.has(x)?In.get(x).unshift(b):In.set(x,[b]);t.replaceWith(h)})}function k1(n,t){return{name:t,normalizeConfig:n.normalizeConfig.bind(n),ensureValidConfig:n.ensureValidConfig.bind(n),composeConfig:n.composeConfig.bind(n),propsFromConfig:n.propsFromConfig.bind(n),render:n.render.bind(n),listLimit:n.listLimit.bind(n),renderList:n.renderList.bind(n),maybeMoreButtons:n.maybeMoreButtons.bind(n),renderMoreButton:n.renderMoreButton.bind(n)}}function cf(n,t,i,a){if(Array.isArray(t))return Promise.all(t.map(d=>cf.call(this,n,d,i,a)));let u=null;switch(typeof t.view){case"function":u={name:!1,options:nf,render:t.view};break;case"string":if(t.view==="render"){let{config:d="",context:h=""}=t;u={name:!1,options:{tag:!1},render:(g,b,x)=>{let C=d!==""?this.host.query(d,i,a):x,S=this.host.query(h,a,i);return this.render(g,C,x!==C?x:i,S)}}}else if(t.view.startsWith("preset/")){let d=t.view.substr(7);if(this.host.preset.isDefined(d))u={name:!1,options:{tag:!1},render:this.host.preset.get(d).render};else return this.host.preset.render(n,d,i,a)}else u=this.get(t.view);break}if(!u){let d=typeof t.view=="string"?"View `"+t.view+"` is not found":"Render is not a function";console.error(d,t),u=this.get("config-error")||this.defaultConfigErrorRenderer,t={reason:d,config:t}}n||(n=document.createDocumentFragment());let c=n.appendChild(document.createComment(""));return lf("when",this.host,t,i,a,c)?("data"in t?Promise.resolve().then(()=>this.host.query(t.data,i,a)):Promise.resolve(i)).then(h=>lf("whenData",this.host,t,h,a,c)?uf(u,c,t,this.propsFromConfig(t,h,a),h,a):null).catch(h=>{uf(this.get("alert-danger"),c,{postRender(g){g.style.whiteSpace="pre-wrap",g.style.fontFamily="monospace",g.style.fontSize="12px"}},{},h),console.error(h)}):Promise.resolve()}var Da=class extends pn{constructor(t){super();this.host=t,this.defaultConfigErrorRenderer=x1(this)}define(t,i,a){super.define(t,Object.freeze({name:t,options:Object.freeze({...a}),render:typeof i=="function"?i.bind(k1(this,t)):(u,c,d,h)=>this.render(u,i,d,h)}))}normalizeConfig(t){if(!t)return null;if(Array.isArray(t))return t.reduce((i,a)=>i.concat(this.normalizeConfig(a)||[]),[]);if(typeof t=="string"){let[,i,a,u]=t.match(/^(\S+?)([:{])((?:.|\s)+)$/)||[];if(i){if(a==="{")try{return gn(this.host.queryToConfig(i,a+u),t)}catch(c){return gn(this.badConfig(t,c),t)}return gn({view:i,data:u},t)}return gn({view:t},t)}else if(typeof t=="function")return gn({view:t},t);return t}badConfig(t,i){let a=i&&i.message||"Unknown error";return console.error(a,{config:t,error:i}),{view:this.defaultConfigErrorRenderer.render,reason:a,config:t}}ensureValidConfig(t){return Array.isArray(t)?t.map(i=>this.ensureValidConfig(i)):!t||!t.view?this.badConfig(t,new Error(t?"Option `view` is missed":"Config is not a valid value")):t}composeConfig(t,i){return t=this.normalizeConfig(t),i=this.normalizeConfig(i),t&&i?Array.isArray(t)?t.map(a=>gn({...a,...i},[a,i])):gn({...t,...i},[t,i]):t||i}propsFromConfig(t,i,a){let u=gn({},t);for(let c in t)if(of.call(t,c)&&!w1.has(c)){let d=t[c];u[c]=typeof d=="string"&&d.startsWith("=")?this.host.query(d.slice(1),i,a):d}return u}render(t,i,a,u){return cf.call(this,t,this.ensureValidConfig(this.normalizeConfig(i)),a,u)}listLimit(t,i){return t===!1?!1:!t||isNaN(t)?i:Math.max(parseInt(t,10),0)||i}renderList(t,i,a,u,c=0,d=!1,h){d===!1&&(d=a.length);let g=Promise.all(a.slice(c,c+d).map((b,x,C)=>this.render(t,i,b,{...u,index:c+x,array:a,sliceIndex:x,slice:C})));return this.maybeMoreButtons(h||t,null,a.length,c+d,d,(b,x)=>this.renderList(t,i,a,u,b,x,h)),g}maybeMoreButtons(t,i,a,u,c,d){let h=a-u,g=h<=0?null:document.createElement("span");return h>c&&this.renderMoreButton(g,"Show "+c+" more...",()=>d(u,c)),h>0&&this.renderMoreButton(g,"Show all the rest "+h+" items...",()=>d(u,Infinity)),g!==null&&(g.className="more-buttons",t.insertBefore(g,i)),g}renderMoreButton(t,i,a){let u=document.createElement("button");u.className="more-button",u.innerHTML=i,u.addEventListener("click",()=>{t.remove(),a()}),t.appendChild(u)}adoptFragment(t,i){let a=In.get(i);if(a)for(let u of t.childNodes)In.set(u,a)}setViewRoot(t,i,a){Oa.set(t,{name:i,...a})}getViewTree(t){let i=new Set(t||[]),a=[];return af(this.host.dom.container,{parent:null,children:a},i),a}getViewStackTrace(t){let{container:i}=this.host.dom;if(!i||!(t instanceof Node)||!i.contains(t))return null;let a=[],u=t;for(;u!==i;)ai.has(u)&&a.push(ai.get(u)),u=u.parentNode;return a.length===0?null:a.reverse()}getViewConfigTransitionTree(t){let i=sf.get(t)||[];return Array.isArray(i)||(i=[i]),{value:t,deps:i.map(this.getViewConfigTransitionTree,this)}}},ff=Da;var Ia=class extends pn{constructor(t){super();this.view=t}define(t,i){i=JSON.parse(JSON.stringify(i)),super.define(t,Object.freeze({name:t,render:(a,u,c,d)=>this.view.render(a,i,c,d),config:i}))}render(t,i,a,u){let c=this.get(i);if(!c){let d="Preset `"+i+"` is not found";console.error(d,i);let h=t.appendChild(document.createElement("div"));return h.style.cssText="color:#a00;border:1px dashed #a00;font-size:12px;padding:4px",h.innerText=d,Promise.resolve()}return c.render(t,null,a,u)}},df=Ia;var Pa=class{static setValue(t,i){if(!t.shouldPublish(i,t.value))return!1;let a=[],u=t.subscriber;for(t.value=i;u!==null;){let{callback:c,thisArg:d}=u;c!==null&&a.push(c.call(d,i,()=>t.unsubscribe(c,d))),u=u.subscriber}return a}constructor(t,i){this.value=t,this.shouldPublish=typeof i=="function"?i:this.shouldPublish,this.subscriber=null}get readonly(){let t=this;return{subscribe:this.subscribe.bind(this),subscribeSync:this.subscribeSync.bind(this),unsubscribe:this.unsubscribe.bind(this),get value(){return t.value}}}subscribe(t,i){return this.subscriber={callback:t,thisArg:i,subscriber:this.subscriber},()=>this.unsubscribe(t,i)}subscribeSync(t,i){let a=this.subscribe(t,i);return t.call(i,this.value,a),a}unsubscribe(t,i){let a=this,u=this.subscriber;for(;u!==null;){if(u.callback===t&&u.thisArg===i){u.callback=null,u.thisArg=null,a.subscriber=u.subscriber;break}a=u,u=u.subscriber}}shouldPublish(t,i){return t!==i}set(t){return this.constructor.setValue(this,t)!==!1}asyncSet(t){let i=this.constructor.setValue(this,t);return i===!1?Promise.resolve(!1):Promise.all(i).then(a=>a!==!1)}},Hr=Pa;var za={};$t(za,{createElement:()=>X,createFragment:()=>Pn,createText:()=>tr,passiveCaptureOptions:()=>mr,passiveSupported:()=>hf});function X(n,t,i){let a=document.createElement(n);typeof t=="string"&&(t={class:t});for(let u in t)if(hasOwnProperty.call(t,u)){if(t[u]===void 0)continue;u.startsWith("on")?a.addEventListener(u.substr(2),t[u]):a.setAttribute(u,t[u])}return Array.isArray(i)?i.forEach(u=>a.appendChild(u instanceof Node?u:tr(u))):typeof i=="string"&&(a.innerHTML=i),a}function tr(n){return document.createTextNode(String(n))}function Pn(...n){let t=document.createDocumentFragment();return n.forEach(i=>t.appendChild(i instanceof Node?i:tr(i))),t}var hf=(()=>{let n=!1;try{let t={get passive(){return n=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(t){}return n})(),mr=hf?Object.freeze({passive:!0,capture:!0}):!0;var pf=Symbol("config"),C1={name:"not-found",render:(n,{name:t})=>{n.style.cssText="color:#a00",n.innerText=`Page \`${t}\` not found`}},Ra=class extends pn{constructor(t){super();if(this.view=t.view,this.lastPage=null,this.lastPageId=null,this.pageOverscrolled=new Hr(!1),this.setPageOverscroll=()=>{},typeof IntersectionObserver=="function"){let i=X("div",{style:"position:absolute"}),a=t.dom.content,u=null,c=()=>{};u&&(u.disconnect(),u=null),a&&(u=new IntersectionObserver(d=>this.pageOverscrolled.set(!d[d.length-1].isIntersecting),{root:a}),this.setPageOverscroll=d=>{u.unobserve(i),c(),d&&(d.prepend(i),u.observe(i),c=this.pageOverscrolled.subscribeSync(h=>d.classList.toggle("page_overscrolled",h)))})}}define(t,i,a){super.define(t,Object.freeze({name:t,render:typeof i=="function"?i.bind(this.view):(u,c,d)=>this.view.render(u,i,c,d),options:Object.freeze({...a}),[pf]:i}))}render(t,i,a,u){let c=Date.now(),d=this.get(i),h;d||(d=this.get("not-found")||C1,a={name:i});let{reuseEl:g,init:b,keepScrollOffset:x=!0}=d.options||{},C=this.lastPage!==i,S=u&&u.id,L=this.lastPageId!==S,T=g&&!C?t:document.createElement("article"),M=t.parentNode;this.lastPage=i,this.lastPageId=S,T.id=t.id,T.classList.add("page","page-"+i),C&&typeof b=="function"&&b(T);try{h=d.render(T,a,u)}catch(N){h=this.view.render(T,"alert-danger",String(N)+" (see details in console)"),console.error(N)}return(C||L||!x)&&(M.scrollTop=0),T!==t&&(t.replaceWith(T),this.setPageOverscroll(T)),{pageEl:T,config:d[pf],renderState:Promise.resolve(h).then(()=>console.log("[Discovery] Page `"+d.name+"` rendered in "+(Date.now()-c)+"ms"))}}},gf=Ra;var io={};$t(io,{alerts:()=>mf,autoLink:()=>vf,badges:()=>bf,block:()=>xf,button:()=>kf,checkbox:()=>Tf,checkboxList:()=>Sf,column:()=>Mf,columns:()=>Ef,contentFilter:()=>jf,context:()=>Of,dropdown:()=>Pf,editors:()=>Vf,expand:()=>Yf,headers:()=>id,hstack:()=>sd,html:()=>ld,image:()=>cd,imagePreview:()=>dd,indicator:()=>pd,input:()=>vd,link:()=>bd,listItem:()=>wd,lists:()=>xd,markdown:()=>Cd,menu:()=>Ld,menuItem:()=>Md,navButton:()=>Nd,pageHeader:()=>Ad,popup:()=>zd,progressbar:()=>_d,section:()=>Fd,select:()=>Wd,signature:()=>nl,source:()=>Nh,struct:()=>xl,switch:()=>cp,tab:()=>bp,table:()=>hp,tableCell:()=>gp,tableRow:()=>pp,tabs:()=>vp,text:()=>xp,textMatch:()=>Tp,tocSection:()=>Mp,toggle:()=>Ep,toggleGroup:()=>Np,tree:()=>Op,treeItem:()=>Dp});var Vi=(n,t)=>({demo:{view:n,data:'"Alert"'},examples:[{title:"Variations",demo:t.map(i=>`${i}:"${i}"`)},{title:"Complex content",demo:{view:n,content:['h3:"Some header"','text:"Hello world!"']}}]});function mf(n){function t(i,a,u,c){let{content:d="text"}=a;return i.classList.add("view-alert"),n.view.render(i,d,u,c)}n.view.define("alert",t,{usage:Vi}),n.view.define("alert-success",t,{usage:Vi}),n.view.define("alert-danger",t,{usage:Vi}),n.view.define("alert-warning",t,{usage:Vi})}function vf(n){n.view.define("auto-link",function(t,i,a,u){let{content:c,fallback:d,href:h}=i;if(!a)return;let g=n.resolveValueLinks(a),b=typeof h=="function"?h:C=>C,x=g?b(g[0].href,a,u):null;return x?n.view.render(t,{view:"link",content:c},{...g[0],href:x},u):n.view.render(t,d||c||"text",a,u)},{tag:!1})}var _a=(n,t)=>({demo:{view:n,data:JSON.stringify(n)},examples:[{title:"Variations",demo:t.map(i=>`${i}:"${i}"`)},{title:"With color",demo:{view:n,data:{color:"rgba(237, 177, 9, 0.35)",text:"Colored badge"}}},{title:"With text color",demo:{view:n,data:{textColor:"red",text:"Badge with colored text"}}},{title:"With explicit dark-mode colors",demo:{view:n,data:{color:"blue",textColor:"white",darkColor:"yellow",darkTextColor:"black",text:"Badge with colored text"}}},{title:"As a link",demo:{view:n,data:{href:"#",text:"Click me!"}}},{title:"Prefix and postfix",demo:{view:n,data:{prefix:"prefix",postfix:"postfix",text:"text"}}},{title:"With a hint",demo:{view:n,data:{text:"text",hint:"hint"}}}]});function yf(n,t,i){if(!i)return;let a=n.appendChild(document.createElement("span"));a.className=t,a.textContent=i}function bf(n){function t(i,a,u,c){let{content:d}=a,{color:h,textColor:g,darkColor:b,darkTextColor:x,text:C,href:S,prefix:L,postfix:T,hint:M}=u||{},N;return(typeof u=="string"||typeof u=="number"||typeof u=="boolean")&&(C=u),h&&i.style.setProperty("--discovery-view-badge-color",h),b&&i.style.setProperty("--discovery-view-badge-dark-color",b),g&&i.style.setProperty("--discovery-view-badge-text-color",g),x&&i.style.setProperty("--discovery-view-badge-dark-text-color",x),S&&(i.href=S),M&&(i.title=M),yf(i,"prefix",L),d?N=this.render(i,d,u,c):i.append(document.createTextNode(C)),yf(i,"postfix",T),N}n.view.define("badge",t,{tag:"a",usage:_a}),n.view.define("pill-badge",t,{tag:"a",usage:_a})}var wf={beforeDemo:"A block has no its own look. It's using for wrapping some content with a `className` (btw `className` is a common property for any view when appropriate)",demo:{view:"block",className:"foo",content:['text:"Content inside block"']}};function xf(n){n.view.define("block",function(t,i,a,u){let{content:c=[],onInit:d,onChange:h}=i,g=typeof d!="function"&&typeof h!="function"?c:this.composeConfig(c,{onInit:d,onChange:h});return n.view.render(t,g,a,u)},{usage:wf})}var Gi=(n,t)=>({demo:{view:n,onClick:()=>alert("Hello world!"),data:{text:"Button"}},examples:[{title:"Variations",demo:t.map(i=>`${i}:{ text: "${i}" }`)},{title:"Button as a link",demo:{view:"button",data:{text:"Click me",href:"#url",external:!0}}}]});function kf(n){function t(i,a,u,c){let{content:d,disabled:h=!1,onClick:g}=a,{text:b="",href:x,external:C}=u||{};if(i.classList.add("view-button"),n.query(h,u,c)?i.disabled=!0:typeof g=="function"?(i.addEventListener("click",()=>g(i,u,c)),i.classList.add("onclick")):x&&i.addEventListener("click",S=>X("a",{href:x,target:C?"_blank":""}).click(S)),d)return n.view.render(i,d,u,c);i.textContent=b}n.view.define("button",t,{tag:"button",usage:Gi}),n.view.define("button-primary",t,{tag:"button",usage:Gi}),n.view.define("button-danger",t,{tag:"button",usage:Gi}),n.view.define("button-warning",t,{tag:"button",usage:Gi})}var Cf={demo:{view:"checkbox-list",checkbox:{content:"text"},data:["one","two","three"]}};function Sf(n){n.view.define("checkbox-list",function(t,i,a,u){let{name:c="filter",checkbox:d,checkboxValue:h="$",emptyText:g,limit:b,onChange:x,onInit:C}=i,S=new Set;if(g!==!1&&g!==""&&t.setAttribute("emptyText",g||"Empty list"),!Array.isArray(a)&&a&&(a=[a]),Array.isArray(a))return n.view.renderList(t,this.composeConfig({view:"checkbox",...d,onInit:(L,T,M,N)=>{L&&S.add(n.query(h,M,N))},onChange:(L,T,M,N)=>{let A=S.size,j=n.query(h,M,N);L?S.add(j):S.delete(j),A!==S.size&&typeof x=="function"&&x([...S],c)}}),a,u,0,n.view.listLimit(b,25)).then(()=>{typeof C=="function"&&C([...S],c)})},{usage:Cf})}var Lf={demo:{view:"checkbox",content:'text:"checkbox caption"'},examples:[{title:"Checked state",beforeDemo:"Checked state is set up with `checked` property. Its value can be a query",demo:[{view:"checkbox",checked:!0,content:'text:"should be checked"'},{view:"checkbox",checked:"1 > 5",content:`text:"shouldn't be checked"`},{view:"checkbox",checked:"1 < 5",content:'text:"should be checked"'}]},{title:"Readonly checkbox",demo:{view:"checkbox",readonly:!0,content:'text:"checkbox caption"'}},{title:"On change",demo:{view:"checkbox",onChange:new Function("return (value, name, data, context) => alert(`Changed to ${value}!`)")(),content:'text:"click me!"'}}]};function Tf(n){function t(i,a,u,c,d,h){if(i===null)return;let g=d?{...c,[d]:h.checked}:c;return i.innerHTML="",n.view.render(i,a,u,g)}n.view.define("checkbox",function(i,a,u,c){let{name:d,checked:h,readonly:g,content:b,onInit:x,onChange:C}=a,S=i.appendChild(X("input")),L=b?i.appendChild(X("span","view-checkbox__label")):null;return S.type="checkbox",S.checked=h!==void 0?n.queryBool(h,u,c):Boolean(c[d]),S.readOnly=g,S.addEventListener("click",T=>{g&&T.preventDefault()}),S.addEventListener("change",()=>{typeof C=="function"&&(C(S.checked,d,u,c),t(L,b,u,c,d,S))}),typeof x=="function"&&x(S.checked,d,u,c),t(L,b,u,c,d,S)},{tag:"label",usage:Lf})}var Jo={demo:{view:"columns",data:["one","two","three","four"],column:"text"}};function Mf(n){n.view.define("column",function(t,i,a,u){let{content:c=[]}=i;return n.view.render(t,c,a,u)},{usage:Jo})}function Ef(n){n.view.define("columns",function(i,a,u,c){let{column:d,columnConfig:h,emptyText:g,limit:b}=a;if(g!==!1&&g!==""&&i.setAttribute("emptyText",g||"Empty"),!Array.isArray(u)&&u&&(u=[u]),Array.isArray(u))return n.view.renderList(i,this.composeConfig({view:"column",content:d},h),u,c,0,n.view.listLimit(b,25))},{usage:Jo})}var Nf={demo:{view:"content-filter",data:["foo","bar","baz"],content:{view:"list",data:".[$ ~= #.filter]"}},examples:[{title:"Using with text-match",demo:{view:"content-filter",data:[{name:"foo"},{name:"bar"},{name:"baz"}],name:"customName",content:{view:"list",data:".[name ~= #.customName]",item:"text-match:{ text: name, match: #.customName }"}}}]};function jf(n){n.view.define("content-filter",function(t,i,a,u){let{name:c="filter",type:d="regexp",placeholder:h,content:g,onInit:b,onChange:x}=i;return n.view.render(t,{view:"context",modifiers:{view:"input",name:c,type:d,placeholder:h||"Filter"},content:{view:"block",className:"content",content:g,onInit:b,onChange:x}},a,u)},{usage:Nf})}var Af={demo:{view:"context",data:{name:"text",demo:123},content:["text:name","table"]},examples:[{title:"Using with modifiers",demo:{view:"context",modifiers:['h2:"Modifiers"',{view:"input",name:"inputValue"},{view:"select",name:"selectValue",data:["foo","bar","baz"]}],content:['h2:"Values"',"struct:#"]}}]};function Of(n){n.view.define("context",function(t,i,a,u){function c(){let j=b.previousSibling;for(;j&&j!==g;)j=j.previousSibling,j.nextSibling.remove();let D=x=document.createDocumentFragment();return n.view.render(D,L,a,h).then(()=>{D===x&&(n.view.adoptFragment(D,g),g.after(D))})}function d(j,D){D&&(!hasOwnProperty.call(h,D)||h[D]!==j)&&(h={...h,[D]:j},C?(c(),T&&typeof N=="function"&&N(j,D)):typeof M=="function"&&M(j,D))}let h=u,g=null,b=null,x=null,C=!1,{modifiers:S=[],content:L=[]}=i,{proxy:T,onInit:M,onChange:N}=i;Array.isArray(S)||(S=[S]);let A=n.view.render(t,this.composeConfig(S,{onInit:d,onChange:d}),a,u);return g=t.appendChild(document.createComment('{ view: "context" } content start')),b=t.appendChild(document.createComment('{ view: "context" } content end')),T&&(M||N)&&(L=this.composeConfig(L,{onInit:M,onChange:N})),A.then(()=>(C=!0,c()))},{tag:!1,usage:Af})}var Df={demo:{view:"context",modifiers:{view:"dropdown",name:"demo",value:{foo:"two",bar:"hello"},resetValue:{foo:"one",bar:""},caption:"text:`${#.demo.foo} / ${#.demo.bar}`",content:[{view:"select",name:"foo",data:["one","two","three","four"]},{view:"input",name:"bar"}]},content:[{view:"block",content:'text:"Modified context (see values in \\"demo\\" section):"'},{view:"struct",expanded:1,data:"#"}]}};var{hasOwnProperty:If}=Object.prototype;function S1(n,t){if(!n||!t||typeof n!="object"||typeof t!="object")return n===t;for(let i in n)if(If.call(n,i)&&n[i]!==t[i])return!1;for(let i in t)if(If.call(t,i)&&n[i]!==t[i])return!1;return!0}function Pf(n){n.view.define("dropdown",function(t,i,a,u){function c(_,$){return typeof M=="function"?M(_,$):S1(_,$)}function d(){return P.innerHTML="",n.view.render(P,L||"text",a,{...u,[b||"__self"]:j})}function h(_){j=_,typeof A=="function"&&A(j,b,a,u),D.hide(),d()}function g(_,$){if(R){let q={changed:!c(_,$)};R.innerHTML="",n.view.render(R,[{view:"button-primary",disabled:"=not changed",content:'text:"Apply"',onClick(H,K,W){h(W)}},{view:"button",when:()=>x&&!c(x,j),content:'text:"Reset"',onClick(){h(x)}},{view:"button",disabled:"=not changed",content:'text:"Cancel"',onClick(){D.hide()}}],q,$)}}let{name:b,resetValue:x,value:C,placeholder:S,caption:L,content:T,compare:M,onInit:N,onChange:A}=i,j="value"in i?C:u[b],D=null,P=t.appendChild(document.createElement("div")),R;return S&&(t.dataset.placeholder=S),t.tabIndex=0,t.addEventListener("click",()=>{D===null&&(D=new n.view.Popup({className:"view-dropdown-popup"}));let _={...j},$;D.toggle(t,q=>n.view.render(q,[{view:"block",className:"content",content:n.view.composeConfig(T,{onInit(H,K){_[K]=H},onChange(H,K){_[K]=H,g($,_)}})},{view:"block",className:"confirm",postRender(H){R=H}}],a,{...u,...j}).then(()=>{$={..._},g($,_)}))}),P.className="view-dropdown__caption",typeof N=="function"&&N(j,b,a,u),d()},{usage:Df})}var Ha={};$t(Ha,{escapeHtml:()=>lt});function lt(n){return n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Ki=sr(Jr());var Wa=sr(Jr());function qa(n){let t=Wa.default.getMode(n,{name:"javascript",json:!0});return{...t,indent(i,a){return i.indented+n.indentUnit*(i.lastType==="{"&&a.trim()[0]!=="}"||i.lastType==="("&&a.trim()[0]!==")"||i.lastType==="["&&a.trim()[0]!=="]")},token(i,a){let u=i.peek();return u==="#"||u==="@"?(t.token(new Wa.default.StringStream("$",4,i.lineOracle),a),i.pos++,"variable"):t.token(i,a)}}}var zf=sr(Jr());function Rf(n,t){let i=typeof t.isDiscoveryViewDefined=="function"?t.isDiscoveryViewDefined:()=>{},a=zf.default.getMode(n,{name:"javascript",json:!0});return{...a,indent(u,c){return u.indented+n.indentUnit*(u.lastType==="{"&&c.trim()[0]!=="}"||u.lastType==="("&&c.trim()[0]!==")"||u.lastType==="["&&c.trim()[0]!=="]")},token:function(u,c){if(c.suspendTokens){let{pos:g,token:b}=c.suspendTokens.shift();return u.pos=g,c.suspendTokens.length===0&&(c.suspendTokens=null),b}let d=u.pos,h=a.token(u,c);if(h==="string"){let g=u.pos,[,b]=u.string.slice(d+1,g-1).match(/^(.+?)([:{]|$)/)||[];i(b)&&(u.pos=d+1,c.suspendTokens=[{pos:d+1+b.length,token:"string discovery-view-name"},{pos:g,token:h}])}return h}}}var Ux=sr($a());var rr=sr(Jr());var Ya={};$t(Ya,{getBoundingRect:()=>mn,getOffsetParent:()=>Yi,getOverflowParent:()=>Ua,getPageOffset:()=>Va,getViewportRect:()=>Ga});var{documentElement:li}=document,Ff=document.compatMode==="CSS1Compat";function Yi(n){let t=n.offsetParent||n.parentNode;for(;t&&t!==li&&getComputedStyle(t).position=="static";)t=t.offsetParent;return t||li}function Ua(n){let t=n.overflowParent||n.parentNode;for(;t&&t!==li&&getComputedStyle(t).overflow=="visible";)t=t.overflowParent;return t||li}function Va(n){let t=0,i=0;if(n&&n.getBoundingClientRect){let a=n.getBoundingClientRect();t=-a.top,i=-a.left}else if(Ff)t=window.pageYOffset||li.scrollTop,i=window.pageXOffset||li.scrollLeft;else{let{body:a}=document;n!==a&&(t=a.scrollTop-a.clientTop,i=a.scrollLeft-a.clientLeft)}return{left:i,top:t}}function mn(n,t){let i=Va(t),a=0,u=0,c=0,d=0;return n&&n.getBoundingClientRect&&({top:a,left:u,right:c,bottom:d}=n.getBoundingClientRect()),{top:a+i.top,left:u+i.left,right:c+i.left,bottom:d+i.top,width:c-u,height:d-a}}function Ga(n,t){let i=Ff?document.documentElement:document.body,{top:a,left:u}=n===i&&!t?Va():mn(n,t),c,d;return!n||n===window?(c=window.innerWidth||0,d=window.innerHeight||0):(a+=n.clientTop,u+=n.clientLeft,c=n.clientWidth,d=n.clientHeight),{top:a,left:u,right:u+c,bottom:a+d,width:c,height:d}}var L1="discovery-view-editor-hints-popup",T1="discovery-view-editor-hint",Ka="active",M1=window.requestAnimationFrame||(n=>setTimeout(n,1e3/60)),E1=window.cancelAnimationFrame||clearTimeout;rr.default.commands.autocomplete=rr.default.showHint;rr.default.defineOption("showHintOptions",null);rr.default.defineExtension("showHint",function(n){n={closeOnUnfocus:!0,container:null,...this.options.showHintOptions,...n},this.state.completionActive&&this.state.completionActive.close(),!(this.listSelections().length>1)&&(this.somethingSelected()||typeof n.hint=="function"&&(this.state.completionActive=new Bf(this,n),this.state.completionActive.update(!0),rr.default.signal(this,"startCompletion",this)))});var Bf=class{constructor(t,i){if(this.cm=t,this.options=i,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length,t.on("cursorActivity",this.activityFunc=()=>this.cursorActivity()),i.closeOnUnfocus){let a;this.onFocus=()=>clearTimeout(a),this.onBlur=()=>a=setTimeout(()=>this.close(),100),t.on("focus",this.onFocus),t.on("blur",this.onBlur)}}close(){!this.active()||(this.cm.state.completionActive=null,this.tick=null,this.cm.off("cursorActivity",this.activityFunc),this.options.closeOnUnfocus&&(this.cm.off("blur",this.onBlur),this.cm.off("focus",this.onFocus)),this.widget&&(this.data&&rr.default.signal(this.data,"close"),this.widget.close()),rr.default.signal(this.cm,"endCompletion",this.cm))}active(){return this.cm.state.completionActive===this}pick(t,i){let a=t.list[i];a.hint?a.hint(this.cm,t,a):this.cm.replaceRange(Wf(a),a.from||t.from,a.to||t.to,"complete"),rr.default.signal(t,"pick",a),this.close()}cursorActivity(){this.debounce&&(E1(this.debounce),this.debounce=0);let t=this.cm.getCursor(),i=this.cm.getLine(t.line);t.line!=this.startPos.line||i.length-t.ch!=this.startLen-this.startPos.ch||t.ch<this.startPos.ch||this.cm.somethingSelected()?this.close():(this.debounce=M1(()=>this.update()),this.widget&&this.widget.disable())}update(t){if(this.tick===null)return;let i=++this.tick;Promise.resolve(this.options.hint(this.cm,this.options)).then(a=>{this.tick==i&&this.finishUpdate(a,t)})}finishUpdate(t){this.data&&rr.default.signal(this.data,"update");let i=this.widget&&this.widget.picked;this.widget&&this.widget.close(),this.data=t,t&&t.list.length&&(i&&t.list.length==1?this.pick(t,0):(this.widget=new qf(this,t),rr.default.signal(t,"shown")))}};function Wf(n){return typeof n=="string"?n:n.text}function N1(n,t){for(;t&&t.parentNode!==n;)t=t.parentNode;return t}var qf=class{constructor(t,i){let a=t.cm,u=this.hintsEl=document.createElement("ul"),c=[L1,t.cm.options.theme,t.options.darkmode].filter(Boolean),d=t.options.container||document.body;this.rootEls=new Set([d.getRootNode()]),this.completion=t,this.data=i,this.picked=!1,this.selectedHint=i.selectedHint||0,u.style.visibility="hidden",c.forEach(h=>u.classList.add(h)),d.appendChild(u),this.items=i.list.map((h,g)=>{let b=u.appendChild(document.createElement("li"));return b.className=T1,g===this.selectedHint&&b.classList.add(Ka),h.render?h.render(b,i,h):b.appendChild(document.createTextNode(h.displayText||Wf(h))),b}),a.addKeyMap(this.keyMap={Up:()=>this.changeActive(this.selectedHint-1),Down:()=>this.changeActive(this.selectedHint+1),Enter:()=>this.pick(),Tab:()=>this.pick(),Esc:()=>t.close()}),this.updatePosSize(),this.onScroll=()=>this.updatePosSize();for(let h of this.rootEls)h.addEventListener("scroll",this.onScroll,mr);rr.default.on(u,"mousedown",()=>setTimeout(()=>a.focus(),20)),rr.default.on(u,"click",h=>{let g=N1(u,h.target),b=this.items.indexOf(g);b!==-1&&(this.changeActive(b),this.pick())}),rr.default.signal(i,"select",i.list[this.selectedHint],this.items[this.selectedHint])}close(){if(this.completion.widget===this){this.completion.widget=null,this.completion.cm.removeKeyMap(this.keyMap),this.hintsEl.remove();for(let t of this.rootEls)t.removeEventListener("scroll",this.onScroll,mr)}}disable(){this.completion.cm.removeKeyMap(this.keyMap),this.keyMap={Enter:()=>this.picked=!0},this.completion.cm.addKeyMap(this.keyMap)}pick(){this.completion.pick(this.data,this.selectedHint)}changeActive(t,i){t>=this.items.length?t=i?this.items.length-1:0:t<0&&(t=i?0:this.items.length-1);let a=this.items[this.selectedHint],u=this.items[this.selectedHint=t];u!==a&&(a&&a.classList.remove(Ka),u.classList.add(Ka),u.offsetTop<this.hintsEl.scrollTop?this.hintsEl.scrollTop=u.offsetTop-3:u.offsetTop+u.offsetHeight>this.hintsEl.scrollTop+this.hintsEl.clientHeight&&(this.hintsEl.scrollTop=u.offsetTop+u.offsetHeight-this.hintsEl.clientHeight+3),rr.default.signal(this.data,"select",this.data.list[this.selectedHint],u))}getCursorCoords(){let{completion:t,hintsEl:i}=this,a=t.cm,u=Yi(i),c=a.cursorCoords(null,"local"),d=mn(a.display.wrapper,u);return{top:d.top+c.top+5,left:d.left+c.left+9,bottom:d.top+c.bottom+5,right:d.left+c.right+9}}updatePosSize(){let t=1,i=6,{hintsEl:a}=this,u=this.getCursorCoords(),{clientWidth:c,clientHeight:d}=Ua(a);a.style.left="0px",a.style.top="0px";let{width:h,height:g}=a.getBoundingClientRect(),b=d-u.bottom,x=u.top;b<g&&x>b?(a.style.top=`${u.top-1-Math.min(g,x-i)-t}px`,a.style.maxHeight=`${x-t-i}px`):(a.style.top=`${u.bottom+t}px`,a.style.maxHeight=`${b-t-i}px`);let C=c-u.right,S=u.left;C<h&&S>C?(a.style.left=`${u.left+1-Math.min(h,S-i)}px`,a.style.maxWidth=`${S-i}px`):(a.style.left=`${u.right}px`,a.style.maxWidth=`${C-i}px`),a.style.visibility="visible"}};function j1(n,t,{entry:{value:i,current:a,type:u}}){let c=a[0],d=a[a.length-1],h=c==='"'||c==="'"?1:0,g=d==='"'||d==="'"?1:0,b=a.toLowerCase().substring(h,a.length-g),x=b?i.toLowerCase().indexOf(b,i[0]==='"'||i[0]==="'"?1:0):-1;x!==-1&&(i=lt(i.substring(0,x))+'<span class="match">'+lt(i.substr(x,b.length))+"</span>"+lt(i.substr(x+b.length))),n.appendChild(X("span","name",i)),n.appendChild(X("span","type",u))}var Qa=class extends dn{constructor({hint:t,mode:i}){super();this.el=document.createElement("div"),this.el.className="discovery-editor";let a=this,u=(0,Ki.default)(this.el,{extraKeys:{"Alt-Space":"autocomplete"},mode:i||"javascript",theme:"neo",indentUnit:0,showHintOptions:{hint:t,get container(){return a.container},get darkmode(){return a.darkmode.value?"darkmode":!1}}});u.on("change",()=>this.emit("change",u.getValue())),typeof t=="function"&&(u.on("cursorActivity",c=>{c.state.focused&&c.showHint()}),u.on("focus",c=>!c.state.completionActive&&c.showHint())),this.cm=u}getValue(){return this.cm.getValue()}setValue(t){Promise.resolve().then(()=>this.cm.refresh()),typeof t=="string"&&this.getValue()!==t&&this.cm.setValue(t||"")}focus(){this.cm.focus()}get darkmode(){}},$f=class extends Qa{constructor(t){super({mode:"discovery-query",hint:function(i){let a=i.getCursor(),u=t(i.getValue(),i.doc.indexFromPos(a));if(!!u)return{list:u.slice(0,50).map(c=>({entry:c,text:c.value,render:j1,from:i.posFromIndex(c.from),to:i.posFromIndex(c.to)}))}}})}},Uf=class extends Qa{constructor(){super({mode:{name:"discovery-view",isDiscoveryViewDefined:t=>this.isViewDefined(t)}})}};Ki.default.defineMode("jora",qa);Ki.default.defineMode("discovery-query",qa);Ki.default.defineMode("discovery-view",Rf);function Vf(n){Object.assign(n.view,{QueryEditor:class extends $f{get darkmode(){return n.darkmode}get container(){return n.dom.container}},ViewEditor:class extends Uf{isViewDefined(t){return n.view.isDefined(t)}get darkmode(){return n.darkmode}}})}var Gf={demo:{view:"expand",header:'text:"Expand me!"',content:'text:"Content"'}};function Yf(n){n.view.define("expand",function(t,i,a,u){function c(){if(t.classList.toggle("expanded",d),d)return S=X("div","content"),n.view.render(S,g,a,u).then(()=>t.appendChild(S));S!==null&&(S.remove(),S=null)}let{expanded:d,header:h,content:g,onToggle:b}=i,x=t.appendChild(X("div","header")),C=x.appendChild(X("div","header-content")),S=null;return!h&&i.title&&(h=i.title,console.warn("expand.title is deprecated, use expand.header instead")),d=n.queryBool(d,a,u),x.appendChild(X("div","trigger")),x.addEventListener("click",()=>{d=!d,c(),typeof b=="function"&&b(d)}),Promise.all([n.view.render(C,h||'text:"\xA0"',a,u),c()])},{usage:Gf})}function Kf(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}var ui=Kf();function A1(n){ui=n}var O1=/[&<>"']/,D1=/[&<>"']/g,I1=/[<>"']|&(?!#?\w+;)/,P1=/[<>"']|&(?!#?\w+;)/g,z1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Qf=n=>z1[n];function jt(n,t){if(t){if(O1.test(n))return n.replace(D1,Qf)}else if(I1.test(n))return n.replace(P1,Qf);return n}var R1=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Zf(n){return n.replace(R1,(t,i)=>(i=i.toLowerCase(),i==="colon"?":":i.charAt(0)==="#"?i.charAt(1)==="x"?String.fromCharCode(parseInt(i.substring(2),16)):String.fromCharCode(+i.substring(1)):""))}var _1=/(^|[^\[])\^/g;function st(n,t){n=n.source||n,t=t||"";let i={replace:(a,u)=>(u=u.source||u,u=u.replace(_1,"$1"),n=n.replace(a,u),i),getRegex:()=>new RegExp(n,t)};return i}var H1=/[^\w:]/g,F1=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function Jf(n,t,i){if(n){let a;try{a=decodeURIComponent(Zf(i)).replace(H1,"").toLowerCase()}catch(u){return null}if(a.indexOf("javascript:")===0||a.indexOf("vbscript:")===0||a.indexOf("data:")===0)return null}t&&!F1.test(i)&&(i=$1(t,i));try{i=encodeURI(i).replace(/%25/g,"%")}catch(a){return null}return i}var Xo={},B1=/^[^:]+:\/*[^/]*$/,W1=/^([^:]+:)[\s\S]*$/,q1=/^([^:]+:\/*[^/]*)[\s\S]*$/;function $1(n,t){Xo[" "+n]||(B1.test(n)?Xo[" "+n]=n+"/":Xo[" "+n]=ts(n,"/",!0)),n=Xo[" "+n];let i=n.indexOf(":")===-1;return t.substring(0,2)==="//"?i?t:n.replace(W1,"$1")+t:t.charAt(0)==="/"?i?t:n.replace(q1,"$1")+t:n+t}var es={exec:function(){}};function Nr(n){let t=1,i,a;for(;t<arguments.length;t++){i=arguments[t];for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])}return n}function Xf(n,t){let i=n.replace(/\|/g,(c,d,h)=>{let g=!1,b=d;for(;--b>=0&&h[b]==="\\";)g=!g;return g?"|":" |"}),a=i.split(/ \|/),u=0;if(a[0].trim()||a.shift(),a.length>0&&!a[a.length-1].trim()&&a.pop(),a.length>t)a.splice(t);else for(;a.length<t;)a.push("");for(;u<a.length;u++)a[u]=a[u].trim().replace(/\\\|/g,"|");return a}function ts(n,t,i){let a=n.length;if(a===0)return"";let u=0;for(;u<a;){let c=n.charAt(a-u-1);if(c===t&&!i)u++;else if(c!==t&&i)u++;else break}return n.substr(0,a-u)}function U1(n,t){if(n.indexOf(t[1])===-1)return-1;let i=n.length,a=0,u=0;for(;u<i;u++)if(n[u]==="\\")u++;else if(n[u]===t[0])a++;else if(n[u]===t[1]&&(a--,a<0))return u;return-1}function ed(n){n&&n.sanitize&&!n.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function td(n,t){if(t<1)return"";let i="";for(;t>1;)t&1&&(i+=n),t>>=1,n+=n;return i+n}function rd(n,t,i,a){let u=t.href,c=t.title?jt(t.title):null,d=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){a.state.inLink=!0;let h={type:"link",raw:i,href:u,title:c,text:d,tokens:a.inlineTokens(d,[])};return a.state.inLink=!1,h}else return{type:"image",raw:i,href:u,title:c,text:jt(d)}}function V1(n,t){let i=n.match(/^(\s+)(?:```)/);if(i===null)return t;let a=i[1];return t.split(`
`).map(u=>{let c=u.match(/^\s+/);if(c===null)return u;let[d]=c;return d.length>=a.length?u.slice(a.length):u}).join(`
`)}var rs=class{constructor(t){this.options=t||ui}space(t){let i=this.rules.block.newline.exec(t);if(i&&i[0].length>0)return{type:"space",raw:i[0]}}code(t){let i=this.rules.block.code.exec(t);if(i){let a=i[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:i[0],codeBlockStyle:"indented",text:this.options.pedantic?a:ts(a,`
`)}}}fences(t){let i=this.rules.block.fences.exec(t);if(i){let a=i[0],u=V1(a,i[3]||"");return{type:"code",raw:a,lang:i[2]?i[2].trim():i[2],text:u}}}heading(t){let i=this.rules.block.heading.exec(t);if(i){let a=i[2].trim();if(/#$/.test(a)){let c=ts(a,"#");(this.options.pedantic||!c||/ $/.test(c))&&(a=c.trim())}let u={type:"heading",raw:i[0],depth:i[1].length,text:a,tokens:[]};return this.lexer.inline(u.text,u.tokens),u}}hr(t){let i=this.rules.block.hr.exec(t);if(i)return{type:"hr",raw:i[0]}}blockquote(t){let i=this.rules.block.blockquote.exec(t);if(i){let a=i[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:i[0],tokens:this.lexer.blockTokens(a,[]),text:a}}}list(t){let i=this.rules.block.list.exec(t);if(i){let a,u,c,d,h,g,b,x,C,S,L,T,M=i[1].trim(),N=M.length>1,A={type:"list",raw:"",ordered:N,start:N?+M.slice(0,-1):"",loose:!1,items:[]};M=N?`\\d{1,9}\\${M.slice(-1)}`:`\\${M}`,this.options.pedantic&&(M=N?M:"[*+-]");let j=new RegExp(`^( {0,3}${M})((?: [^\\n]*)?(?:\\n|$))`);for(;t&&(T=!1,!(!(i=j.exec(t))||this.rules.block.hr.test(t)));){if(a=i[0],t=t.substring(a.length),x=i[2].split(`
`,1)[0],C=t.split(`
`,1)[0],this.options.pedantic?(d=2,L=x.trimLeft()):(d=i[2].search(/[^ ]/),d=d>4?1:d,L=x.slice(d),d+=i[1].length),g=!1,!x&&/^ *$/.test(C)&&(a+=C+`
`,t=t.substring(C.length+1),T=!0),!T){let P=new RegExp(`^ {0,${Math.min(3,d-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(;t&&(S=t.split(`
`,1)[0],x=S,this.options.pedantic&&(x=x.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!P.test(x));){if(x.search(/[^ ]/)>=d||!x.trim())L+=`
`+x.slice(d);else if(!g)L+=`
`+x;else break;!g&&!x.trim()&&(g=!0),a+=S+`
`,t=t.substring(S.length+1)}}A.loose||(b?A.loose=!0:/\n *\n *$/.test(a)&&(b=!0)),this.options.gfm&&(u=/^\[[ xX]\] /.exec(L),u&&(c=u[0]!=="[ ] ",L=L.replace(/^\[[ xX]\] +/,""))),A.items.push({type:"list_item",raw:a,task:!!u,checked:c,loose:!1,text:L}),A.raw+=a}A.items[A.items.length-1].raw=a.trimRight(),A.items[A.items.length-1].text=L.trimRight(),A.raw=A.raw.trimRight();let D=A.items.length;for(h=0;h<D;h++){this.lexer.state.top=!1,A.items[h].tokens=this.lexer.blockTokens(A.items[h].text,[]);let P=A.items[h].tokens.filter(_=>_.type==="space"),R=P.every(_=>{let $=_.raw.split(""),q=0;for(let H of $)if(H===`
`&&(q+=1),q>1)return!0;return!1});!A.loose&&P.length&&R&&(A.loose=!0,A.items[h].loose=!0)}return A}}html(t){let i=this.rules.block.html.exec(t);if(i){let a={type:"html",raw:i[0],pre:!this.options.sanitizer&&(i[1]==="pre"||i[1]==="script"||i[1]==="style"),text:i[0]};return this.options.sanitize&&(a.type="paragraph",a.text=this.options.sanitizer?this.options.sanitizer(i[0]):jt(i[0]),a.tokens=[],this.lexer.inline(a.text,a.tokens)),a}}def(t){let i=this.rules.block.def.exec(t);if(i){i[3]&&(i[3]=i[3].substring(1,i[3].length-1));let a=i[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:a,raw:i[0],href:i[2],title:i[3]}}}table(t){let i=this.rules.block.table.exec(t);if(i){let a={type:"table",header:Xf(i[1]).map(u=>({text:u})),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:i[3]&&i[3].trim()?i[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(a.header.length===a.align.length){a.raw=i[0];let u=a.align.length,c,d,h,g;for(c=0;c<u;c++)/^ *-+: *$/.test(a.align[c])?a.align[c]="right":/^ *:-+: *$/.test(a.align[c])?a.align[c]="center":/^ *:-+ *$/.test(a.align[c])?a.align[c]="left":a.align[c]=null;for(u=a.rows.length,c=0;c<u;c++)a.rows[c]=Xf(a.rows[c],a.header.length).map(b=>({text:b}));for(u=a.header.length,d=0;d<u;d++)a.header[d].tokens=[],this.lexer.inlineTokens(a.header[d].text,a.header[d].tokens);for(u=a.rows.length,d=0;d<u;d++)for(g=a.rows[d],h=0;h<g.length;h++)g[h].tokens=[],this.lexer.inlineTokens(g[h].text,g[h].tokens);return a}}}lheading(t){let i=this.rules.block.lheading.exec(t);if(i){let a={type:"heading",raw:i[0],depth:i[2].charAt(0)==="="?1:2,text:i[1],tokens:[]};return this.lexer.inline(a.text,a.tokens),a}}paragraph(t){let i=this.rules.block.paragraph.exec(t);if(i){let a={type:"paragraph",raw:i[0],text:i[1].charAt(i[1].length-1)===`
`?i[1].slice(0,-1):i[1],tokens:[]};return this.lexer.inline(a.text,a.tokens),a}}text(t){let i=this.rules.block.text.exec(t);if(i){let a={type:"text",raw:i[0],text:i[0],tokens:[]};return this.lexer.inline(a.text,a.tokens),a}}escape(t){let i=this.rules.inline.escape.exec(t);if(i)return{type:"escape",raw:i[0],text:jt(i[1])}}tag(t){let i=this.rules.inline.tag.exec(t);if(i)return!this.lexer.state.inLink&&/^<a /i.test(i[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(i[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(i[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(i[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:i[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):jt(i[0]):i[0]}}link(t){let i=this.rules.inline.link.exec(t);if(i){let a=i[2].trim();if(!this.options.pedantic&&/^</.test(a)){if(!/>$/.test(a))return;let d=ts(a.slice(0,-1),"\\");if((a.length-d.length)%2==0)return}else{let d=U1(i[2],"()");if(d>-1){let g=(i[0].indexOf("!")===0?5:4)+i[1].length+d;i[2]=i[2].substring(0,d),i[0]=i[0].substring(0,g).trim(),i[3]=""}}let u=i[2],c="";if(this.options.pedantic){let d=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(u);d&&(u=d[1],c=d[3])}else c=i[3]?i[3].slice(1,-1):"";return u=u.trim(),/^</.test(u)&&(this.options.pedantic&&!/>$/.test(a)?u=u.slice(1):u=u.slice(1,-1)),rd(i,{href:u&&u.replace(this.rules.inline._escapes,"$1"),title:c&&c.replace(this.rules.inline._escapes,"$1")},i[0],this.lexer)}}reflink(t,i){let a;if((a=this.rules.inline.reflink.exec(t))||(a=this.rules.inline.nolink.exec(t))){let u=(a[2]||a[1]).replace(/\s+/g," ");if(u=i[u.toLowerCase()],!u||!u.href){let c=a[0].charAt(0);return{type:"text",raw:c,text:c}}return rd(a,u,a[0],this.lexer)}}emStrong(t,i,a=""){let u=this.rules.inline.emStrong.lDelim.exec(t);if(!u||u[3]&&a.match(/[\p{L}\p{N}]/u))return;let c=u[1]||u[2]||"";if(!c||c&&(a===""||this.rules.inline.punctuation.exec(a))){let d=u[0].length-1,h,g,b=d,x=0,C=u[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(C.lastIndex=0,i=i.slice(-1*t.length+d);(u=C.exec(i))!=null;){if(h=u[1]||u[2]||u[3]||u[4]||u[5]||u[6],!h)continue;if(g=h.length,u[3]||u[4]){b+=g;continue}else if((u[5]||u[6])&&d%3&&!((d+g)%3)){x+=g;continue}if(b-=g,b>0)continue;if(g=Math.min(g,g+b+x),Math.min(d,g)%2){let L=t.slice(1,d+u.index+g);return{type:"em",raw:t.slice(0,d+u.index+g+1),text:L,tokens:this.lexer.inlineTokens(L,[])}}let S=t.slice(2,d+u.index+g-1);return{type:"strong",raw:t.slice(0,d+u.index+g+1),text:S,tokens:this.lexer.inlineTokens(S,[])}}}}codespan(t){let i=this.rules.inline.code.exec(t);if(i){let a=i[2].replace(/\n/g," "),u=/[^ ]/.test(a),c=/^ /.test(a)&&/ $/.test(a);return u&&c&&(a=a.substring(1,a.length-1)),a=jt(a,!0),{type:"codespan",raw:i[0],text:a}}}br(t){let i=this.rules.inline.br.exec(t);if(i)return{type:"br",raw:i[0]}}del(t){let i=this.rules.inline.del.exec(t);if(i)return{type:"del",raw:i[0],text:i[2],tokens:this.lexer.inlineTokens(i[2],[])}}autolink(t,i){let a=this.rules.inline.autolink.exec(t);if(a){let u,c;return a[2]==="@"?(u=jt(this.options.mangle?i(a[1]):a[1]),c="mailto:"+u):(u=jt(a[1]),c=u),{type:"link",raw:a[0],text:u,href:c,tokens:[{type:"text",raw:u,text:u}]}}}url(t,i){let a;if(a=this.rules.inline.url.exec(t)){let u,c;if(a[2]==="@")u=jt(this.options.mangle?i(a[0]):a[0]),c="mailto:"+u;else{let d;do d=a[0],a[0]=this.rules.inline._backpedal.exec(a[0])[0];while(d!==a[0]);u=jt(a[0]),a[1]==="www."?c="http://"+u:c=u}return{type:"link",raw:a[0],text:u,href:c,tokens:[{type:"text",raw:u,text:u}]}}}inlineText(t,i){let a=this.rules.inline.text.exec(t);if(a){let u;return this.lexer.state.inRawBlock?u=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(a[0]):jt(a[0]):a[0]:u=jt(this.options.smartypants?i(a[0]):a[0]),{type:"text",raw:a[0],text:u}}}},_e={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:es,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};_e._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;_e._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;_e.def=st(_e.def).replace("label",_e._label).replace("title",_e._title).getRegex();_e.bullet=/(?:[*+-]|\d{1,9}[.)])/;_e.listItemStart=st(/^( *)(bull) */).replace("bull",_e.bullet).getRegex();_e.list=st(_e.list).replace(/bull/g,_e.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+_e.def.source+")").getRegex();_e._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";_e._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;_e.html=st(_e.html,"i").replace("comment",_e._comment).replace("tag",_e._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();_e.paragraph=st(_e._paragraph).replace("hr",_e.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_e._tag).getRegex();_e.blockquote=st(_e.blockquote).replace("paragraph",_e.paragraph).getRegex();_e.normal=Nr({},_e);_e.gfm=Nr({},_e.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});_e.gfm.table=st(_e.gfm.table).replace("hr",_e.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_e._tag).getRegex();_e.gfm.paragraph=st(_e._paragraph).replace("hr",_e.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",_e.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_e._tag).getRegex();_e.pedantic=Nr({},_e.normal,{html:st(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",_e._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:es,paragraph:st(_e.normal._paragraph).replace("hr",_e.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",_e.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var Le={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:es,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:es,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};Le._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";Le.punctuation=st(Le.punctuation).replace(/punctuation/g,Le._punctuation).getRegex();Le.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;Le.escapedEmSt=/\\\*|\\_/g;Le._comment=st(_e._comment).replace("(?:-->|$)","-->").getRegex();Le.emStrong.lDelim=st(Le.emStrong.lDelim).replace(/punct/g,Le._punctuation).getRegex();Le.emStrong.rDelimAst=st(Le.emStrong.rDelimAst,"g").replace(/punct/g,Le._punctuation).getRegex();Le.emStrong.rDelimUnd=st(Le.emStrong.rDelimUnd,"g").replace(/punct/g,Le._punctuation).getRegex();Le._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;Le._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;Le._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;Le.autolink=st(Le.autolink).replace("scheme",Le._scheme).replace("email",Le._email).getRegex();Le._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;Le.tag=st(Le.tag).replace("comment",Le._comment).replace("attribute",Le._attribute).getRegex();Le._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;Le._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;Le._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;Le.link=st(Le.link).replace("label",Le._label).replace("href",Le._href).replace("title",Le._title).getRegex();Le.reflink=st(Le.reflink).replace("label",Le._label).replace("ref",_e._label).getRegex();Le.nolink=st(Le.nolink).replace("ref",_e._label).getRegex();Le.reflinkSearch=st(Le.reflinkSearch,"g").replace("reflink",Le.reflink).replace("nolink",Le.nolink).getRegex();Le.normal=Nr({},Le);Le.pedantic=Nr({},Le.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:st(/^!?\[(label)\]\((.*?)\)/).replace("label",Le._label).getRegex(),reflink:st(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Le._label).getRegex()});Le.gfm=Nr({},Le.normal,{escape:st(Le.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});Le.gfm.url=st(Le.gfm.url,"i").replace("email",Le.gfm._extended_email).getRegex();Le.breaks=Nr({},Le.gfm,{br:st(Le.br).replace("{2,}","*").getRegex(),text:st(Le.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function G1(n){return n.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function nd(n){let t="",i,a,u=n.length;for(i=0;i<u;i++)a=n.charCodeAt(i),Math.random()>.5&&(a="x"+a.toString(16)),t+="&#"+a+";";return t}var Fr=class{constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||ui,this.options.tokenizer=this.options.tokenizer||new rs,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let i={block:_e.normal,inline:Le.normal};this.options.pedantic?(i.block=_e.pedantic,i.inline=Le.pedantic):this.options.gfm&&(i.block=_e.gfm,this.options.breaks?i.inline=Le.breaks:i.inline=Le.gfm),this.tokenizer.rules=i}static get rules(){return{block:_e,inline:Le}}static lex(t,i){return new Fr(i).lex(t)}static lexInline(t,i){return new Fr(i).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(t,this.tokens);let i;for(;i=this.inlineQueue.shift();)this.inlineTokens(i.src,i.tokens);return this.tokens}blockTokens(t,i=[]){this.options.pedantic&&(t=t.replace(/^ +$/gm,""));let a,u,c,d;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(h=>(a=h.call({lexer:this},t,i))?(t=t.substring(a.raw.length),i.push(a),!0):!1))){if(a=this.tokenizer.space(t)){t=t.substring(a.raw.length),a.raw.length===1&&i.length>0?i[i.length-1].raw+=`
`:i.push(a);continue}if(a=this.tokenizer.code(t)){t=t.substring(a.raw.length),u=i[i.length-1],u&&(u.type==="paragraph"||u.type==="text")?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue[this.inlineQueue.length-1].src=u.text):i.push(a);continue}if(a=this.tokenizer.fences(t)){t=t.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.heading(t)){t=t.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.hr(t)){t=t.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.blockquote(t)){t=t.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.list(t)){t=t.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.html(t)){t=t.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.def(t)){t=t.substring(a.raw.length),u=i[i.length-1],u&&(u.type==="paragraph"||u.type==="text")?(u.raw+=`
`+a.raw,u.text+=`
`+a.raw,this.inlineQueue[this.inlineQueue.length-1].src=u.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(t)){t=t.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.lheading(t)){t=t.substring(a.raw.length),i.push(a);continue}if(c=t,this.options.extensions&&this.options.extensions.startBlock){let h=Infinity,g=t.slice(1),b;this.options.extensions.startBlock.forEach(function(x){b=x.call({lexer:this},g),typeof b=="number"&&b>=0&&(h=Math.min(h,b))}),h<Infinity&&h>=0&&(c=t.substring(0,h+1))}if(this.state.top&&(a=this.tokenizer.paragraph(c))){u=i[i.length-1],d&&u.type==="paragraph"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=u.text):i.push(a),d=c.length!==t.length,t=t.substring(a.raw.length);continue}if(a=this.tokenizer.text(t)){t=t.substring(a.raw.length),u=i[i.length-1],u&&u.type==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=u.text):i.push(a);continue}if(t){let h="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return this.state.top=!0,i}inline(t,i){this.inlineQueue.push({src:t,tokens:i})}inlineTokens(t,i=[]){let a,u,c,d=t,h,g,b;if(this.tokens.links){let x=Object.keys(this.tokens.links);if(x.length>0)for(;(h=this.tokenizer.rules.inline.reflinkSearch.exec(d))!=null;)x.includes(h[0].slice(h[0].lastIndexOf("[")+1,-1))&&(d=d.slice(0,h.index)+"["+td("a",h[0].length-2)+"]"+d.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(h=this.tokenizer.rules.inline.blockSkip.exec(d))!=null;)d=d.slice(0,h.index)+"["+td("a",h[0].length-2)+"]"+d.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(h=this.tokenizer.rules.inline.escapedEmSt.exec(d))!=null;)d=d.slice(0,h.index)+"++"+d.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;t;)if(g||(b=""),g=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(x=>(a=x.call({lexer:this},t,i))?(t=t.substring(a.raw.length),i.push(a),!0):!1))){if(a=this.tokenizer.escape(t)){t=t.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.tag(t)){t=t.substring(a.raw.length),u=i[i.length-1],u&&a.type==="text"&&u.type==="text"?(u.raw+=a.raw,u.text+=a.text):i.push(a);continue}if(a=this.tokenizer.link(t)){t=t.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(a.raw.length),u=i[i.length-1],u&&a.type==="text"&&u.type==="text"?(u.raw+=a.raw,u.text+=a.text):i.push(a);continue}if(a=this.tokenizer.emStrong(t,d,b)){t=t.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.codespan(t)){t=t.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.br(t)){t=t.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.del(t)){t=t.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.autolink(t,nd)){t=t.substring(a.raw.length),i.push(a);continue}if(!this.state.inLink&&(a=this.tokenizer.url(t,nd))){t=t.substring(a.raw.length),i.push(a);continue}if(c=t,this.options.extensions&&this.options.extensions.startInline){let x=Infinity,C=t.slice(1),S;this.options.extensions.startInline.forEach(function(L){S=L.call({lexer:this},C),typeof S=="number"&&S>=0&&(x=Math.min(x,S))}),x<Infinity&&x>=0&&(c=t.substring(0,x+1))}if(a=this.tokenizer.inlineText(c,G1)){t=t.substring(a.raw.length),a.raw.slice(-1)!=="_"&&(b=a.raw.slice(-1)),g=!0,u=i[i.length-1],u&&u.type==="text"?(u.raw+=a.raw,u.text+=a.text):i.push(a);continue}if(t){let x="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(x);break}else throw new Error(x)}}return i}},ns=class{constructor(t){this.options=t||ui}code(t,i,a){let u=(i||"").match(/\S*/)[0];if(this.options.highlight){let c=this.options.highlight(t,u);c!=null&&c!==t&&(a=!0,t=c)}return t=t.replace(/\n$/,"")+`
`,u?'<pre><code class="'+this.options.langPrefix+jt(u,!0)+'">'+(a?t:jt(t,!0))+`</code></pre>
`:"<pre><code>"+(a?t:jt(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
`+t+`</blockquote>
`}html(t){return t}heading(t,i,a,u){return this.options.headerIds?"<h"+i+' id="'+this.options.headerPrefix+u.slug(a)+'">'+t+"</h"+i+`>
`:"<h"+i+">"+t+"</h"+i+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(t,i,a){let u=i?"ol":"ul",c=i&&a!==1?' start="'+a+'"':"";return"<"+u+c+`>
`+t+"</"+u+`>
`}listitem(t){return"<li>"+t+`</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(t){return"<p>"+t+`</p>
`}table(t,i){return i&&(i="<tbody>"+i+"</tbody>"),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow(t){return`<tr>
`+t+`</tr>
`}tablecell(t,i){let a=i.header?"th":"td";return(i.align?"<"+a+' align="'+i.align+'">':"<"+a+">")+t+"</"+a+`>
`}strong(t){return"<strong>"+t+"</strong>"}em(t){return"<em>"+t+"</em>"}codespan(t){return"<code>"+t+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return"<del>"+t+"</del>"}link(t,i,a){if(t=Jf(this.options.sanitize,this.options.baseUrl,t),t===null)return a;let u='<a href="'+jt(t)+'"';return i&&(u+=' title="'+i+'"'),u+=">"+a+"</a>",u}image(t,i,a){if(t=Jf(this.options.sanitize,this.options.baseUrl,t),t===null)return a;let u='<img src="'+t+'" alt="'+a+'"';return i&&(u+=' title="'+i+'"'),u+=this.options.xhtml?"/>":">",u}text(t){return t}},Za=class{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,i,a){return""+a}image(t,i,a){return""+a}br(){return""}},Qi=class{constructor(){this.seen={}}serialize(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(t,i){let a=t,u=0;if(this.seen.hasOwnProperty(a)){u=this.seen[t];do u++,a=t+"-"+u;while(this.seen.hasOwnProperty(a))}return i||(this.seen[t]=u,this.seen[a]=0),a}slug(t,i={}){let a=this.serialize(t);return this.getNextSafeSlug(a,i.dryrun)}},Br=class{constructor(t){this.options=t||ui,this.options.renderer=this.options.renderer||new ns,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Za,this.slugger=new Qi}static parse(t,i){return new Br(i).parse(t)}static parseInline(t,i){return new Br(i).parseInline(t)}parse(t,i=!0){let a="",u,c,d,h,g,b,x,C,S,L,T,M,N,A,j,D,P,R,_,$=t.length;for(u=0;u<$;u++){if(L=t[u],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[L.type]&&(_=this.options.extensions.renderers[L.type].call({parser:this},L),_!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(L.type))){a+=_||"";continue}switch(L.type){case"space":continue;case"hr":{a+=this.renderer.hr();continue}case"heading":{a+=this.renderer.heading(this.parseInline(L.tokens),L.depth,Zf(this.parseInline(L.tokens,this.textRenderer)),this.slugger);continue}case"code":{a+=this.renderer.code(L.text,L.lang,L.escaped);continue}case"table":{for(C="",x="",h=L.header.length,c=0;c<h;c++)x+=this.renderer.tablecell(this.parseInline(L.header[c].tokens),{header:!0,align:L.align[c]});for(C+=this.renderer.tablerow(x),S="",h=L.rows.length,c=0;c<h;c++){for(b=L.rows[c],x="",g=b.length,d=0;d<g;d++)x+=this.renderer.tablecell(this.parseInline(b[d].tokens),{header:!1,align:L.align[d]});S+=this.renderer.tablerow(x)}a+=this.renderer.table(C,S);continue}case"blockquote":{S=this.parse(L.tokens),a+=this.renderer.blockquote(S);continue}case"list":{for(T=L.ordered,M=L.start,N=L.loose,h=L.items.length,S="",c=0;c<h;c++)j=L.items[c],D=j.checked,P=j.task,A="",j.task&&(R=this.renderer.checkbox(D),N?j.tokens.length>0&&j.tokens[0].type==="paragraph"?(j.tokens[0].text=R+" "+j.tokens[0].text,j.tokens[0].tokens&&j.tokens[0].tokens.length>0&&j.tokens[0].tokens[0].type==="text"&&(j.tokens[0].tokens[0].text=R+" "+j.tokens[0].tokens[0].text)):j.tokens.unshift({type:"text",text:R}):A+=R),A+=this.parse(j.tokens,N),S+=this.renderer.listitem(A,P,D);a+=this.renderer.list(S,T,M);continue}case"html":{a+=this.renderer.html(L.text);continue}case"paragraph":{a+=this.renderer.paragraph(this.parseInline(L.tokens));continue}case"text":{for(S=L.tokens?this.parseInline(L.tokens):L.text;u+1<$&&t[u+1].type==="text";)L=t[++u],S+=`
`+(L.tokens?this.parseInline(L.tokens):L.text);a+=i?this.renderer.paragraph(S):S;continue}default:{let q='Token with "'+L.type+'" type was not found.';if(this.options.silent){console.error(q);return}else throw new Error(q)}}}return a}parseInline(t,i){i=i||this.renderer;let a="",u,c,d,h=t.length;for(u=0;u<h;u++){if(c=t[u],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[c.type]&&(d=this.options.extensions.renderers[c.type].call({parser:this},c),d!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(c.type))){a+=d||"";continue}switch(c.type){case"escape":{a+=i.text(c.text);break}case"html":{a+=i.html(c.text);break}case"link":{a+=i.link(c.href,c.title,this.parseInline(c.tokens,i));break}case"image":{a+=i.image(c.href,c.title,c.text);break}case"strong":{a+=i.strong(this.parseInline(c.tokens,i));break}case"em":{a+=i.em(this.parseInline(c.tokens,i));break}case"codespan":{a+=i.codespan(c.text);break}case"br":{a+=i.br();break}case"del":{a+=i.del(this.parseInline(c.tokens,i));break}case"text":{a+=i.text(c.text);break}default:{let g='Token with "'+c.type+'" type was not found.';if(this.options.silent){console.error(g);return}else throw new Error(g)}}}return a}};function Fe(n,t,i){if(typeof n=="undefined"||n===null)throw new Error("marked(): input parameter is undefined or null");if(typeof n!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");if(typeof t=="function"&&(i=t,t=null),t=Nr({},Fe.defaults,t||{}),ed(t),i){let a=t.highlight,u;try{u=Fr.lex(n,t)}catch(h){return i(h)}let c=function(h){let g;if(!h)try{t.walkTokens&&Fe.walkTokens(u,t.walkTokens),g=Br.parse(u,t)}catch(b){h=b}return t.highlight=a,h?i(h):i(null,g)};if(!a||a.length<3||(delete t.highlight,!u.length))return c();let d=0;Fe.walkTokens(u,function(h){h.type==="code"&&(d++,setTimeout(()=>{a(h.text,h.lang,function(g,b){if(g)return c(g);b!=null&&b!==h.text&&(h.text=b,h.escaped=!0),d--,d===0&&c()})},0))}),d===0&&c();return}try{let a=Fr.lex(n,t);return t.walkTokens&&Fe.walkTokens(a,t.walkTokens),Br.parse(a,t)}catch(a){if(a.message+=`
Please report this to https://github.com/markedjs/marked.`,t.silent)return"<p>An error occurred:</p><pre>"+jt(a.message+"",!0)+"</pre>";throw a}}Fe.options=Fe.setOptions=function(n){return Nr(Fe.defaults,n),A1(Fe.defaults),Fe};Fe.getDefaults=Kf;Fe.defaults=ui;Fe.use=function(...n){let t=Nr({},...n),i=Fe.defaults.extensions||{renderers:{},childTokens:{}},a;n.forEach(u=>{if(u.extensions&&(a=!0,u.extensions.forEach(c=>{if(!c.name)throw new Error("extension name required");if(c.renderer){let d=i.renderers?i.renderers[c.name]:null;d?i.renderers[c.name]=function(...h){let g=c.renderer.apply(this,h);return g===!1&&(g=d.apply(this,h)),g}:i.renderers[c.name]=c.renderer}if(c.tokenizer){if(!c.level||c.level!=="block"&&c.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");i[c.level]?i[c.level].unshift(c.tokenizer):i[c.level]=[c.tokenizer],c.start&&(c.level==="block"?i.startBlock?i.startBlock.push(c.start):i.startBlock=[c.start]:c.level==="inline"&&(i.startInline?i.startInline.push(c.start):i.startInline=[c.start]))}c.childTokens&&(i.childTokens[c.name]=c.childTokens)})),u.renderer){let c=Fe.defaults.renderer||new ns;for(let d in u.renderer){let h=c[d];c[d]=(...g)=>{let b=u.renderer[d].apply(c,g);return b===!1&&(b=h.apply(c,g)),b}}t.renderer=c}if(u.tokenizer){let c=Fe.defaults.tokenizer||new rs;for(let d in u.tokenizer){let h=c[d];c[d]=(...g)=>{let b=u.tokenizer[d].apply(c,g);return b===!1&&(b=h.apply(c,g)),b}}t.tokenizer=c}if(u.walkTokens){let c=Fe.defaults.walkTokens;t.walkTokens=function(d){u.walkTokens.call(this,d),c&&c.call(this,d)}}a&&(t.extensions=i),Fe.setOptions(t)})};Fe.walkTokens=function(n,t){for(let i of n)switch(t.call(Fe,i),i.type){case"table":{for(let a of i.header)Fe.walkTokens(a.tokens,t);for(let a of i.rows)for(let u of a)Fe.walkTokens(u.tokens,t);break}case"list":{Fe.walkTokens(i.items,t);break}default:Fe.defaults.extensions&&Fe.defaults.extensions.childTokens&&Fe.defaults.extensions.childTokens[i.type]?Fe.defaults.extensions.childTokens[i.type].forEach(function(a){Fe.walkTokens(i[a],t)}):i.tokens&&Fe.walkTokens(i.tokens,t)}};Fe.parseInline=function(n,t){if(typeof n=="undefined"||n===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof n!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");t=Nr({},Fe.defaults,t||{}),ed(t);try{let i=Fr.lexInline(n,t);return t.walkTokens&&Fe.walkTokens(i,t.walkTokens),Br.parseInline(i,t)}catch(i){if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,t.silent)return"<p>An error occurred:</p><pre>"+jt(i.message+"",!0)+"</pre>";throw i}};Fe.Parser=Br;Fe.parser=Br.parse;Fe.Renderer=ns;Fe.TextRenderer=Za;Fe.Lexer=Fr;Fe.lexer=Fr.lex;Fe.Tokenizer=rs;Fe.Slugger=Qi;Fe.parse=Fe;var Jx=Fe.options,Xx=Fe.setOptions,ek=Fe.use,tk=Fe.walkTokens,rk=Fe.parseInline;var nk=Br.parse,ik=Fr.lex;var zn=(n,t)=>({demo:`${n}:"Header \\"${n}\\""`,examples:[{title:"Variations",view:t.map(i=>`${i}:"Header \\"${i}\\""`)},{title:"Complex content",demo:{view:n,content:['text:"Text "','link:{ text: "Link" }']}},{title:"Using anchor",demo:[{view:n,anchor:"foo",content:'text:"Explicit value for an anchor"'},{view:n,anchor:!0,content:'text:"Auto generated anchor based on text content of header"'}]}]});function id(n){let t=new Qi;function i(a,u,c,d){let{content:h,anchor:g=!1}=u;a.classList.add("view-header");let b=n.view.render(a,h||"text",c,d);return g&&b.then(()=>{let x=t.slug(g===!0?a.textContent:String(g),{dryrun:!0}),C=n.encodePageHash(n.pageId,n.pageRef,{...n.pageParams,"!anchor":x});a.prepend(X("a",{class:"view-header__anchor",id:`!anchor:${x}`,href:C}))}),b}n.view.define("header",i,{tag:"h4",usage:zn}),n.view.define("h1",i,{tag:"h1",usage:zn}),n.view.define("h2",i,{tag:"h2",usage:zn}),n.view.define("h3",i,{tag:"h3",usage:zn}),n.view.define("h4",i,{tag:"h4",usage:zn}),n.view.define("h5",i,{tag:"h5",usage:zn})}var od={demo:{view:"hstack",content:['button:{text:"First button"}','button-primary:{text:"Second button"}']}};function sd(n){n.view.define("hstack",function(t,i,a,u){let{content:c=[]}=i;return n.view.render(t,c,a,u)},{usage:od})}var ad={demo:{view:"html",data:'"<h1>I am inner HTML</h1>"'}};function ld(n){let t=document.createElement("div");n.view.define("html",function(i,a,u){t.innerHTML=u,i.append(...t.childNodes)},{tag:null,usage:ad})}var ud={demo:{view:"image",src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMjggMTI4Ij4KICAgIDxyZWN0IHg9IjY1LjYiIHk9IjI0LjYiIHRyYW5zZm9ybT0ibWF0cml4KDAuOTM5NyAtMC4zNDIgMC4zNDIgMC45Mzk3IC05Ljk0MjYgMzEuODI4KSIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjM5LjMiIGhlaWdodD0iMzkiPjwvcmVjdD4KICAgIDxyZWN0IHg9IjcwLjYiIHk9IjUyLjciIHRyYW5zZm9ybT0ibWF0cml4KC0wLjkzOTcgMC4zNDIgLTAuMzQyIC0wLjkzOTcgMTk0Ljc4NTIgODEuMTIwNCkiIGZpbGw9IiNDN0Q3RTIiIHdpZHRoPSIzOS4zIiBoZWlnaHQ9IjEwIj48L3JlY3Q+CiAgICA8cGF0aCBmaWxsPSIjOThCRUQ4IiBkPSJNMTExLjUsNTQuNmwtMS4xLDEuMUw5Ny4xLDE5LjFsMS41LDAuMmM4LDAuOSwxNC43LDYuMiwxNy40LDEzLjdsMCwwQzExOC44LDQwLjQsMTE3LDQ4LjgsMTExLjUsNTQuNnoiPjwvcGF0aD4KICAgIDxwYXRoIGZpbGw9IiM0NTRCNTQiIGQ9Ik03My41LDcyLjJjLTEuMiwwLTIuNC0wLjgtMi44LTJMNTcuMywzMy41Yy0wLjMtMC43LTAuMi0xLjYsMC4xLTIuM2MwLjMtMC43LDAuOS0xLjMsMS43LTEuNmwzNi45LTEzLjRjMS42LTAuNiwzLjMsMC4yLDMuOCwxLjhsMTMuMywzNi42YzAuMywwLjcsMC4yLDEuNi0wLjEsMi4zYy0wLjMsMC43LTAuOSwxLjMtMS43LDEuNkw3NC41LDcyQzc0LjIsNzIuMSw3My44LDcyLjIsNzMuNSw3Mi4yek02NCwzNC4zbDExLjMsMzFsMzEuMy0xMS40bC0xMS4zLTMxTDY0LDM0LjN6Ij48L3BhdGg+CiAgICA8cmVjdCB4PSIzNSIgeT0iNDYuNyIgdHJhbnNmb3JtPSJtYXRyaXgoMC45Mzk3IC0wLjM0MiAwLjM0MiAwLjkzOTcgLTE2LjIwMTEgMjAuOTg4KSIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjMyLjgiIGhlaWdodD0iMTkuNSI+PC9yZWN0PgogICAgPHJlY3QgeD0iMzcuMyIgeT0iNTkuOCIgdHJhbnNmb3JtPSJtYXRyaXgoLTAuOTM5NyAwLjM0MiAtMC4zNDIgLTAuOTM5NyAxMjUuNjc2MyAxMDMuMzk0NikiIGZpbGw9IiNDN0Q3RTIiIHdpZHRoPSIzMi44IiBoZWlnaHQ9IjYiPjwvcmVjdD4KICAgIDxwYXRoIGZpbGw9IiM0NTRCNTQiIGQ9Ik0zOS40LDc0LjJjLTAuNCwwLTAuOS0wLjEtMS4zLTAuM2MtMC43LTAuMy0xLjMtMC45LTEuNi0xLjdsLTYuNy0xOC4zYy0wLjMtMC43LTAuMi0xLjYsMC4xLTIuM2MwLjMtMC43LDAuOS0xLjMsMS43LTEuNmwzMC44LTExLjJjMC43LTAuMywxLjYtMC4yLDIuMywwLjFjMC43LDAuMywxLjMsMC45LDEuNiwxLjdMNzMsNTljMC42LDEuNi0wLjIsMy4zLTEuOCwzLjhMNDAuNCw3NEM0MCw3NC4xLDM5LjcsNzQuMiwzOS40LDc0LjJ6IE0zNi41LDU0LjdsNC42LDEyLjdsMjUuMi05LjJsLTQuNi0xMi43TDM2LjUsNTQuN3oiPjwvcGF0aD4KICAgIDxwYXRoIGZpbGw9IiM0NTRCNTQiIGQ9Ik03MCwxMTguOWMtMS4yLDAtMi40LTAuNy0yLjgtMS45bC0xNC0zNy4ybC04LjQsMy4xbC0xNy4yLDM0LjRjLTAuNywxLjUtMi41LDIuMS00LDEuM2MtMS41LTAuNy0yLjEtMi41LTEuMy00TDQwLDc5YzAuMy0wLjcsMC45LTEuMiwxLjctMS41TDU0LDczLjFjMS41LTAuNiwzLjMsMC4yLDMuOCwxLjhsMTUsNDBjMC42LDEuNi0wLjIsMy4zLTEuOCwzLjlDNzAuNywxMTguOCw3MC40LDExOC45LDcwLDExOC45eiI+PC9wYXRoPgogICAgPHBhdGggZmlsbD0iIzQ1NEI1NCIgZD0iTTEzLjYsODAuMWMtMS4yLDAtMi40LTAuOC0yLjgtMkw2LjMsNjUuOWMtMC42LTEuNiwwLjItMy4zLDEuOC0zLjhjMS42LTAuNiwzLjMsMC4yLDMuOCwxLjhsNC40LDEyLjJjMC42LDEuNi0wLjIsMy4zLTEuOCwzLjhDMTQuMyw4MC4xLDE0LDgwLjEsMTMuNiw4MC4xeiI+PC9wYXRoPgogICAgPHBhdGggZmlsbD0iIzQ1NEI1NCIgZD0iTTEzLjIsNzMuM2MtMS4yLDAtMi40LTAuOC0yLjgtMmMtMC42LTEuNiwwLjItMy4zLDEuOC0zLjhMMzUsNTkuMmMxLjYtMC42LDMuMywwLjIsMy44LDEuOGMwLjYsMS42LTAuMiwzLjMtMS44LDMuOGwtMjIuOCw4LjNDMTMuOSw3My4zLDEzLjYsNzMuMywxMy4yLDczLjN6Ij48L3BhdGg+Cjwvc3ZnPgo=",height:100},examples:[{title:"Src is not defined",demo:"image"},{title:"Bad url",demo:'image{ src: "<bad url>" }'}]};function cd(n){n.view.define("image",function(t,i){Object.assign(t,i),t.onerror=()=>t.classList.add("error"),t.onload=()=>t.classList.add("loaded")},{tag:"img",usage:ud})}var fd={beforeDemo:['md:"The same as `image` view but with "'],demo:{view:"image-preview",src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMjggMTI4Ij4KICAgIDxyZWN0IHg9IjY1LjYiIHk9IjI0LjYiIHRyYW5zZm9ybT0ibWF0cml4KDAuOTM5NyAtMC4zNDIgMC4zNDIgMC45Mzk3IC05Ljk0MjYgMzEuODI4KSIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjM5LjMiIGhlaWdodD0iMzkiPjwvcmVjdD4KICAgIDxyZWN0IHg9IjcwLjYiIHk9IjUyLjciIHRyYW5zZm9ybT0ibWF0cml4KC0wLjkzOTcgMC4zNDIgLTAuMzQyIC0wLjkzOTcgMTk0Ljc4NTIgODEuMTIwNCkiIGZpbGw9IiNDN0Q3RTIiIHdpZHRoPSIzOS4zIiBoZWlnaHQ9IjEwIj48L3JlY3Q+CiAgICA8cGF0aCBmaWxsPSIjOThCRUQ4IiBkPSJNMTExLjUsNTQuNmwtMS4xLDEuMUw5Ny4xLDE5LjFsMS41LDAuMmM4LDAuOSwxNC43LDYuMiwxNy40LDEzLjdsMCwwQzExOC44LDQwLjQsMTE3LDQ4LjgsMTExLjUsNTQuNnoiPjwvcGF0aD4KICAgIDxwYXRoIGZpbGw9IiM0NTRCNTQiIGQ9Ik03My41LDcyLjJjLTEuMiwwLTIuNC0wLjgtMi44LTJMNTcuMywzMy41Yy0wLjMtMC43LTAuMi0xLjYsMC4xLTIuM2MwLjMtMC43LDAuOS0xLjMsMS43LTEuNmwzNi45LTEzLjRjMS42LTAuNiwzLjMsMC4yLDMuOCwxLjhsMTMuMywzNi42YzAuMywwLjcsMC4yLDEuNi0wLjEsMi4zYy0wLjMsMC43LTAuOSwxLjMtMS43LDEuNkw3NC41LDcyQzc0LjIsNzIuMSw3My44LDcyLjIsNzMuNSw3Mi4yek02NCwzNC4zbDExLjMsMzFsMzEuMy0xMS40bC0xMS4zLTMxTDY0LDM0LjN6Ij48L3BhdGg+CiAgICA8cmVjdCB4PSIzNSIgeT0iNDYuNyIgdHJhbnNmb3JtPSJtYXRyaXgoMC45Mzk3IC0wLjM0MiAwLjM0MiAwLjkzOTcgLTE2LjIwMTEgMjAuOTg4KSIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjMyLjgiIGhlaWdodD0iMTkuNSI+PC9yZWN0PgogICAgPHJlY3QgeD0iMzcuMyIgeT0iNTkuOCIgdHJhbnNmb3JtPSJtYXRyaXgoLTAuOTM5NyAwLjM0MiAtMC4zNDIgLTAuOTM5NyAxMjUuNjc2MyAxMDMuMzk0NikiIGZpbGw9IiNDN0Q3RTIiIHdpZHRoPSIzMi44IiBoZWlnaHQ9IjYiPjwvcmVjdD4KICAgIDxwYXRoIGZpbGw9IiM0NTRCNTQiIGQ9Ik0zOS40LDc0LjJjLTAuNCwwLTAuOS0wLjEtMS4zLTAuM2MtMC43LTAuMy0xLjMtMC45LTEuNi0xLjdsLTYuNy0xOC4zYy0wLjMtMC43LTAuMi0xLjYsMC4xLTIuM2MwLjMtMC43LDAuOS0xLjMsMS43LTEuNmwzMC44LTExLjJjMC43LTAuMywxLjYtMC4yLDIuMywwLjFjMC43LDAuMywxLjMsMC45LDEuNiwxLjdMNzMsNTljMC42LDEuNi0wLjIsMy4zLTEuOCwzLjhMNDAuNCw3NEM0MCw3NC4xLDM5LjcsNzQuMiwzOS40LDc0LjJ6IE0zNi41LDU0LjdsNC42LDEyLjdsMjUuMi05LjJsLTQuNi0xMi43TDM2LjUsNTQuN3oiPjwvcGF0aD4KICAgIDxwYXRoIGZpbGw9IiM0NTRCNTQiIGQ9Ik03MCwxMTguOWMtMS4yLDAtMi40LTAuNy0yLjgtMS45bC0xNC0zNy4ybC04LjQsMy4xbC0xNy4yLDM0LjRjLTAuNywxLjUtMi41LDIuMS00LDEuM2MtMS41LTAuNy0yLjEtMi41LTEuMy00TDQwLDc5YzAuMy0wLjcsMC45LTEuMiwxLjctMS41TDU0LDczLjFjMS41LTAuNiwzLjMsMC4yLDMuOCwxLjhsMTUsNDBjMC42LDEuNi0wLjIsMy4zLTEuOCwzLjlDNzAuNywxMTguOCw3MC40LDExOC45LDcwLDExOC45eiI+PC9wYXRoPgogICAgPHBhdGggZmlsbD0iIzQ1NEI1NCIgZD0iTTEzLjYsODAuMWMtMS4yLDAtMi40LTAuOC0yLjgtMkw2LjMsNjUuOWMtMC42LTEuNiwwLjItMy4zLDEuOC0zLjhjMS42LTAuNiwzLjMsMC4yLDMuOCwxLjhsNC40LDEyLjJjMC42LDEuNi0wLjIsMy4zLTEuOCwzLjhDMTQuMyw4MC4xLDE0LDgwLjEsMTMuNiw4MC4xeiI+PC9wYXRoPgogICAgPHBhdGggZmlsbD0iIzQ1NEI1NCIgZD0iTTEzLjIsNzMuM2MtMS4yLDAtMi40LTAuOC0yLjgtMmMtMC42LTEuNiwwLjItMy4zLDEuOC0zLjhMMzUsNTkuMmMxLjYtMC42LDMuMywwLjIsMy44LDEuOGMwLjYsMS42LTAuMiwzLjMtMS44LDMuOGwtMjIuOCw4LjNDMTMuOSw3My4zLDEzLjYsNzMuMywxMy4yLDczLjN6Ij48L3BhdGg+Cjwvc3ZnPgo=",height:100},examples:[{title:"Src is not defined",demo:"image-preview"},{title:"Bad url",demo:'image-preview{ src: "<bad url>" }'}]};function dd(n){n.view.define("image-preview",function(t,i,a,u){this.render(t,{view:"image",...i},a,u)},{usage:fd})}var hd={demo:{view:"indicator",data:{label:"Label",value:"1234"}},examples:[{title:"Indicator as link",demo:{view:"indicator",data:{label:"Label",value:"4321",href:"#"}}}]};function pd(n){n.view.define("indicator",function(t,i,a,u){let{value:c,label:d}=i,{href:h}=a||{},g=document.createElement("div"),b=document.createElement("div");return g.className="value",b.className="label",h&&(t.href=h),Promise.all([n.view.render(g,c||"text:value",a,u),n.view.render(b,d||"text:label",a,u)]).then(()=>t.append(g,b))},{tag:"a",usage:hd})}var gd=new Function("return (value) => alert(`Changed to ${value}!`)")(),md={examples:[{title:"Input with value",demo:{view:"input",value:'"value"'}},{title:"Input with placeholder",demo:{view:"input",placeholder:"placeholder"}},{title:"Input type number with min and max",demo:{view:"input",htmlType:"number",htmlMin:10,htmlMax:20}},{title:"Input with onChange",demo:{view:"input",onChange:gd}},{title:"Input with onChange debounced",demo:{view:"input",onChange:gd,debounce:300}}]};function Y1(n,t){try{return new RegExp("((?:"+n+")+)",t)}catch(i){}return new RegExp("((?:"+n.replace(/[\[\]\(\)\?\+\*\{\}\\]/g,"\\$&")+")+)",t)}function Zi(n,t="i"){let i=Y1(n,t);return i.rawSource=n,i}function K1(n){let t=typeof n;return n!=null&&(t==="object"||t==="function")}function Rn(n,t){if(typeof t=="number"&&(t={wait:t}),!K1(t))return n;let{wait:i}=t,a,u,c,d,h,g,b=0,x=!1,C=!1,S=!0;if(typeof n!="function")throw new TypeError("Expected a function");i=Math.max(0,Number(i)||0),x=Boolean(t.leading),C="maxWait"in t,c=C?Math.max(Number(t.maxWait)||0,i):c,S="trailing"in t?Boolean(t.trailing):S;function L(H){let K=a,W=u;return a=u=void 0,b=H,d=n.apply(W,K),d}function T(H,K){return setTimeout(H,K)}function M(H){clearTimeout(H)}function N(H){return b=H,h=T(D,i),x?L(H):d}function A(H){let K=H-g,W=H-b,U=i-K;return C?Math.min(U,c-W):U}function j(H){let K=H-g,W=H-b;return g===void 0||K>=i||K<0||C&&W>=c}function D(){let H=Date.now();if(j(H))return P(H);h=T(D,A(H))}function P(H){return h=void 0,S&&a?L(H):(a=u=void 0,d)}function R(){h!==void 0&&M(h),b=0,a=g=u=h=void 0}function _(){return h===void 0?d:P(Date.now())}function $(){return h!==void 0}function q(...H){let K=Date.now(),W=j(K);if(a=H,u=this,g=K,W){if(h===void 0)return N(g);if(C)return h=T(D,i),L(g)}return h===void 0&&(h=T(D,i)),d}return q.cancel=R,q.flush=_,q.pending=$,q}function vd(n){let t={regexp:i=>i?Zi(i):null,text:i=>i};n.view.define("input",function(i,a,u,c){let{name:d,value:h,type:g="text",placeholder:b,onInit:x,onChange:C,htmlType:S="text",htmlMin:L,htmlMax:T,debounce:M}=a,N=t[g]||t.text,A=i.appendChild(document.createElement("input")),j=h?n.query(h,u,c):c[d];typeof j!="string"&&(j=""),A.type=S,A.value=j,A.placeholder=[b||"",N!==t.text?"("+g+")":""].filter(Boolean).join(" "),typeof L!="undefined"&&(A.min=L),T&&(A.max=T),A.addEventListener("input",Rn(()=>{let D=A.value.trim();j!==D&&(j=D,typeof C=="function"&&C(N(D),d,u,c))},M)),typeof x=="function"&&x(N(A.value.trim()),d,u,c)},{usage:md})}var yd={demo:{view:"link",data:{text:"I am link",href:"#"}},examples:[{title:"Link opened in new tab",demo:{view:"link",data:{text:"Discovery github",href:"https://github.com/discoveryjs/discovery",external:!0}}}]};function bd(n){n.view.define("link",function(t,i,a,u){let{content:c,onClick:d}=i,{href:h,text:g,external:b}=a||{};if(typeof a=="string"&&(h=g=a),g===void 0&&h?g=h:h===void 0&&g&&(h=g),h&&(t.href=h),b&&t.setAttribute("target","_blank"),typeof d=="function"&&(t.classList.add("onclick"),t.addEventListener("click",x=>{x.preventDefault(),d(t,a,u)})),c)return n.view.render(t,c,a,u);t.textContent=g},{tag:"a",usage:yd})}function wd(n){n.view.define("list-item",function(t,i,a,u){let{content:c="text"}=i;return n.view.render(t,c,a,u)},{tag:"li"})}var ci=(n,t)=>({demo:{view:n,data:["one","two","three","four"]},examples:[{title:"Variations",demo:{view:"context",data:["foo","bar","baz"],content:t.map(i=>[`header{ content: 'md:${JSON.stringify('`view: \\"'+i+'\\"`')}' }`,i])}},{title:"Configure item's content",demo:[{view:n,data:["one","two","three","four"],item:['text:"<item> "',{view:"link",data:'{ href: "#" + $ }'}]}]},{title:"Configure item's config",demo:{view:n,data:["one","two","three","four"],itemConfig:{className:"special"},item:{view:"text",data:'"prefix-" + $'}}}]});function xd(n){function t(i,a,u,c){let{item:d,itemConfig:h,limit:g,emptyText:b}=a;if(b!==!1&&b!==""&&i.setAttribute("emptyText",b||"Empty list"),!Array.isArray(u)&&u&&(u=[u]),Array.isArray(u))return n.view.renderList(i,this.composeConfig({view:"list-item",content:d},h),u,c,0,n.view.listLimit(g,25))}n.view.define("list",t,{usage:ci}),n.view.define("inline-list",t,{usage:ci}),n.view.define("comma-list",t,{usage:ci}),n.view.define("ol",t,{tag:"ol",usage:ci}),n.view.define("ul",t,{tag:"ul",usage:ci})}var Ja={demo:{view:"markdown",source:`# Markdown example

> NOTE: That's an experimental view based on [marked](https://github.com/markedjs/marked)

Markdown is good because:
* You'll get **formatted** *text* with _no tags_
* It's much simpler than \`HTML\`

\`\`\`html
<b>bold</b><i>italic</i>
\`\`\`
[Read more](https://guides.github.com/features/mastering-markdown/)`},examples:[{title:"Inline config",demo:'markdown{ source: "**Hello** `world`!" }'},{title:"Shorthand syntax",beforeDemo:['md:"You can use `md` as an alias for `markdown` with a string as data. That\'s a **shortest** definition for a marked text"'],demo:'md:"**Hello** `world`!"'},{title:"Array of strings as a source",beforeDemo:['md:"Array of strings might be passed as a value for `source` property which is useful for a long sources\\n> NOTE: This doesn\'t work a source passed via data"'],demo:{view:"markdown",source:["Array","of","`strings`"]}},{title:"Interpolation",beforeDemo:['md:"Interpolation can be used almost anywhere in a markdown to embed the result of a jora query into resulting HTML. Just wrap a jora query in `{{`{{}` + `}`}}`:"'],demo:{view:"md",source:["Simple evaluation: 2 + 2 = `{{ 2 + 2 }}`","","Markdown view has {{ viewDef.examples.size() }} examples"]}},{title:"Disable anchors for headers",beforeDemo:"Hover a header to see a chain icon on the left side of header when anchors are enabled:",demo:[{view:"markdown",source:"## header with default settings"},{view:"markdown",anchors:!1,source:"## header with disabled anchor"}]},{title:"Showcase",demo:{view:"markdown",source:`
# Header
## Header
### Header
#### Header
##### Header
* One
* Two
    * Three

4. Four
5. Five
    6. Six
- [{{ true }}] Task 1
- [x] Task 2

Interpolation in text: 2 + 2 = \`{{ 2 + 2 }}\`, or in attribute: [link](#dummy-link/{{"exam" + "ple"}} "{{ "example" + " title" }}")

Paragraph **bold** __bold__ *italic* _italic_ ~line-through~ \`code\` [link](#href)

>Blockquote
> > Line 2

\`\`\`js
var some = "code";
\`\`\`

foo | bar
----|-----
1 | A
2 | C
3 | E
`.trim().split(/\n/)}}]};var kd=class extends Fe.Renderer{heading(t,i,a,u){let{discovery:c,anchors:d}=this.options,h="";if(d){let g=u.slug(a),b=c.encodePageHash(c.pageId,c.pageRef,{...c.pageParams,"!anchor":g});h=`<a class="view-header__anchor" id="!anchor:${lt(g)}" href="${b}"></a>`}return`<h${i} class="view-header view-h${i}">${h}${t}</h${i}>
`}link(t,i,a){if(t===null)return a;let u='<a class="view-link" href="'+lt(t)+'"';return i&&(u+=' title="'+lt(i)+'"'),t.startsWith("#")||(u+=' target="_blank"'),u+=">"+a+"</a>",u}checkbox(t){return'<label class="view-checkbox"><input type="checkbox" disabled'+(t?" checked":"")+"/></label> "}list(t,i,a){let u=i?"ol":"ul",c=i&&a!==1?` start="${a}"`:"";return`<${u} class="view-${u}"${c}>
`+t+`
</${u}>
`}listitem(t){return'<li class="view-list-item">'+t+`</li>
`}table(t,i){return`<table class="view-table">
<thead>
`+t.replace(/ class="view-table-row"/g,"")+`</thead>
`+(i?"<tbody>"+i+"</tbody>":"")+`</table>
`}tablerow(t){return`<tr class="view-table-row">
`+t+`</tr>
`}tablecell(t,i){let a=i.header?"th":"td";return`<${a} class="view-table-cell"${i.align?` align="${i.align}"`:""}>`+t+`</${a}>
`}};Fe.setOptions({smartLists:!0,langPrefix:"discovery-markdown-",renderer:new kd});function Cd(n){let t={discovery:n,highlight(c,d,h){let g=document.createDocumentFragment();n.view.render(g,"source",{syntax:d,content:c}).then(()=>h(null,g.firstChild.outerHTML))}};function i(c,d){return c.replace(/{{(\d+)}}/gs,(h,g)=>d[g])}function a(c,d){for(let h of c.childNodes)switch(h.nodeType){case document.ELEMENT_NODE:if(!h.classList.contains("view-source")){a(h,d);for(let g of h.attributes)g.nodeValue=i(g.nodeValue,d)}break;case document.TEXT_NODE:h.nodeValue=i(h.nodeValue,d);break}}function u(c,d,h,g){let{source:b,anchors:x=!0}=d,C=new Map,S=typeof h=="string"?h:b||"";return Array.isArray(S)&&(S=S.join(`
`)),S=S.replace(/{{(.+?)}}/gs,(L,T)=>(T=T.trim(),C.has(T)||C.set(T,C.size),`{{${C.get(T)}}}`)),c.classList.add("view-markdown"),new Promise(L=>{Fe(S,{...t,anchors:x},(T,M)=>{if(c.innerHTML=M.replace(/\n(<\/code>)/g,"$1"),C.size>0){let N=new Array(C.size);for(let[A,j]of C.entries())try{N[j]=n.query(A,h,g)}catch(D){console.error("Interpolation query error: "+D.message)}a(c,N)}L()})})}n.view.define("markdown",u,{usage:Ja}),n.view.define("md",u,{usage:Ja})}var Q1=new Function("return (value) => alert(`Changed to ${value.text}!`)")(),Sd={demo:{view:"menu",data:[{text:"one",href:"#"},{text:"two",href:"#"},{text:"three",href:"#"}]},examples:[{title:"With limit",demo:{view:"menu",data:[{text:"one",href:"#"},{text:"two",href:"#"},{text:"three",href:"#"}],limit:2}},{title:"With custom item",demo:{view:"menu",data:[{text:"one",href:"#"},{text:"two",href:"#"},{text:"three",href:"#"}],item:"h1:text"}},{title:"On chage handler",demo:{view:"menu",onChange:Q1,data:[{text:"one",href:"#"},{text:"two",href:"#"},{text:"three",href:"#"}]}}]};function Ld(n){n.view.define("menu",function(t,i,a,u){let{name:c="filter",item:d,itemConfig:h,limit:g,emptyText:b,onClick:x,onInit:C,onChange:S}=i;if(b!==!1&&b!==""&&t.setAttribute("emptyText",b||"No items"),Array.isArray(a)){let L=this.composeConfig({view:"menu-item",content:d,onClick:typeof x=="function"?x:typeof S=="function"?T=>S(T,c):void 0},h);return n.view.renderList(t,L,a,u,0,n.view.listLimit(g,25)).then(()=>{typeof C=="function"&&C(n.query(".[selected].pick()",a,u),c)})}},{usage:Sd})}var Td={demo:{view:"menu",data:[{text:"one",href:"#"},{text:"two",href:"#"},{text:"three",href:"#"}]},examples:[{title:"Preselected item",demo:{view:"menu",data:[{text:"one",href:"#"},{text:"two",href:"#",selected:!0},{text:"three",href:"#"}]}},{title:"Disabled item",demo:{view:"menu",data:[{text:"one",href:"#"},{text:"two",href:"#",disabled:!0},{text:"three",href:"#"}]}},{title:"External links",demo:{view:"menu",data:[{text:"one",external:!0,href:"https://github.com/discoveryjs/discovery"},{text:"two",external:!0,href:"https://github.com/discoveryjs/discovery"},{text:"three",external:!0,href:"https://github.com/discoveryjs/discovery"}]}}]};function Md(n){n.view.define("menu-item",function(t,i,a,u){let{content:c,onClick:d}=i,{text:h,selected:g=!1,disabled:b=!1,href:x,external:C}=a||{};if(b?t.classList.add("disabled"):typeof d=="function"?(t.addEventListener("click",()=>d(a,u)),t.classList.add("onclick")):x&&(t.href=x,t.target=C?"_blank":""),g&&t.classList.add("selected"),c)return n.view.render(t,c,a,u);t.textContent=typeof a=="string"?a:h||"Untitled item"},{tag:"a",usage:Td})}var Z1=()=>alert("changed!"),Ed={demo:{view:"nav-button",data:{text:"I am nav button"}},examples:[{title:"With href",demo:{view:"nav-button",data:{text:"I am nav button",href:"#"}}},{title:"External link",demo:{view:"nav-button",data:{text:"I am nav button",external:!0,href:"https://github.com/discoveryjs/discovery"}}},{title:"On click handler",demo:{view:"nav-button",data:{text:"I am nav button"},onClick:Z1}}]};function Nd(n){n.view.define("nav-button",function(t,i,a,u){let{name:c,content:d,disabled:h=!1,onClick:g}=i,{text:b="",href:x,external:C}=a||{};if(c&&(t.dataset.name=c),n.query(h,a,u)?t.classList.add("disabled"):typeof g=="function"?(t.addEventListener("click",()=>g(t,a,u)),t.classList.add("onclick")):x&&(t.href=x,t.target=C?"_blank":""),d)return n.view.render(t,d,a,u);t.textContent=b},{tag:"a",usage:Ed})}var jd=n=>({demo:`${n}:"That's a \\"${n}\\""`,examples:[{title:"Prelude",demo:{view:n,prelude:['badge:{ text: "demo" }','badge:{ text: "demo", prefix: "prelude", postfix: "postfix" }'],content:'h1:"Header"'}}]});function Ad(n){n.view.define("page-header",function(i,a,u,c){let{prelude:d,content:h,onInit:g,onChange:b}=a,x=i.appendChild(X("div","view-page-header__prelude")),C=i.appendChild(X("div","view-page-header__content")),S=L=>typeof g!="function"&&typeof b!="function"?L:this.composeConfig(L,{onInit:g,onChange:b});return Promise.all([n.view.render(x,S(d||[]),u,c),n.view.render(C,S(h||"text"),u,c)])},{usage:jd})}var Xa={};$t(Xa,{pointerXY:()=>vn});var Od=new Hr({x:0,y:0},(n,t)=>n.x!==t.x||n.y!==t.y);document.addEventListener("pointermove",({x:n,y:t})=>Od.set({x:n,y:t}),mr);var vn=Od.readonly;var vr=[],Dd=[!1,"popup-hover","trigger-click"],J1={position:"trigger",hoverTriggers:null,hoverPin:!1,hideIfEventOutside:!0,hideOnResize:!0,render:void 0};function el(n,t){return n.el.contains(t)?n:n.relatedPopups.reduce((i,a)=>i||el(a,t),null)}function Id(n){return n?n.getRootNode({composed:!0})===document:!0}function is(n){vr.slice().forEach(t=>t.hideIfEventOutside(n))}function X1(){vr.slice().forEach(n=>n.hideIfTriggerElementNotInDocument())}function Pd(n){vr.slice().forEach(t=>t.hideOnResize(n))}function zd(n){let t=[],i=new Set,a=null,u=null,c=()=>{a===null&&(a=[n.addHostElEventListener("mouseenter",({target:d})=>{if(d!==document)for(let h of t){let g=el(h,d),b=g?g.el:d.closest(h.options.hoverTriggers);b&&(h.hideTimer=clearTimeout(h.hideTimer),b!==h.lastHoverTriggerEl&&((!g||!g.hoverPinned)&&(h.lastHoverTriggerEl=b),g||(h.hoverPinned=!1,h.el.classList.remove("pinned"),h.show(b))))}},mr),n.addHostElEventListener("mouseleave",({target:d})=>{for(let h of t)h.lastHoverTriggerEl===d&&(h.lastHoverTriggerEl=null,h.hideTimer=setTimeout(h.hide,100))},mr),n.addGlobalEventListener("scroll",d=>{u=setTimeout(()=>is(d),0)},!0),n.addHostElEventListener("scroll",d=>{clearTimeout(u),is(d)}),n.addGlobalEventListener("click",d=>{u=setTimeout(()=>is(d),0)},!0),n.addHostElEventListener("click",d=>{clearTimeout(u),is(d),setTimeout(X1,0);for(let h of t)h.options.hoverPin==="trigger-click"&&h.lastHoverTriggerEl&&h.lastTriggerEl.contains(d.target)&&(h.lastHoverTriggerEl=null,h.hoverPinned=!0,h.el.classList.add("pinned"),d.stopPropagation())},!0)])};vn.subscribe(()=>{for(let d of vr)d.options.position==="pointer"&&!d.hoverPinned&&!d.frozen&&d.updatePosition()}),n.inspectMode.subscribe(d=>d?vr.forEach(h=>i.add(h)):i.clear()),n.view.Popup=class{constructor(h){this.options={...J1,...h},this.el=document.createElement("div"),this.el.classList.add("discovery-view-popup"),this.hide=this.hide.bind(this),this.hideTimer,this.lastTriggerEl=null,this.lastHoverTriggerEl=null,this.hoverPinned=!1,this.frozen=!1,this.options.className&&this.el.classList.add(this.options.className),Dd.includes(this.options.hoverPin)||(console.warn(`Bad value for \`Popup#options.hoverPin\` (should be ${Dd.join(", ")}):`,this.options.hoverPin),this.options.hoverPin=!1),this.options.hoverTriggers&&(this.el.classList.add("show-on-hover"),this.el.dataset.pinMode=this.options.hoverPin||"none",t.push(this),c())}get relatedPopups(){return vr.filter(h=>this.el.contains(h.lastTriggerEl))}get visible(){return vr.includes(this)}toggle(...h){this.visible?this.hide():this.show(...h)}show(h,g=this.options.render){let b=n.dom.container;this.hideTimer=clearTimeout(this.hideTimer),this.relatedPopups.forEach(x=>x.hide()),this.el.classList.toggle("inspect",n.inspectMode.value),typeof g=="function"&&(this.el.innerHTML="",g(this.el,h,this.hide)),this.lastTriggerEl&&this.lastTriggerEl.classList.remove("discovery-view-popup-active"),h&&h.classList.add("discovery-view-popup-active"),this.lastTriggerEl=h||null,this.visible||(vr.push(this),vr.length===1&&window.addEventListener("resize",Pd)),this.updatePosition(),b.appendChild(this.el)}updatePosition(){if(!this.visible||this.options.position!=="pointer"&&!this.lastTriggerEl)return;let h=n.dom.container,g=Yi(h.firstChild),b=Ga(window,g),{x,y:C}=vn.value,S=3,L=this.options.position!=="pointer"?mn(this.lastTriggerEl,h):{left:x+S,right:x-S,top:C-S,bottom:C+S},T=L.top-b.top-3,M=b.bottom-L.bottom-3,N=L.right-b.left-3,A=b.right-L.left-3;T>M?(this.el.style.maxHeight=T+"px",this.el.style.top="auto",this.el.style.bottom=b.bottom-L.top+"px",this.el.dataset.vTo="top"):(this.el.style.maxHeight=M+"px",this.el.style.top=L.bottom-b.top+"px",this.el.style.bottom="auto",this.el.dataset.vTo="bottom"),N>A?(this.el.style.left="auto",this.el.style.right=b.right-L.right+"px",this.el.style.maxWidth=N+"px",this.el.dataset.hTo="left"):(this.el.style.left=L.left-b.left+"px",this.el.style.right="auto",this.el.style.maxWidth=A+"px",this.el.dataset.hTo="right"),this.relatedPopups.forEach(j=>j.updatePosition())}freeze(){this.frozen=!0,this.el.classList.add("frozen")}unfreeze(){this.frozen=!1,this.el.classList.remove("frozen"),this.updatePosition()}hide(){this.hideTimer=clearTimeout(this.hideTimer),this.visible&&!i.has(this)&&(this.relatedPopups.forEach(h=>h.hide()),vr.splice(vr.indexOf(this),1),this.el.remove(),this.unfreeze(),this.lastTriggerEl&&(this.lastTriggerEl.classList.remove("discovery-view-popup-active"),this.lastTriggerEl=null),vr.length===0&&window.removeEventListener("resize",Pd))}hideIfEventOutside({target:h}){!this.options.hideIfEventOutside||i.has(this)||this.lastTriggerEl&&this.lastTriggerEl.contains(h)||el(this,h)||this.hide()}hideIfTriggerElementNotInDocument(){(!Id(this.lastHoverTriggerEl)||!Id(this.lastTriggerEl))&&this.hide()}hideOnResize(){!this.options.hideOnResize||i.has(this)||this.hide()}}}var Rd={demo:{view:"progress",progress:.5,content:'text:"Loading..."'},examples:[{title:"With no label (content)",demo:{view:"progress",progress:.25}},{title:"Custom color",demo:{view:"progress",progress:.85,color:"#bdab77",content:'text:"Yellow progress"'}}]};function _d(n){n.view.define("progress",function(t,i,a,u){let{content:c,progress:d,color:h}=i,g=t.appendChild(X("div",{class:"progress",style:`--progress: ${Math.max(0,Math.min(1,Number(d)))};--color: ${h||"unset"};`}));if(c){let b=t.insertBefore(X("div",{class:"content"}),g);return n.view.render(b,c,a,u)}},{usage:Rd})}var Hd={demo:{view:"section",header:'text:"I am section"',content:['text:"content"']}};function Fd(n){n.view.define("section",function(t,i,a,u){let{header:c,content:d}=i;return n.view.render(t,[{view:"header",content:c},d],a,u)},{usage:Hd})}var eb=new Function("return (value) => alert(`Changed to ${value}!`)")(),Bd={demo:{view:"select",data:["one","two","three","four"]},examples:[{title:"Select with value",demo:{view:"select",value:'"three"',data:["one","two","three","four"]}},{title:"Select with reset option",demo:{view:"select",resetItem:!0,value:'"three"',data:["one","two","three","four"]}},{title:"Select with placeholder",demo:{view:"select",placeholder:"placeholder",data:["one","two","three","four"]}},{title:"Select with onChange",demo:{view:"select",onChange:eb,data:["one","two","three","four"]}},{title:"Select with custom options",demo:{view:"select",item:"h1:text",data:["one","two","three","four"]}}]};function Wd(n){let t="text-match:{ text, match: #.filter }",i="{ value: $, text: #.selectVariantTextQuery.query($, #) }",a=new n.view.Popup({className:"view-select-popup"});n.view.define("select",function(u,c,d,h){function g(){if(u.innerHTML="",_!==void 0)return n.view.render(u,n.view.composeConfig({view:"menu-item",data:i,content:N},A),_,$)}let{name:b,value:x,text:C="$",placeholder:S,limit:L,minItemsFilter:T=10,resetItem:M=!1,item:N=t,itemConfig:A,beforeItems:j,afterItems:D,onInit:P,onChange:R}=c,_=x?n.query(x,d,h):h[b],$={...h,selectMinItemsFilter:T,selectCurrentValue:_,selectVariantTextQuery:C,selectResetItem:M?[{value:void 0,text:"",...M,resetItem:!0}]:[]},q=[];return j&&q.push(n.view.composeConfig(j,{onInit:P,onChange:R})),q.push({view:"context",data:`.(${i})`,modifiers:{view:"input",when:"size() >= #.selectMinItemsFilter",type:"regexp",name:"filter",className:"view-select__filter",placeholder:"Filter"},content:{view:"menu",className:"view-select__variants",data:"#.selectResetItem + .[no #.filter or text~=#.filter]",limit:L,itemConfig:n.view.composeConfig({className:[H=>H.resetItem?"reset-item":"",H=>H.value===_?"selected":""]},A),item:N,onClick(H){a.hide(),_!==H.value&&(_=H.value,$={...$,selectCurrentValue:_},g(),typeof R=="function"&&R(H.value,b,H,h))}}}),D&&q.push(n.view.composeConfig(D,{onInit:P,onChange:R})),S&&(u.dataset.placeholder=S),u.tabIndex=0,u.addEventListener("click",()=>{a.toggle(u,H=>n.view.render(H,q,d,$).then(()=>(H.querySelector(".view-select__filter input")||{focus(){}}).focus()))}),typeof P=="function"&&P(_,b,d,h),g()},{usage:Bd})}function tl(n,t,i){for(let a in n){if(!hasOwnProperty.call(n,a))continue;if(!t){i.properties=null;break}let u;i.dictMode?(u=i.dictMode,u.count++,u.keys.add(a)):i.properties.has(a)?(u=i.properties.get(a),u.count++):(u={count:1,map:Object.create(null)},i.properties.set(a,u)),Ji(n[a],t-1,u.map)}}function Ji(n,t,i=Object.create(null)){let a=n===null?"null":Array.isArray(n)?"array":typeof n;switch(a){default:a in i||(i[a]=new Map),i[a].set(n,(i[a].get(n)||0)+1);break;case"object":"object"in i||(i.object=new Map,i.object.count=0,i.object.properties=new Map,i.object.dictMode=null,i.object.sortKeys=!1),i.object.count++,i.object.has(n)?i.object.set(n,i.object.get(n)+1):(i.object.set(n,1),tl(n,t,i.object));break;case"array":"array"in i||(i.array=new Map,i.array.count=0,i.array.map=Object.create(null)),i.array.count++,i.array.set(n,(i.array.get(n)||0)+1);for(let u=0;u<n.length;u++)Ji(n[u],t,i.array.map);break}return i}var os=["rgba(83,211,75,0.75)","rgba(241,235,44,0.75)","rgba(244,152,99,0.75)","rgba(148,99,244,0.75)","rgba(44,132,241,0.75)","rgba(233,117,117,0.75)","rgba(85,187,155,0.75)","rgba(151,147,99,0.75)","rgba(216,107,196,0.75)","rgba(108,204,227,0.75)","rgba(164,164,164,0.75)"],Xi=["null","undefined","string","number","bigint","boolean","symbol","function","array","object"];function eo(n,t,i,a=[],u=""){Object.keys(t).sort((c,d)=>Xi.indexOf(c)-Xi.indexOf(d)).forEach((c,d)=>{switch(d>0&&n.appendChild(tr(" | ")),c){default:{let h=n.appendChild(X("span","type",c));i.set(h,{type:"type",path:a,stat:t,name:c});break}case"object":{let h=t[c],{properties:g,dictMode:b,sortKeys:x}=h;if(g===null){i.set(n.appendChild(X("span","expand","{\u2026}")),{type:"expand",path:a,map:t[c],offset:u});break}if(g.size===0){n.appendChild(X("span","object","{}"));break}let C=h.size,S=b?[["[key]",b]]:[...g.entries()],L=u+"    ",T=n.appendChild(X("span","object",["{",X("span",{"data-action":"collapse"})]));g.size>1&&(T.appendChild(X("span",{title:"Toggle dictionary mode (collapse all the values in a single signature)","data-action":"dict-mode","data-enabled":b!==null})),S.some(([M],N)=>N!==0&&M<S[N-1][0])&&T.appendChild(X("span",{title:"Toggle keys sorting","data-action":"sort-keys","data-enabled":x}))),i.set(T,{type:"shape",path:a,map:t[c],offset:u}),C>1&&(T.appendChild(X("span","count")).dataset.value=String(C)),x&&S.sort(([M],[N])=>M<N?-1:M>N?1:0);for(let[M,{count:N,map:A}]of S){let j=X("span","property",[M]);i.set(j,{type:"property",path:a,stat:t,name:M,map:A}),T.appendChild(tr(`
${L}`)),T.appendChild(j),N!==C&&b===null&&j.appendChild(X("span","optional","?")),T.appendChild(tr(": ")),eo(T,A,i,a.concat(b?"*":M),L),T.appendChild(tr(";"))}T.lastChild.nodeValue===";"&&T.appendChild(tr(`
${u}`)),T.appendChild(tr("}"));break}case"array":n.appendChild(tr("[")),eo(n,t[c].map,i,a,u),n.appendChild(tr("]"));break}})}function fi(n,t){return n.toFixed(t).replace(/\.?0+$/,"")}function qd(n){let t=Math.cos(2*Math.PI*n),i=Math.sin(2*Math.PI*n);return[t,i]}function $d(n){let t=0;return['<svg viewBox="-1 -1 2 2" class="pie">',...n.map(i=>{let[a,u]=qd(t),[c,d]=qd(t+=i.percent),h=i.percent>.5?1:0;return`<path d="${[`M ${a} ${u}`,`A 1 1 0 ${h} 1 ${c} ${d}`,"L 0 0"].join(" ")}" fill="${i.color}"/>`}),"</svg>"].join(`
`)}function tb(n){let t=0;for(let i in n)n[i].forEach(a=>t+=a);return t}function rb(n){let t=Object.create(null);for(let i in n)t[i]=0,n[i].forEach(a=>t[i]+=a);return t}function Ud(n,t,i){let{count:a,map:u}=t.stat.object.dictMode||t.stat.object.properties.get(t.name),c=(t.stat.object.dictMode||t.stat.object).count,d={name:t.name,path:t.path,total:c,count:a,percent:fi(100*a/c,1)+"%"};i.view.render(n,[{view:"block",when:"path",className:"path",data:h=>i.pathToQuery(h.path),content:"text:$"},{view:"h1",className:"property",content:["text:name",{view:"html",when:"count != total",data:`"<span class=\\"usage-stat optional\\">" + (
                        "(in <span class=\\"num\\">" + count + "</span> of <span class=\\"num\\">" + total + "</span> objects, <span class=\\"num\\">" + percent + "</span>)"
                    ) + "</span>"`}]}],d),Vd(n,{map:u,count:a},i)}function Vd(n,{map:t,count:i},a){let u=rb(t),c=[],d=Xi.filter(h=>h in t);Object.entries(u).sort(([,h],[,g])=>h-g).reverse().forEach(([h,g],b)=>{c.push({name:lt(h),count:g,percent:g/i,percent100:fi(100*g/i,1),color:os[b]})}),a.view.render(n,{view:"block",when:"typeStat.size() > 1",data:"typeStat",className:"pie-stat",content:[{view:"block",content:{view:"html",data:$d}},{view:"block",content:['html:"<span class=\\"list-header\\">Types usage:</span>"',{view:"list",item:`html:
                            "<span class=\\"dot\\" style=\\"--size: 10px; background-color: " + color + "\\"></span> " +
                            "<span class=\\"caption\\">" + name + "</span>" +
                            "<span class=\\"times\\"> \xD7 " + count + " (" + percent100 + "%)</span>"
                        `}]}]},c),d.forEach(h=>rl(n,{name:h,stat:t},a))}function rl(n,t,i){let a=t.stat[t.name],u=tb(t.stat),c=[],d;switch(t.name){case"number":{let h=[],g=0,b=0,x=0,C=Infinity,S=-Infinity;a.forEach((L,T)=>{h.push({count:L,value:T}),g+=T*L,b+=L,L>1&&x++,T<C&&(C=T),T>S&&(S=T)}),d={type:t.name,count:b,distinct:a.size,duplicated:x,min:C,max:S,sum:g,avg:fi(g/b,3),values:h.sort((L,T)=>T.count-L.count||L.value-T.value)},d.distinct>1&&c.push({view:"block",className:"overview-stat",content:`html:
                        "range: (min) <span class=\\"num\\">" + min + "</span> ... " +
                        "<span class=\\"num\\">" + max + "</span> (max), " +
                        "avg: <span class=\\"num\\">" + avg + "</span>"
                    `});break}default:{let h=[],g=0,b=0;a.forEach((x,C)=>{h.push({count:x,value:C}),g+=x,x>1&&b++}),d={type:t.name,count:g,distinct:a.size,duplicated:b,values:t.name==="object"||t.name==="array"?h.sort((x,C)=>C.count-x.count):h.sort((x,C)=>C.count-x.count||x.value>C.value||-(x.value<C.value))};break}}if(t.name!=="undefined"&&t.name!=="null"){if(c.unshift({view:"block",className:"overview-stat",content:['html:"<span class=\\"num\\">" + count + "</span> " + (count > 1 ? "values, " : "value")',{view:"switch",when:"count > 1",content:[{when:"distinct = 1",content:'text:"a single unique value:"'},{when:"distinct = count",content:'text:"all unique, no duplicates"'},{content:['html:"<span class=\\"num\\">" + distinct + "</span> unique, "','html:duplicated = distinct ? "all occur more than once" : "<span class=\\"num\\">" + duplicated + "</span> occur more than once"']}]}]}),d.values.length>1&&d.duplicated&&t.name!=="object"&&t.name!=="array"){let h=[],g=d.values.length===10?10:Math.min(9,d.values.length),b=0;for(let x=0;x<g;x++){let{count:C,value:S}=d.values[x];b+=C,h.push({name:lt(String(S)),count:C,percent:C/d.count,percent100:fi(100*C/d.count,1),color:os[x]})}if(h.length){let x=d.count-b;x>0&&h.push({name:"...",count:x,percent:x/d.count,percent100:fi(100*x/d.count,1),color:os[h.length]}),c.push({view:"block",className:"pie-stat",data:h,content:[{view:"block",content:{view:"html",data:$d}},{view:"block",content:['html:"<span class=\\"list-header\\">Dominators:</span>"',{view:"list",item:`html:
                                        "<span class=\\"dot\\" style=\\"--size: 10px; background-color: " + color + "\\"></span> " +
                                        "<span class=\\"caption\\" title=\\"" + name + "\\">" + name + "</span>" +
                                        "<span class=\\"times\\"> \xD7 " + count + " (" + percent100 + "%)</span>"
                                    `}]}]})}}d.values.length>1?(t.name==="number"||t.name==="string")&&c.push({view:"content-filter",name:"filter",content:{view:"menu",data:"values.[no #.filter or value~=#.filter].sort(<value>)",item:[{view:"block",className:"caption",content:"text-match:{ text: value, match: #.filter }"},{view:"block",when:"count > 1",className:"count",content:'text:" \xD7 " + count'}]}}):(t.name==="number"||t.name==="string"||t.name==="boolean")&&c.push({view:"struct",data:"values.pick().value"}),t.name==="object"&&c.push({view:"list",className:"struct-list",data:"values",item:["struct:value",{view:"block",when:"count > 1",className:"count",content:'text:" \xD7 " + count'}]}),t.name==="array"&&Object.keys(a.map).length&&c.push({view:"block",className:"array-types",content:h=>Vd(h,a,i)})}i.view.render(n,[{view:"block",when:"path",className:"path",data:h=>i.pathToQuery(h.path),content:"text"},{view:"h1",className:"type",content:["text:name",`html:"<span class=\\"usage-stat\\">" + (
                    count = total
                        ? "only this type is used"
                        : "used in <span class=\\"num\\">" + count + "</span> of <span class=\\"num\\">" + total + "</span> cases (<span class=\\"num\\">" + percent + "</span>)"
                ) + "</span>"`]},...c],{...d,name:t.name,path:t.path,total:u,percent:fi(100*d.count/u,1)+"%"},{})}var Gd={beforeDemo:['md:"The `signature` view is used to output a type definition for current data using TypeScript like style:"'],demo:{view:"signature",expanded:!0}};function nl(n){let t=new WeakMap,i=({target:a})=>{let u="expand",c=a.closest(`
            .view-signature .expand,
            .view-signature [data-action]
        `);if(!c)return;c.dataset.action&&(u=c.dataset.action,c=c.parentNode);let d=t.get(c);if(d){let{path:h,map:g,offset:b}=d,x=document.createDocumentFragment();switch(u){case"sort-keys":g.sortKeys=!g.sortKeys;break;case"dict-mode":if(g.dictMode)g.dictMode=null;else{let C=g.dictMode={keys:new Set,count:0,map:Object.create(null)};g.forEach((S,L)=>{for(let T in L)hasOwnProperty.call(L,T)&&(C.keys.add(T),C.count++,Ji(L[T],1,C.map))})}break;default:g.properties===null?(g.properties=new Map,g.forEach((C,S)=>tl(S,1,g))):g.properties=null}eo(x,{object:g},t,h,b),c.replaceWith(x)}};n.addHostElEventListener("click",i,!1),new n.view.Popup({className:"signature-details",hoverPin:"trigger-click",hoverTriggers:`
            .view-signature .property,
            .view-signature .type
        `,render:function(a,u){let c=t.get(u);switch(c.type){case"property":return Ud(a,c,n);case"type":return rl(a,c,n)}}}),n.view.define("signature",function(a,u,c){let{expanded:d,path:h}=u,g=Ji(c,d),b=Array.isArray(h)?h:void 0;eo(a,g,t,b)},{usage:Gd})}var Mh=sr(bh()),yr=sr(Jr()),Z2=sr($a()),J2=sr(kh()),X2=sr(Lh());var fl={};$t(fl,{equal:()=>to,fuzzyStringCompare:()=>cl});var{hasOwnProperty:us}=Object;function to(n,t){if(n===t)return!0;for(let i in n)if(us.call(n,i)&&(!us.call(t,i)||n[i]!==t[i]))return!1;for(let i in t)if(us.call(t,i)&&(!us.call(n,i)||n[i]!==t[i]))return!1;return!0}function ul(n,t){let i=n.charCodeAt(t);return i===34||i===39?1:0}function cl(n,t){let i=ul(n,0),a=ul(n,n.length-1);return t.toLowerCase().indexOf(n.toLowerCase().substring(i,n.length-a),ul(t,0))!==-1}var Th={demo:{view:"source",data:{content:'var hello = "world";',syntax:"js"}},examples:[{title:"Supported syntaxes",beforeDemo:['md:"Following values (for both `name` and `mime`) are supported for `syntax` option:"',{view:"table",data:"#.options.syntaxes",cols:{name:{content:"comma-list:name"},mime:{content:"comma-list:mime"}}},"md:\"More syntaxes may be added via `import 'codemirror/mode/[name]/[name]';`\""],source:!1},{title:"Custom line numbers",demo:{view:"source",data:{content:"const a = 1; // line number 5",syntax:"js",lineNum:n=>n+5}}},{title:"Without line numbers",demo:{view:"source",data:{content:"const a = 1;",syntax:"js",lineNum:!1}}}]};var pb=100*1024;yr.default.modeToMime={js:"application/javascript",ts:"application/typescript",typescript:"application/typescript",json:"application/json",html:"text/html",css:"text/css",scss:"text/x-scss",less:"text/x-less"};function gb(){let n=new Set,t=new Map,i=a=>{let u=yr.default.resolveMode(a),c=[...t.keys()].find(d=>to(d,u));return c||(t.set(u,{name:new Set,mime:new Set}),u)};for(let[a,u]of Object.entries(yr.default.modeToMime)){let c=t.get(i(u));c.mime.add(u),c.name.add(a),n.add(a)}for(let[a,u]of Object.entries(yr.default.mimeModes)){let c=t.get(i(a));c.mime.add(a),typeof u=="string"&&(c.name.add(u),n.add(u))}for(let[a]of Object.entries(yr.default.modes))if(!n.has(a)){let u=yr.default.modes[a];t.has(u)||t.set(u,{name:new Set,mime:[]}),t.get(u).name.add(a)}return[...t.values()].map(a=>({name:[...a.name],mime:[...a.mime]}))}function mb(n,t){let i=yr.default.getMode(yr.default.defaults,{name:yr.default.modeToMime[n]||n,isDiscoveryViewDefined:a=>t.view.isDefined(a)});return(a,u)=>{let c=yr.default.startState(i),d=a.split(/(\n|\r\n?)/),h=0;for(let g=0;g<d.length;g++){if(g%2==0){let b=new yr.default.StringStream(d[g],4,{lookAhead:x=>d[g+x],baseToken:function(){}});for(;!b.eol();){let x=i.token(b,c);x&&u(h+b.start,h+b.pos,x),b.start=b.pos}}h+=d[g].length}}}function Eh(n,t){let i=n&&n.className,a=[t,Array.isArray(i)?i.join(" "):typeof i=="string"?i:!1].filter(Boolean).join(" ");return a?` class="${a}"`:""}var vb={html:{open({data:n}){switch(n.type){case"link":return`<a href="${n.href}"${Eh(n)}${n.marker?` data-marker="${n.marker}"`:""}>`;case"spotlight":return`<span ${Eh(n,"spotlight")}${n.marker?` data-marker="${n.marker}"`:""}>`}},close({data:n}){switch(n.type){case"link":return"</a>";case"spotlight":return"</span>"}}}};function Nh(n){n.view.define("source",function(t,i,a){let u=[],{mime:c,binary:d,size:h,syntax:g,lineNum:b=!0,content:x,refs:C,error:S,disabled:L}=a;if(L){t.classList.add("disabled"),t.textContent=S;return}if(S){t.classList.add("error"),t.textContent=S;return}if(typeof x=="string")if(x.length<pb&&u.push([mb(g||c,n),{html:{open({data:T}){return'<span class="token '+T+'">'},close(){return"</span>"}}}]),Array.isArray(C)&&u.push([(T,M)=>C.forEach(N=>{N.range&&M(N.range[0],N.range[1],{type:"spotlight",...N})}),vb]),d)t.innerHTML="Binary content"+(typeof h=="number"?" ("+h+" bytes)":"");else{let T=typeof b=="function"?b:N=>N+1,M=b?'<div class="lines">'+x.split(/\r\n?|\n/g).map((N,A)=>"<span>"+T(A)+"</span>").join("")+"</div>":"";t.innerHTML=M+"<div>"+(0,Mh.default)(u,"html")(x)+"</div>"}},{usage:Th,get syntaxes(){return gb()}})}var yl={};$t(yl,{jsonStringifyAsJavaScript:()=>yn,jsonStringifyInfo:()=>cs});var Kh=sr(Yh()),{stringifyInfo:cs}=Kh.default;function Yb(n,t,i){let a=String(n),[u,c]=a.match(/^(?:\S+\s+)?(\S+)\(/)||[];if(u!=="function"&&u!=="function*"&&c===i.trim().slice(0,-1)&&(i=""),a.indexOf(`
`)===-1)return i+a;let d=a.split(/\n/),h=d[d.length-1].match(/^\s*/)[0].length,g=new RegExp("^\\s{0,"+h+"}");return i+d.map((b,x)=>x&&b.length?b.replace(g,t):b).join(`
`)}function Kb(n,t,i){return typeof n=="function"?Yb(n,t,i):n instanceof Date?`${i}new Date("${n.toISOString()}")`:i+String(n)}var{toString:Qh}=Object.prototype,Qb=new Set(["[object Function]","[object RegExp]","[object Date]"]);function yn(n,t,i=4){let a=[],u=function(c,d){return typeof d=="string"&&Qh.call(this[c])==="[object Date]"&&(d=this[c]),d!==null&&Qb.has(Qh.call(d))?(a.push(d),"{{{__placeholder__}}}"):d};return String(JSON.stringify(n,t||u,i)).replace(/"((?:\\.|[^"])*)"(:?)/g,(c,d,h)=>h&&/^[a-z$_][a-z$_\d]*$/i.test(d)?d+h:`'${d.replace(/\\"/g,'"').replace(/'/g,"\\'")}'`+h).replace(/(^|\n)([ \t]*)(.*?)([a-zA-Z$_][a-zA-Z0-9$_]+:\s*)?'{{{__placeholder__}}}'/g,(c,d,h,g,b)=>d+h+g+Kb(a.shift(),h,b))}var fs=X("div",{style:["position: fixed","overflow: hidden","font-size: 1px","width: 1px","height: 1px","top: 0","left: 0","white-space: pre"].join(";")},["text"]);function Zb(n){let t=window.getSelection(),i=document.createRange();document.body.appendChild(fs),fs.firstChild.nodeValue=n,i.selectNodeContents(fs),t.removeAllRanges(),t.addRange(i);try{document.execCommand("copy")}catch(a){console.error(a)}t.removeAllRanges(),fs.remove()}function fr(n){navigator.clipboard?navigator.clipboard.writeText(n):Zb(n)}var Jb=/^(?:https?:)?\/\/(?:[a-z0-9]+(?:\.[a-z0-9]+)+|\d+(?:\.\d+){3})(?:\:\d+)?(?:\/\S*?)?$/i;function Wr(n,t){return`<span class="${n}">${t}</span>`}function bl(n){return Wr("more",`\u2026${n} more\u2026`)}function di(n,t,i){switch(typeof n){case"boolean":case"undefined":return Wr("keyword",n);case"number":case"bigint":{let a=String(n);return a.length>3&&(a=a.replace(/\..+$|\B(?=(\d{3})+(\D|$))/g,u=>u||'<span class="num-delim"></span>')),Wr("number",a)}case"symbol":return Wr("symbol",String(n));case"function":return"\u0192n";case"string":{let a=t?i.maxLinearStringLength:i.maxStringLength;if(n.length>a+15)return Wr("string",lt(JSON.stringify(n.slice(0,a)).slice(0,-1))+bl(n.length-a)+'"');let u=JSON.stringify(n);return Wr("string",!t&&(n[0]==="h"||n[0]==="/")&&Jb.test(n)?`"<a href="${lt(n)}" target="_blank">${lt(u.slice(1,-1))}</a>"`:lt(u))}case"object":{if(n===null)return Wr("keyword","null");switch(toString.call(n)){case"[object Array]":{let d=i.limitCollapsed===!1?n.length:i.limitCollapsed,h=n.slice(0,d).map(g=>di(g,!0,i));return n.length>d&&h.push(`${bl(n.length-d)} `),`[${h.join(", ")}]`}case"[object Date]":return Wr("date",n);case"[object RegExp]":return Wr("regexp",n)}if(t){for(let d in n)if(hasOwnProperty.call(n,d))return"{\u2026}";return"{}"}let a=i.limitCollapsed===!1?Infinity:i.limitCollapsed,u=[],c=0;for(let d in n)hasOwnProperty.call(n,d)&&(c<a&&u.push(`${Wr("property",d)}: ${di(n[d],!0,i)}`),c++);return c>a&&u.push(bl(c-a)),u.length?`{ ${u.join(", ")} }`:"{}"}default:return`unknown type "${typeof n}"`}}var Xb=["none","default","badge"];function wl(n){let t=Date.now(),i=0;for(;i<n.length&&!(i%20==0&&Date.now()-t>10);i++){let{el:a,data:u}=n[i],{place:c="after",className:d,text:h=typeof u!="object"?String(u):"",title:g,icon:b,href:x,external:C}=u,S=Xb.includes(u.style)?u.style:c==="before"?"none":"default",L=h!=="",T=["value-annotation","style-"+S,c==="before"?"before":"after",L?"has-text":"",d||""].join(" "),M=X(x?"a":"span",{class:T,title:g,href:x,target:C?"_blank":void 0},h!==""?[h]:void 0);b&&(M.classList.add("icon"),/^[a-z_$][a-z0-9_$-]*$/i.test(b)?M.classList.add("icon-"+b):M.style.setProperty("--annotation-image",`url("${b}")`)),c==="before"?a.before(M):a.parentNode.append(M)}n.splice(0,i)}var Zh={demo:{view:"struct",data:{foo:"bar",baz:[1,2,3]}},examples:[{title:"Define expanded levels by default and limit entries when collapsed and expanded",demo:{view:"struct",expanded:2,limit:5,limitCollapsed:1,data:{level1:{level2:{level3:{level4:{}},level3_2:2,level3_3:3,level3_4:4,level3_5:5,level2_6:6},level2_2:2,level2_3:3,level2_4:4,level2_5:5,level2_6:6},level1_2:2,level1_3:3,level1_4:4,level1_5:5,level1_6:6,level1_7:7}}}]};var qr={get collapse(){return X("span",{class:"struct-action-button struct-collapse-value","data-action":"collapse"})},get signature(){return X("span",{class:"struct-action-button show-signature","data-action":"show-signature"})},get actions(){return X("span",{class:"struct-action-button",title:"Value actions","data-action":"value-actions"})},get stringMode(){return X("span",{class:"struct-action-button",title:"Toggle string show mode","data-action":"toggle-string-mode"})},get sortKeys(){return X("span",{class:"struct-action-button",title:"Toggle key sorting","data-action":"toggle-sort-keys"})}},Jh=Pn('"',qr.collapse,qr.actions,qr.stringMode,X("span","string-length"),X("span","string-text-wrapper",[X("span","string-text")]),'"'),Xh=Pn("[",qr.collapse,qr.signature,qr.actions,X("span","value-size"),"]"),ep=Pn("{",qr.collapse,qr.signature,qr.actions,qr.sortKeys,X("span","value-size"),"}"),tp=X("div","entry-line"),rp=X("span","value"),np=X("span","label",["\xA0 \xA0 ",X("span","property"),":\xA0"]);var ew=Object.prototype.hasOwnProperty,tw=Object.prototype.toString,ip=50,rw=4,op=150,nw=50;function sp(n){if(Array.isArray(n))return n.length>0;if(typeof n=="string"&&(n.length>op||/[\r\n\f\t]/.test(n)))return!0;if(n&&tw.call(n)==="[object Object]"){for(let t in n)if(ew.call(n,t))return!0}return!1}function no(n,t){n.appendChild(document.createTextNode(t))}function ap(n){return n?", "+String(n).replace(/\B(?=(\d{3})+$)/g,'<span class="num-delim"></span>')+" bytes":""}function lp(n,t,i){t.length>1&&no(n.lastElementChild,t.length+" "+i)}function iw(n,t,i){t.length<=1||t.every(([u],c)=>c===0||u>t[c-1][0])?n.querySelector('[data-action="toggle-sort-keys"]').remove():i&&t.sort(([u],[c])=>u<c?-1:u>c?1:0)}function ow(n,t){let i=np.cloneNode(!0);no(i.firstElementChild,t),n.appendChild(i)}function xl(n){function t(A){let j=x.get(A),D=g.get(A);A.classList.add("struct-expand-value"),A.innerHTML=di(D,!1,j)}function i(A,j,D){let P=g.get(A);if(A.classList.remove("struct-expand-value"),typeof P=="string"){let R=Jh.cloneNode(!0),_=R.lastChild.previousSibling,$=JSON.stringify(P);no(_.firstChild,$.slice(1,-1)),no(_.previousSibling,`length: ${$.length} chars`),A.innerHTML="",A.appendChild(R)}else if(Array.isArray(P)){let R=b.get(A),_=x.get(A);A.innerHTML="",A.appendChild(Xh.cloneNode(!0)),lp(A,P,"elements"),u(A,A.lastChild,P,($,q,H)=>{a($,q,j,_,Object.freeze({parent:R,host:P,key:H,index:H}))},0,_.limit)}else{let R=b.get(A),_=x.get(A),$=Object.entries(P);A.innerHTML="",A.appendChild(ep.cloneNode(!0)),lp(A,$,"entries"),iw(A,$,D),u(A,A.lastChild,$,(q,[H,K],W)=>{ow(q,H),a(q,K,j,_,Object.freeze({parent:R,host:P,key:H,index:W}))},0,_.limit)}}function a(A,j,D,P,R){let _=sp(j),$=rp.cloneNode(!0);g.set($,j),b.set($,R),x.set($,P),_&&typeof j!="string"&&D?(A.classList.add("struct-expanded-value"),i($,D-1)):(_&&$.classList.add("struct-expand-value"),$.innerHTML=di(j,!1,P)),d($,j,P,R),A.appendChild($)}function u(A,j,D,P,R=0,_=ip){let $=D.length-R-1,q=document.createDocumentFragment();_===!1&&(_=D.length),D.slice(R,R+_).forEach((H,K)=>{let W=tp.cloneNode(!0);P(W,H,R+K),K!==$&&no(W,","),q.appendChild(W)}),A.insertBefore(q,j),n.view.maybeMoreButtons(A,j,D.length,R+_,_,(H,K)=>u(A,j,D,P,H,K))}function c(A){let j=[],D=b.get(A);for(;D!==null&&D.parent!==null;)j.unshift(D.key),D=D.parent;return j}function d(A,j,D,P){for(let R of D.annotations)try{let{query:_,debug:$}=R,q=n.query(_,j,P);$&&console.info({annotation:R,value:j,context:P,data:q}),q&&S.push({el:A,data:q})}catch(_){console.error(_)}h()}function h(){L===null&&S.length&&(L=Promise.resolve().then(()=>{L=null,wl(S),S.length&&h()},0))}let g=new WeakMap,b=new WeakMap,x=new WeakMap,C=new WeakSet,S=[],L=null,T=new n.view.Popup({className:"view-struct-actions-popup",render:(A,j)=>{let D=j.parentNode,P=g.get(D),R=[];if(typeof P=="string")R=[{text:"Copy as quoted string",action:()=>fr(JSON.stringify(P))},{text:"Copy as unquoted string",action:()=>fr(JSON.stringify(P).slice(1,-1))},{text:"Copy a value (unescaped)",action:()=>fr(P)}];else{let _=n.pathToQuery(c(D)),$=1024*1024*1024,{minLength:q,circular:H}=cs(P),K=!1,W=!1,U=0;H.length?(W="Can't be copied: Converting circular structure to JSON",K=W):q>$?(W="Can't be copied: Resulting JSON is over 1 Gb",K=W):(U=cs(P,null,4).minLength,U>$&&(K="Can't be copied: Resulting JSON is over 1 Gb")),_&&R.push({text:"Copy path:",notes:lt(_),action:()=>fr(_)}),R.push({text:"Copy as JSON",notes:`(formatted${ap(U)})`,error:K,disabled:Boolean(K),action:()=>fr(JSON.stringify(P,null,4))}),R.push({text:"Copy as JSON",notes:`(compact${W?"":ap(q)})`,error:W,disabled:Boolean(W),action:()=>fr(JSON.stringify(P))})}n.view.render(A,{view:"menu",onClick(_){T.hide(),_.action()},item:["html:text",{view:"block",when:"notes",className:"notes",content:"html:notes"},{view:"block",when:"error",className:"error",content:"text:error"}]},R)}}),M=new n.view.Popup({hoverPin:"popup-hover",hoverTriggers:".view-struct .show-signature",render:function(A,j){let D=j.parentNode,P=g.get(D);n.view.render(A,{view:"signature",expanded:2,path:c(D)},P)}}),N=({target:A})=>{let j="expand",D=A.closest(`
            .view-struct.struct-expand,
            .view-struct .struct-expand-value,
            .view-struct .struct-action-button
        `);if(!!D)switch(D.dataset.action&&(j=D.dataset.action),j){case"expand":D.classList.contains("struct-expand")&&(D=D.lastChild),i(D,0),h(),D.parentNode.classList.add("struct-expanded-value"),C.has(D.parentNode)&&D.parentNode.classList.remove("struct-expand");break;case"collapse":D=D.parentNode,t(D),h(),D.parentNode.classList.remove("struct-expanded-value"),C.has(D.parentNode)&&D.parentNode.classList.add("struct-expand");break;case"show-signature":M.show(D);break;case"value-actions":T.show(D);break;case"toggle-sort-keys":i(D.parentNode,0,D.parentNode.classList.toggle("sort-keys")),h();break;case"toggle-string-mode":D=D.parentNode;let P=D.querySelector(".string-text").firstChild;P.nodeValue=D.classList.toggle("string-value-as-text")?JSON.parse(`"${P.nodeValue}"`):JSON.stringify(P.nodeValue).slice(1,-1);break}};return n.addHostElEventListener("click",N,!1),n.view.define("struct",function(A,j,D){let{expanded:P,limit:R,limitCollapsed:_,annotations:$}=j,q=sp(D),H={limitCollapsed:n.view.listLimit(_,rw),limit:n.view.listLimit(R,ip),annotations:n.annotations.concat($||[]),maxStringLength:op,maxLinearStringLength:nw};C.add(A),a(A,D,P,H,{parent:null,host:{"":D},key:"",index:0}),h(),q&&!P&&A.classList.add("struct-expand")},{usage:Zh}),()=>{document.removeEventListener("click",N,!1)}}var up={demo:{view:"switch",data:{enabled:!0},content:[{when:"not enabled",content:'text:"I am disabled"'},{when:"enabled",content:'text:"I am enabled"'}]},examples:[{title:"Using with tabs",demo:{view:"context",modifiers:{view:"tabs",tabs:["foo","bar","baz"],name:"section"},content:{view:"switch",content:[{when:'#.section="foo"',content:'text:"FOO!"'},{when:'#.section="bar"',content:'text:"BAR!!"'},{content:'text:"When no other conditions are met"'}]}}}]};function cp(n){n.view.define("switch",function(t,i,a,u){let{content:c}=i,d='alert-warning:"No case choosen"';if(Array.isArray(c))for(let h=0;h<c.length;h++){let g=c[h];if(g&&n.queryBool(g.when||!0,a,u)){d="data"in g?{view:"context",data:g.data,content:g.content}:g.content;break}}return n.view.render(t,d,a,u)},{tag:!1,usage:up})}var fp={demo:{view:"table",data:[{foo:1,bar:"bar",baz:"zab"},{foo:2,baz:"xyz"},{foo:3,bar:"qux",baz:"baz"},{foo:4,bar:"aaa",baz:"abc"}]},examples:[{title:"Columns setup",demo:{view:"table",cols:[{header:"Header Col 1",data:"col1",content:'text:"prefix-" + $'},{header:"Header Col 3",data:"col3",content:'text:$ + "-suffix"'}],data:[{col1:"foo",col2:"bar",col3:"baz"},{col1:"qux",col2:"oof",col3:"zab"}]}}]};var hi=Object.hasOwnProperty;function kl(n){return{header:n,view:"table-cell",data:t=>t[n],sorting:`$[${JSON.stringify(n)}] ascN`}}function sw(n,t,i){let a="",u="";if("data"in n&&n.data!==void 0)switch(typeof n.data){case"string":u=`(${n.data})`;break;case"function":a="$dataQuery;",u="$dataQuery(#)";break;default:a="$dataQuery;",u="$dataQuery"}if(typeof n.content=="string"){let c=n.content.indexOf(":");if(c===-1)return;let d=n.content.slice(c+1);d&&(u=u?`(${u} | ${d})`:`(${d})`)}return u?t.query(`${a} ${u} ascN`,{dataQuery:n.data},i):!1}function aw(n,t){return typeof t=="string"&&(t={content:t}),hi.call(t,"content")||hi.call(t,"data")?{header:n,view:"table-cell",...t}:{...kl(n),...t}}function dp(n,t){if(typeof t!="function")return!1;let i=0;try{for(let a=1;a<n.length;a++){let u=Math.sign(t(n[a-1],n[a]));if(u){if(i&&u!==i)return!1;i=u}}}catch(a){return console.error("[Discovery] Error on column order detection in table view",a),0}return-i}function hp(n){n.view.define("table",function(t,i,a,u){let{cols:c,rowConfig:d,limit:h}=i,g=c&&typeof c=="object"?c:{},b=!1;Array.isArray(a)||(a=a?[a]:[]);let x=t.appendChild(X("thead")).appendChild(X("tr")),C=[],S=t.appendChild(X("tbody")),L=t.appendChild(X("tbody")).appendChild(X("tr")).appendChild(X("td")),T=M=>{S.innerHTML="",L.innerHTML="";for(let N of C){let A=dp(M,N.sorting);N.el.classList.toggle("asc",A===1),N.el.classList.toggle("desc",A===-1)}return n.view.renderList(S,this.composeConfig({view:"table-row",cols:c},d),M,u,0,n.view.listLimit(h,25),L)};if(Array.isArray(c))c=c.map((M,N)=>typeof M=="string"?kl(M):{header:"col"+N,view:"table-cell",...M});else{let M=new Set;c=[],a.forEach(N=>{if(N&&typeof N=="object")for(let A in N)M.add(A);else b=!0}),Object.keys(g).forEach(N=>g[N]?M.add(N):M.delete(N)),b&&c.push({header:"[value]",view:"table-cell",data:String}),M.forEach(N=>c.push(hi.call(g,N)?aw(N,g[N]):kl(N)))}c=c.filter(M=>!hi.call(M,"when")||n.queryBool(M.when,a,u));for(let M of c){if(hi.call(M,"whenData")&&M.whenData!==void 0){let{whenData:P,content:R}=M;M.whenData=void 0,M.content=(_,$)=>n.queryBool(P,_,$)?{content:R}:void 0}let N=x.appendChild(X("th")),A={el:N};C.push(A),N.textContent=M.header;let j=hi.call(M,"sorting")?n.query(M.sorting,null,u):sw(M,n,u),D=typeof j=="function"?dp(a,j):0;D!==0?(M.sorting=j,A.sorting=j,N.classList.add("sortable"),N.addEventListener("click",()=>{N.classList.contains("asc")?T(a.slice().sort((P,R)=>-j(P,R))):N.classList.contains("desc")&&!D?T(a):T(a.slice().sort(j))})):M.sorting=!1}return L.colSpan=c.length,T(a)},{tag:"table",usage:fp})}function pp(n){n.view.define("table-row",function(t,i,a,u){let{cols:c}=i;if(Array.isArray(c))return Promise.all(c.map((d,h)=>n.view.render(t,d,a,{...u,colIndex:h})))},{tag:"tr"})}var lw={view:"struct",expanded:1};function uw(n,t){if(Array.isArray(t)){n.classList.add("complex"),n.textContent=t.length?"[\u2026]":"[]";return}if(t&&typeof t=="object"){n.classList.add("complex");for(let i in t)if(Object.prototype.hasOwnProperty.call(t,i)){n.textContent="{\u2026}";return}n.textContent="{}";return}if(t===void 0){n.textContent="";return}if(typeof t=="number"){let i=String(t);n.classList.add("number"),i.length>3?n.innerHTML=i.replace(/\..+$|\B(?=(\d{3})+(\D|$))/g,a=>a||'<span class="num-delim"></span>'):n.textContent=i;return}n.textContent=t}function gp(n){n.view.define("table-cell",function(t,i,a,u){let{content:c,details:d}=i;if(typeof c=="function"){if(c=c(a,u),!c)return;c=c.content}if((d||!c&&a&&typeof a=="object")&&(t.classList.add("details"),t.addEventListener("click",h=>{let g=h.target;if(g===t){let b=g.parentNode,x=b.parentNode,C=Array.from(x.querySelectorAll(".view-table-cell.details-expanded")).find(L=>L.parentNode.parentNode===x),S=null;if(C){let L=C.parentNode;if(C.classList.remove("details-expanded"),C===t){b.parentNode.removeChild(b.nextSibling);return}L!==b?L.parentNode.removeChild(L.nextSibling):(S=b.nextSibling.firstChild,S.innerHTML="")}S===null&&(S=b.parentNode.insertBefore(document.createElement("tr"),b.nextSibling).appendChild(document.createElement("td")),S.parentNode.className="view-table-cell-details-row",S.className="view-cell-details-content",S.colSpan=1e3),t.classList.add("details-expanded"),n.view.render(S,d||lw,a,u)}})),c)return n.view.render(t,c,a,u);uw(t,a)},{tag:"td"})}var mp={demo:{view:"tabs",name:"tabs",tabs:[{value:"one",text:"One"},{value:"two",text:"Two"},{value:"three",text:"Three"}],content:{view:"switch",content:[{when:'#.tabs="one"',content:'text:"One"'},{when:'#.tabs="two"',content:'text:"Two"'},{when:'#.tabs="three"',content:'text:"Three"'}]}},examples:[{title:"With before and after content",demo:{view:"tabs",name:"example",tabs:[{value:"one",text:"One"},{value:"two",text:"Two"},{value:"three",text:"Three"}],beforeTabs:'text:"<Content before tabs>"',afterTabs:'text:"<Content after tabs>"',content:'text:"Selected: " + #.example'}},{title:"On change handler",demo:{view:"tabs",name:"example",tabs:[{value:"one",text:"One"},{value:"two",text:"Two"},{value:"three",text:"Three"}],onChange:new Function('return (value) => alert("changed to " + value)')(),content:'text:"Selected: " + #.example'}}]};function vp(n){n.view.define("tabs",function(t,i,a,u){async function c(R){let _=j?x:b;if(D===R)return;let $=h||g||d?{...u,[C]:R}:null;D=R,j=!0,Array.isArray(S)&&(T.innerHTML="",h&&(N.innerHTML="",await n.view.render(N,h,a,$),T.appendChild(N)),await Promise.all(S.map(q=>n.view.render(T,n.view.composeConfig(q,{active:q.value===D}),a,u))),g&&(A.innerHTML="",await n.view.render(A,g,a,$),T.appendChild(A))),d&&(M.innerHTML="",await n.view.render(M,d,a,$)),typeof _=="function"&&_(D,C,a,u)}let{content:d,beforeTabs:h,afterTabs:g,onInit:b,onChange:x}=i,{name:C,tabs:S,tabConfig:L}=i,T=t.appendChild(document.createElement("div")),M=null,N=null,A=null,j=!1,D=NaN,P="value"in i?i.value:C in u?u[C]:void 0;return S=n.query(S,a,u),L=n.view.composeConfig({view:"tab",onClick:c},L),T.className="view-tabs-buttons",h&&(N=document.createElement("div"),N.className="view-tabs-buttons-before"),g&&(A=document.createElement("div"),A.className="view-tabs-buttons-after"),d&&(M=t.appendChild(document.createElement("div")),M.className="view-tabs-content"),typeof C!="string"&&(C="filter"),Array.isArray(S)?S=S.map(R=>{let _=typeof R;return(_==="string"||_==="number"||_==="boolean")&&(R={value:R}),(P===void 0||R.active)&&(P=R.value),n.view.composeConfig(L,R)}):S=[],c(P)},{usage:mp})}var Cl=()=>alert("clicked!"),yp={demo:{view:"tabs",name:"tabs",tabs:[{value:"one",text:"One"},{value:"two",text:"Two"},{value:"three",text:"Three"}],content:{view:"switch",content:[{when:'#.tabs="one"',content:'text:"One"'},{when:'#.tabs="two"',content:'text:"Two"'},{when:'#.tabs="three"',content:'text:"Three"'}]}},examples:[{title:"Active & disabled tab",demo:{view:"tabs",name:"tabs",tabs:[{value:"one",text:"One"},{value:"two",text:"Two",active:!0},{value:"three",text:"Three",disabled:!0}],content:{view:"switch",content:[{when:'#.tabs="one"',content:'text:"One"'},{when:'#.tabs="two"',content:'text:"Two"'},{when:'#.tabs="three"',content:'text:"Three"'}]}}},{title:"On click handler",demo:{view:"tabs",name:"tabs",tabs:[{value:"one",text:"One",onClick:Cl},{value:"two",text:"Two",onClick:Cl},{value:"three",text:"Three",onClick:Cl}],content:{view:"switch",content:[{when:'#.tabs="one"',content:'text:"One"'},{when:'#.tabs="two"',content:'text:"Two"'},{when:'#.tabs="three"',content:'text:"Three"'}]}}}]};function bp(n){n.view.define("tab",function(t,i,a,u){let{content:c,active:d=!1,disabled:h=!1,onClick:g,value:b,text:x=String(b).replace(/^./,C=>C.toUpperCase())}=i;if(n.query(h,a,u)?t.classList.add("disabled"):typeof g=="function"&&(t.addEventListener("click",()=>g(b)),t.classList.add("onclick")),d&&t.classList.add("active"),c)return n.view.render(t,c,a,u);t.textContent=x},{usage:yp})}var wp={demo:{view:"text",data:'"Hello world!"'},examples:[{title:"Shorthand usage",view:'text:"Hello world!"'}]};function xp(n){n.view.define("text",function(t,i,a){t.appendChild(document.createTextNode(String(a)))},{tag:!1,usage:wp})}var Ll={};$t(Ll,{has:()=>cw,matchAll:()=>Sl});var{toString:kp}=Object.prototype,Cp=(n,t,i)=>{let a=n.slice(i).search(t);return a!==-1?{offset:i+a,length:RegExp.lastMatch.length}:null},Sp=(n,t,i)=>{let a=n.indexOf(t,i);return a!==-1?{offset:a,length:t.length}:null};function cw(n,t,i){return kp.call(t)==="[object RegExp]"?i&&!t.ignoreCase?new RegExp(t,t.flags+"i").test(n):t.test(n):typeof t=="string"?i?String(n).toLowerCase().indexOf(t.toLowerCase()):String(n).indexOf(t)!==-1:!1}function Sl(n,t,i,a,u){let c=kp.call(t)==="[object RegExp]"?Cp:typeof t=="string"?Sp:null,d=String(n);if(u)switch(c){case Cp:t.ignoreCase||(t=new RegExp(t,t.flags+"i"));break;case Sp:d=d.toLowerCase(),t=t.toLowerCase();break}if(c===null){i(n);return}let h=0;do{let g=c(d,t,h);if(g===null){i(h>0?n.slice(h):n);break}g.offset!==h&&i(n.slice(h,g.offset)),g.length!==0&&a(n.substr(g.offset,g.length)),h=g.offset+g.length}while(h!==n.length)}var Lp={demo:{view:"text-match",data:{text:"I am matched text or a text with matches!",match:/match/}},examples:[{title:"Raw string as match",demo:{view:"text-match",data:{text:"I am matched text or a text with matches!",match:"match"}}},{title:"Using with a link",demo:{view:"link",data:{href:"#"},content:'text-match:{ text: "Test link", match: /\\w+/i }'}},{title:"Various configurations",demo:{view:"table",cols:[{header:"text-match",content:"text-match"},{header:"Config",content:"struct"}],data:[null,{},{},{match:"test"},{match:"Test"},{match:"test",ignoreCase:!0},{match:"Test",ignoreCase:!0},{match:/test/},{match:/test/g},{match:/test/i},{match:/test/,ignoreCase:!0},{match:/test/g,ignoreCase:!0}].map((n,t)=>t>1?{text:"test Test",...n}:n)}}]};var fw=X("span","view-text-match");function Tp(n){n.view.define("text-match",function(t,i,a){let{text:u,match:c,ignoreCase:d=!1}=a||{};Sl(String(u),c,h=>t.appendChild(tr(h)),h=>t.appendChild(fw.cloneNode()).appendChild(tr(h)),d)},{tag:!1,usage:Lp})}function Mp(n){n.view.define("toc-section",function(t,i,a,u){let{header:c,content:d}=i;return n.view.render(t,[{view:"block",className:"header",content:c},{view:"block",className:"content",content:d}],a,u)},{tag:"section"})}var ds={demo:{view:"context",modifiers:{view:"toggle-group",name:"toggleValue",data:[{value:"one",text:"One"},{value:"two",text:"Two"},{value:"three",text:"Three"}]},content:{view:"switch",content:[{when:'#.toggleValue="one"',content:'text:"One"'},{when:'#.toggleValue="two"',content:'text:"Two"'},{when:'#.toggleValue="three"',content:'text:"Three"'}]}},examples:[{title:"With before and after content",demo:{view:"toggle-group",data:[{value:"one",text:"One"},{value:"two",text:"Two"},{value:"three",text:"Three"}],beforeToggles:'text:"<Content before toggles>"',afterToggles:'text:"<Content after toggles>"'}},{title:"On change handler",demo:{view:"toggle-group",name:"example",onChange:new Function('return (value) => alert("changed to " + value)')(),data:[{value:"one",text:"One"},{value:"two",text:"Two"},{value:"three",text:"Three"}]}}]};function Ep(n){n.view.define("toggle",function(t,i,a,u){let{content:c,disabled:d=!1,onToggle:h,value:g,text:b=String(g).replace(/^./,C=>C.toUpperCase())}=i,{checked:x=!1}=i;if(d?t.classList.add("disabled"):typeof h=="function"&&(t.addEventListener("click",()=>{x=!x,h(x,g)}),t.classList.add("onclick")),x&&t.classList.add("checked"),c)return n.view.render(t,c,a,u);t.textContent=b},{usage:ds})}function Np(n){n.view.define("toggle-group",function(t,i,a,u){async function c(j,D){let P=M?b:g;N!==D&&(N=D,M=!0,Array.isArray(S)&&(t.innerHTML="",d&&(L.innerHTML="",await n.view.render(L,d,a,{...u,[x]:D}),t.appendChild(L)),h&&(T.innerHTML="",await n.view.render(T,h,a,{...u,[x]:D}),t.appendChild(T)),await Promise.all(S.map((R,_)=>n.view.render(t,n.view.composeConfig(R,{checked:R.value===N}),a[_],u)))),typeof P=="function"&&P(N,x,a,u))}let{beforeToggles:d,afterToggles:h,onInit:g,onChange:b}=i,{name:x,toggleConfig:C}=i,S=[],L=null,T=null,M=!1,N=NaN,A="value"in i?i.value:x in u?u[x]:void 0;return C=n.view.composeConfig({view:"toggle",onToggle:c},C),d&&(L=document.createElement("div"),L.className="view-toggle-group-before"),h&&(T=document.createElement("div"),T.className="view-toggle-group-after"),typeof x!="string"&&(x="filter"),Array.isArray(a)&&(S=a.map(j=>{let D=typeof j;return(D==="string"||D==="number"||D==="boolean")&&(j={value:j}),(A===void 0||j.active)&&(A=j.value),n.view.composeConfig(C,j)})),c(!0,A)},{usage:ds})}var dw=()=>alert("toggled!"),jp=([n,...t],i="")=>{let a=[];for(let u=0;u<n;u++){let c=i+"."+(u+1);a.push({title:c,children:t.length?jp(t,c):null})}return a},Ap={demo:{view:"tree",item:"text:text",data:{text:"Root",children:[{text:"Child"},{text:"Another child",children:[{text:"Lvl 2 child"},{text:"Lvl 2 child"}]}]}},examples:[{title:"Expanded tree",demo:{view:"tree",item:"text:text",expanded:999,data:{text:"Root",children:[{text:"Child"},{text:"Another child",children:[{text:"Lvl 2 child"},{text:"Lvl 2 child"}]}]}}},{title:"With empty text",demo:{view:"tree",emptyText:"This tree is empty",data:null}},{title:"With toggle handler",demo:{view:"tree",item:"text:text",onToggle:dw,data:{text:"Root",children:[{text:"Child"},{text:"Another child",children:[{text:"Lvl 2 child"},{text:"Lvl 2 child"}]}]}}},{title:"limitLines",demo:{view:"tree",item:"text:title",limitLines:7,data:jp([5,3,3])}}]};function Op(n){function t(a,u,c,d,h,g){return g===!1&&(g=c.length),a.classList.add("incomplete"),c.slice(h,h+g).reduce((b,x)=>b.then(()=>{let{container:C,itemConfig:S}=u;return n.view.render(C,n.view.composeConfig(S,{expanded:x.expanded,last:x.last,hasChildren:x.hasChildren,children:x.children}),x.data,d).then(()=>{if(x.expanded&&x.hasChildren){let L=C.lastChild.querySelector(".view-tree-leaf-children");L.classList.add("incomplete"),u={container:L,itemConfig:n.view.composeConfig(S,S.itemConfig),prev:u}}else for(;x.shift--;)u.container.classList.remove("incomplete"),u=u.prev})}),Promise.resolve()).then(()=>n.view.maybeMoreButtons(a,null,c.length,h+g,g,(b,x)=>t(a,u,c,d,b,x))||a.classList.remove("incomplete"))}function i(a,u,c,d){function h(x,C,S,L=0){x.forEach((T,M,N)=>{let A=n.query(S.children,T,u),j=Array.isArray(A)&&A.length>0,D=M===N.length-1,P=b.has(T)?0:typeof C=="function"?C(T,u):C;b.add(T),g.push({data:T,expanded:P,last:D,hasChildren:j,children:P?null:S.children,shift:D&&(!P||!j)?L+1:0}),j&&P&&h(A,typeof C=="number"?C-1:C,n.view.composeConfig(S,S.itemConfig),D?L+1:0)})}let g=[],b=new Set;return h(a,d,c),g}n.view.define("tree",function(u,c,d,h){let{children:g="children",item:b="text",itemConfig:x,collapsible:C,emptyText:S,onToggle:L}=c,{expanded:T,limit:M,limitLines:N=!0}=c;if(S!==!1&&S!==""&&u.setAttribute("emptyText",S||"Empty tree"),!Array.isArray(d)&&d&&(d=[d]),Array.isArray(d)){if(M=n.view.listLimit(M,25),N=n.view.listLimit(N,25),T=typeof T=="function"?T:n.view.listLimit(T,1),N){let A=i(d,h,this.composeConfig({children:g},x),T),j={container:u,itemConfig:this.composeConfig({view:"tree-leaf",itemConfig:x,content:b,collapsible:C,onToggle:L},x)};return t(u,j,A,h,0,N)}return this.renderList(u,this.composeConfig({view:"tree-leaf",itemConfig:x,content:b,collapsible:C,expanded:T,children:g,limit:M,onToggle:L},x),d,h,0,M)}},{tag:"ul",usage:Ap})}function Dp(n){let t=new WeakMap,i=({target:a})=>{let u=a.closest(".view-tree-leaf-toggle");if(u){let c=t.get(u),d=!u.parentNode.classList.toggle("collapsed");typeof c.render=="function"&&c.render(),typeof c.onToggle=="function"&&c.onToggle(d,u.parentNode,c.data,c.context)}};n.addHostElEventListener("click",i,!1),n.view.define("tree-leaf",async function(a,u,c,d){let{expanded:h,content:g="text",itemConfig:b,collapsible:x=!0,last:C,hasChildren:S,children:L,limit:T,onToggle:M}=u,N=a.appendChild(X("span","view-tree-leaf-toggle")),A=a.appendChild(X("span","view-tree-leaf-content")),j=null,D=S;if(C&&a.classList.add("last"),x||a.classList.add("non-collapsible"),await this.render(A,g,c,d),L&&(j=n.query(L,c,d),D=Array.isArray(j)&&j.length>0),D){let P=a.appendChild(X("ul","view-tree-leaf-children")),R={data:c,context:d,onToggle:M,render:null},_=($,q)=>{typeof q=="number"&&q--,this.renderList(P,this.composeConfig({view:"tree-leaf",expanded:q,itemConfig:b,content:g,collapsible:x,children:L,limit:T,onToggle:M},b),$,d,0,this.listLimit(T,25))};a.classList.add("has-children"),t.set(N,R),(typeof h=="function"?h(c,d):h)?j&&await _(j,h):(a.classList.add("collapsed"),j&&(R.render=()=>{R.render=null,_(j,h||1)}))}},{tag:"li"})}var lo={};$t(lo,{default:()=>Ip,notFound:()=>Pp,report:()=>Up,viewsShowcase:()=>Vp});function Ip(n){n.page.define("default",{view:"switch",content:[{when:"not #.dataLoaded",content:[{view:"h1",className:"no-data-loaded",content:'text:"Discovery.js"'},{view:"markdown",when:"#.modelfree",source:'Running in `model free mode` since no config or model is set. However, you can load the JSON file, analyse it, and create your own report.\n\nSee <a class="view-link" href="https://github.com/discoveryjs/discovery/blob/master/README.md" href="_blank">documention</a> for details.'},{view:"markdown",when:"meta.description",source:"=meta.description"},'html:"<br>"',{view:"button-primary",onClick:"=#.actions.uploadFile",content:'text:`Open file ${#.actions.uploadFile.fileExtensions | $ ? "(" + join(", ") + ")" : ""}`'},'html:"<span style=\\"color: #888; padding: 0 1ex\\"> or </span>"','text:"drop a file on the page"']},{content:['page-header{ content: "h1:#.name" }',{view:"struct",expanded:1}]}]})}function Pp(n){n.page.define("not-found",['alert-warning:"Page `" + name + "` not found"'])}var Tl={};$t(Tl,{decode:()=>ao,encode:()=>so});var bn=[],oo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),hs=oo.reduce(function(n,t,i){return n[t]=i,n},{});for(var ps=0;ps<255;ps++)bn[ps]=String.fromCharCode(ps);function hw(n){let t="";for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?t+=bn[a]:a<2048?t+=bn[a>>6|192]+bn[a&63|128]:t+=bn[a>>12|224]+bn[a>>6&63|128]+bn[a&63|128]}return t}function pw(n){n=hw(n);let t=new Array(n.length);for(let i=0;i<n.length;i++)t[i]=n.charCodeAt(i);return t}function gw(n){let t="";for(let i=0;i<n.length;){let a=n.charCodeAt(i++);if(a<128)t+=String.fromCharCode(a);else{let u=n.charCodeAt(i++);if(a&32){let c=n.charCodeAt(i++);t+=String.fromCharCode((a&15)<<12|(u&63)<<6|c&63)}else t+=String.fromCharCode((a&31)<<6|u&63)}}return t}function mw(n){return gw(n.map(function(t){return bn[t]}).join(""))}function so(n){let t="";Array.isArray(n)||(n=pw(n));for(let i=0;i<n.length;){let a=n[i++],u=n[i++],c=n[i++],d=a>>2,h=(a&3)<<4|u>>4,g=(u&15)<<2|c>>6,b=c&63;u==null?g=b=64:c==null&&(b=64),t+=oo[d]+oo[h]+oo[g]+oo[b]}return t}function ao(n){let t=[],i,a,u,c;n=n.replace(/[^a-zA-Z0-9\+\/]/g,"");for(let d=0;d<n.length;){i=hs[n.charAt(d++)],a=hs[n.charAt(d++)],u=hs[n.charAt(d++)],c=hs[n.charAt(d++)];let h=i<<2|a>>4,g=(a&15)<<4|u>>2,b=(u&3)<<6|c;t.push(h,g,b)}return(u==null||u==64)&&t.pop(),(c==null||c==64)&&t.pop(),mw(t)}function zp(n,t){return typeof n=="string"?n:t||""}function Rp(n){let t=["query","view","title","dzen","noedit"],{query:i,view:a,title:u,dzen:c,noedit:d,...h}=typeof n=="string"?{query:n}:n,g=[];return c&&g.push(["dzen"]),d&&g.push(["noedit"]),u&&g.push(["title",u]),i&&g.push(["q",so(i)]),typeof a=="string"&&g.push(a?["v",so(a)]:["v"]),Object.keys(h||{}).sort().forEach(b=>{t.includes(b)||g.push([b,b.endsWith("-b64")&&typeof h[b]=="string"?so(h[b]):h[b]])}),g}function _p(n){let t=Object.fromEntries(n),i=["q","v","title","dzen","noedit"],a={title:t.title||"",query:ao(zp(t.q,"")),view:"v"in t?ao(zp(t.v,"")):void 0,dzen:"dzen"in t,noedit:"noedit"in t};return Object.keys(t).forEach(u=>{i.includes(u)||(a[u]=u.endsWith("-b64")&&typeof t[u]=="string"?ao(t[u]):t[u])}),a}function vw(n){let t=d=>d.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/'/g,"\\'"),{title:i,query:a,view:u}=n,c={title:i,query:a,view:u};return`{
${Object.keys(c).reduce((d,h)=>d.concat(c[h]?`    ${h}: '${t(c[h])}'`:[]),[]).join(`,
`)}
}`}function Hp(n,t){let i,a,u,c,d=new n.view.Popup({render:(b,x,C)=>n.view.render(b,{view:"menu",data:[{text:"Copy link to report",action:()=>fr(location)},{text:"Copy report as JSON",action:()=>fr(vw(n.pageParams))}],onClick(S){C(),S.action()}})}),h=X("div","report-actions",[c=X("button",{class:"edit-mode discovery-hidden-in-dzen",title:"Toggle edit mode",onclick:({target:b})=>{b.blur(),t({noedit:!n.pageParams.noedit})}}),X("button",{class:"share",title:"Share ...",onclick:({target:b})=>{b.blur(),d.show(b)}}),X("button",{class:"toggle-fullscreen",title:"Toggle full page mode",onclick:({target:b})=>{b.blur(),t({dzen:!n.pageParams.dzen})}})]),g=X("div","report-header",[X("div",{class:"report-header-text","data-title":"\xA0"},[i=X("input",{class:"discovery-hidden-in-dzen",placeholder:"Untitled report",oninput:({target:b})=>t({title:b.value},!0),onkeypress:b=>{(b.charCode===13||b.keyCode===13)&&b.target.blur()}}),X("span","timestamp",[a=X("span",null,"&nbsp;"),u=X("span")])])]);return{el:[h,g],render(b,x){let{title:C,noedit:S}=x.params;i.parentNode.dataset.title=C||i.placeholder,i.value=C,c.classList.toggle("disabled",S),a.innerText=x.createdAt&&typeof x.createdAt.toLocaleString=="function"?"Data collected at "+x.createdAt.toLocaleString().replace(",","")+" | ":"",u.innerText="View built at "+new Date().toLocaleString().replace(",","")}}}function Fp(n,t,i){return n.length?`${n.length} ${n.length===1?t:i}`:"empty"}function yw(n){return Array.isArray(n)?`Array (${Fp(n,"element","elements")})`:n&&typeof n=="object"?`Object (${Fp(Object.keys(n),"key","keys")})`:`Scalar (${n===null?"null":typeof n})`}function Bp(n,t){let i=!1,a={},u,c=(S,L)=>n.querySuggestions(S,L,n.data,n.context),d=new n.view.QueryEditor(c).on("change",S=>u.checked&&t({query:S},!0)),h=n.getQueryEngineInfo(),g=X("div","buttons"),b=X("div","data-query-result"),x=X("div","form query-editor-form",[X("div","query-editor",[d.el,X("div","editor-toolbar",[X("span","syntax-hint",`Use <a class="view-link" href="${h.link}" target="_blank">${h.name}</a> ${h.version||""} syntax for queries`),X("label","view-checkbox",[u=X("input",{class:"live-update",type:"checkbox",checked:!0,onchange:S=>{S.target.checked&&t({query:d.getValue()},!0)}}),X("span","view-checkbox__label","process on input")]),g])]),b]);n.view.render(g,{view:"button-primary",content:'text:"Process"',onClick:()=>{a={},t({query:d.getValue()},!0),n.scheduleRender("page")}});let C;return{el:x,perform(S,L){let T=L.params.query,M,N;if(d.setValue(T),a.query===T&&a.data===S&&a.context===L)N=a.results;else{C&&(C.clear(),C=null);try{M=Date.now(),N=n.query(T,S,L),M=Date.now()-M}catch(A){let j=A.details&&A.details.loc,D=d.cm.doc;if(j){let[P,R]=A.details.loc.range;C=A.details.token==="EOF"||P===R?D.setBookmark(D.posFromIndex(P),{widget:X("span","discovery-editor-error"," ")}):D.markText(D.posFromIndex(P),D.posFromIndex(R),{className:"discovery-editor-error"})}return a={},b.innerHTML='<div class="report-error query-error">'+lt(A.message)+"</div>",{error:A}}a={data:S,query:T,context:L,results:N},b.innerHTML="",n.view.render(b,{view:"expand",header:`text:"${yw(N)} in ${parseInt(M,10)}ms"`,expanded:i,onToggle:A=>i=A,content:{view:"struct",expanded:1}},N)}return{data:N}}}}function gs(n){return Boolean(n&&n.nodeType===Node.TEXT_NODE)}function Ml(n,t=`
`){let i="";for(let a of n.childNodes)!gs(a)&&a.previousSibling&&!gs(a.previousSibling)&&(i+=t),i+=bw(a,t);return i}function bw(n,t=`
`){switch(n.nodeType){case Node.ELEMENT_NODE:let[i,a=""]=n.cloneNode().outerHTML.split(/(?=<\/[^>]+>$)/);return i+(n.firstChild&&!gs(n.firstChild)?t+"  ":"")+Ml(n,t+"  ")+(n.lastChild&&!gs(n.lastChild)?t:"")+a;case Node.TEXT_NODE:return n.nodeValue;case Node.COMMENT_NODE:return"<!--"+n.nodeValue+"-->";case Node.DOCUMENT_FRAGMENT_NODE:return Ml(n,t)}return""}function ms(n){let t={view:"context",modifiers:[{view:"switch",when:"beforeDemo",content:[{when:({beforeDemo:i})=>typeof i=="string",content:'html:"<p>" + beforeDemo + "</p>"'},{content:{view:"render",config:"beforeDemo",context:"{ __demoContext: true, ...(#.viewDef | { name, group, options }) }"}}]},{view:"block",when:"demo or view",className:"usage-render",postRender:(i,{onInit:a})=>a(i,"root"),content:{view:"render",config:"demo or view",context:"{ __demoContext: true, ...(#.viewDef | { name, group, options }) }"}},{view:"switch",when:"afterDemo",content:[{when:({afterDemo:i})=>typeof i=="string",content:'html:"<p>" + afterDemo + "</p>"'},{content:{view:"render",config:"afterDemo",context:"{ __demoContext: true, ...(#.viewDef | { name, group, options }) }"}}]}],content:{view:"tabs",when:"source != false",className:"usage-sources",name:"code",tabs:[{value:"config",text:"Config (JS)"},{value:"config-json",text:"Config (JSON)"},{value:"html",text:"HTML"}],content:{view:"switch",content:[{when:'#.code="config"',content:{view:"source",className:"first-tab",data:i=>({syntax:"discovery-view",content:yn(i.demo||i.view)})}},{when:'#.code="config-json"',content:{view:"source",data:i=>({syntax:"json",content:JSON.stringify(i.demo||i.view,null,4)})}},{when:'#.code="html"',content:{view:"source",data:(i,a)=>({syntax:"html",content:Ml(a.root)})}}]}}};return{view:"block",className:"discovery-view-usage",data({name:i,options:a}){let u=[...n.view.values].filter(c=>c.options.usage===a.usage).map(c=>c.name);return u.includes(i)||u.unshift(i),{demo:{view:i,data:'"'+i+'"'},...typeof a.usage=="function"?a.usage(i,u):Array.isArray(a.usage)?{examples:a.usage}:a.usage,name:i,group:u,options:a}},content:["h1:name",t,{view:"list",data:"examples.({ ..., viewDef: @ })",whenData:!0,itemConfig:{className:"usage-section"},item:["h2{ anchor: true, data: title }",t]}]}}var Wp=`{
    view: 'struct',
    expanded: 1
}`,qp=[{name:"Table",content:yn({view:"table"})},{name:"Auto-link list",content:yn({view:"ol",item:"auto-link"})},{name:"Signature",content:yn({view:"signature",expanded:2})}];function ww(n,t,i){return X("div",{class:"report-editor-tab",onclick:()=>i({view:t})},n||"Untitled preset")}function $p(n,t){let i={},a=Array.isArray(n.options.viewPresets)?qp.concat(n.options.viewPresets):qp,u,c,d,h,g,b,x=new n.view.ViewEditor(n).on("change",T=>b.checked&&t({view:T},!0)),C=X("div","buttons"),S=X("div","form view-editor-form",[X("div","view-editor-form-header",[X("div","report-editor-tabs view-mode",g=["Default","Custom"].map(T=>X("div",{class:"report-editor-tab","data-mode":T.toLowerCase(),onclick:()=>t({view:T==="Default"?void 0:Wp},!0)},T))),X("div","report-editor-tabs presets",a.map(({name:T,content:M})=>ww(T,M,t))),X("div","view-editor-form-header-links",'<a href="#views-showcase" class="view-link">Views showcase</a>')]),u=X("div",{class:"view-editor-form-content",hidden:!0},[X("button",{class:"view-button formatting",title:"Prettify (input should be a JSON)",onclick(){x.focus();try{let T=x.getValue().trim(),M=new Function("return 0,"+T)();t({view:yn(M)})}catch(T){console.error("[Discovery] Prettify failed",T)}}}),x.el,X("div","editor-toolbar",[c=X("div","view-expand",[X("div",{class:"header",onclick:()=>{c.classList.toggle("expanded"),h.classList.toggle("visible")}},[d=X("div","header-content"),X("div","trigger")]),h=X("div","view-editor-view-list")]),X("label","view-checkbox",[b=X("input",{class:"live-update",type:"checkbox",checked:!0,onchange:T=>{T.target.checked&&t({view:x.getValue()},!0)}}),X("span","view-checkbox__label","build on input")]),C])])]);n.view.render(C,{view:"button-primary",content:'text:"Build"',onClick:()=>{i={},t({view:x.getValue()},!0),n.scheduleRender("page")}}),new n.view.Popup({className:"view-editor-view-list-hint",hoverTriggers:".view-editor-view-list .item.with-usage",render:function(T,M){n.view.render(T,ms(n),n.view.get(M.textContent),{})}}),d.textContent=`Available ${[...n.view.entries].filter(([,T])=>T.options.usage).length} views`;let L=()=>h.innerHTML='<a href="#views-showcase" class="view-link">Views showcase</a><br><br>'+[...n.view.entries].sort().map(([T,M])=>`<div><a class="item view-link${M.options.usage?" with-usage":""}" ${M.options.usage?'href="#views-showcase:'+T+'"':""}>${T}</a></div>`).join("");return L(),n.view.on("define",L),{el:S,render(T,M,N){let A=typeof M.params.view=="string"?"custom":"default",j=M.params.view,D=null;if(x.setValue(j),u.hidden=A!=="custom",g.forEach(P=>P.classList.toggle("active",P.dataset.mode===A)),!j&&A==="default"&&(j=Wp),i.data!==T||i.view!==j){N.innerHTML="";try{D=Function("return "+(j?"0,"+j:"null"))(),n.view.render(N,D,T,M)}catch(P){n.view.render(N,R=>{R.className="report-error render-error",R.innerHTML=lt(String(P))+"<br>(see details in console)",console.error(P)})}i={data:T,view:j}}}}}function Up(n){function t(g,b){return n.setPageParams({...n.pageParams,...g},b)}let i=Hp(n,t),a=Bp(n,t),u=$p(n,t),c=X("div",{class:"report-editor discovery-hidden-in-dzen",hidden:!0},[a.el,u.el]),d=X("div","report-content"),h=[...i.el,c,d];n.page.define("report",function(g,b,x){c.hidden=x.params.noedit,i.render(b,x);let C=a.perform(b,x);if(C.error){u.el.hidden=!0,d.hidden=!0;return}u.el.hidden=!1,d.hidden=!1,u.render(C.data,x,d)},{reuseEl:!0,init(g){h.forEach(b=>g.appendChild(b))},encodeParams:Rp,decodeParams:_p})}function Vp(n){n.page.define("views-showcase",{view:"context",data:()=>[...n.view.values],modifiers:[{view:"block",className:"sidebar",content:{view:"content-filter",content:{view:"menu",name:"view",limit:!1,data:`
                            .[name ~= #.filter]
                            .sort(name asc)
                            .({ ..., disabled: no options.usage })
                        `,item:"text-match:{ text: name, match: #.filter }"}}}],content:{view:"block",className:"content",data:"$[=> name=(#.view.name or #.id)]",content:{view:"switch",content:[{when:"no $ and #.id",content:'alert-warning:"View \\"" + #.id + "\\" not found"'},{when:"no $",content:'text:"Select a view"'},{content:[{view:"context",postRender:function(t,i,a,u){n.setPageRef(a.name),n.cancelScheduledRender(),u.id=n.pageRef}},ms(n)]}]}}},{sidebar:!1})}function uo(n,t){let i=X("style",null,":host{display:none}"),a=new Set,u=Promise.resolve();return Array.isArray(t)&&(n.append(...t.map(c=>{switch(typeof c=="string"&&(c={type:"style",content:c}),c.type){case"style":return X("style",null,c.content);case"link":{let d,h,g=new Promise((x,C)=>{d=x,h=C});return a.add(g),X("link",{rel:"stylesheet",href:c.href,media:c.media,onerror(x){a.delete(g),h(x),a.size||i.remove()},onload(){a.delete(g),d(),a.size||i.remove()}})}default:throw new Error(`Unknown type "${c.type}" for a style descriptor`)}})),a.size&&(u=Promise.all(a),n.append(i))),u}function xw(n,t){if(n===null)return!0;for(let i of["top","left","width","height"])if(n[i]!==t[i])return!0;return!1}var vs=n=>{let t=!1,i=null,a=null,u=null,c=null,d,h=new Set,g=new Map,b=new Map,x=X("div","cancel-hint view-alert view-alert-warning"),C=X("div",{class:"discovery-view-inspector-overlay",onclick:()=>A(a&&!u?a:null)},[x]),S=Rn(()=>{if(!t||u!==null)return;let _=n.view.getViewTree([P.el]),$=new Set([...b.keys()]);(function H(K,W){for(let U of K){if(!U.node||!U.view&&!U.viewRoot){U.children.length&&H(U.children,W);continue}let k=mn(U.node,W),Q=b.get(U.node)||null;Q===null?(Q={el:W.appendChild(document.createElement("div")),box:null},Q.el.className=U.viewRoot?"overlay view-root":"overlay",b.set(U.node,Q),g.set(Q.el,U)):$.delete(U.node),xw(Q.box,k)&&(Q.el.style.top=`${k.top}px`,Q.el.style.left=`${k.left}px`,Q.el.style.width=`${k.width}px`,Q.el.style.height=`${k.height}px`,Q.box=k),U.children.length&&(U.node.nodeType===1&&(Q.el.style.overflow=getComputedStyle(U.node).overflow!=="visible"?"hidden":"visible"),H(U.children,Q.el))}})(_,C);for(let H of $)b.get(H).el.remove(),b.delete(H);L()},{maxWait:0,wait:50}),L=()=>{let{x:_,y:$}=vn.value;D([...n.dom.container.parentNode.elementsFromPoint(_|0,$|0)||[]].find(q=>g.has(q))||null)},T=_=>{(_.key==="Escape"||_.keyCode===27||_.which===27)&&n.inspectMode.set(!1)},M=()=>{t||(t=!0,document.addEventListener("scroll",S,mr),document.addEventListener("keydown",T,!0),vn.subscribe(S),d=setInterval(S,500),n.dom.container.append(C),S())},N=()=>{t&&(t=!1,clearInterval(d),document.removeEventListener("scroll",S,mr),document.removeEventListener("keydown",T,!0),vn.unsubscribe(S),R=!1,delete x.dataset.alt,C.remove(),j())},A=_=>{u=_||null,_?(P.show(),P.freeze(),delete x.dataset.alt):R?n.inspectMode.set(!1):(h.clear(),j(),S())},j=()=>{i&&i.classList.remove("hovered"),i=null,a=null,u=null,P.hide()},D=_=>{if(_===i)return;if(i!==null&&i.classList.remove("hovered"),i=_,_===null){c=setTimeout(j,100);return}_.classList.add("hovered");let $=g.get(_)||null;if($===null){a=null;return}a!==null&&$.view===a.view||(a=$,clearTimeout(c),P.show())},P=new n.view.Popup({className:"discovery-inspect-details-popup",position:"pointer",hideIfEventOutside:!1,hideOnResize:!1,render(_){let $=u||a,q=[],H=$;for(;H!==null&&(H.view||H.viewRoot);)H!==$&&u!==null&&h.add(H),q.unshift(H),H=H.parent;n.view.render(_,{view:"context",modifiers:{view:"tree",when:u!==null,data:"$[0]",className:"sidebar",limitLines:!1,itemConfig:{collapsible:"=not viewRoot",expanded:K=>h.has(K),onToggle:(K,W,U)=>K?h.add(U):h.delete(U)},item:{view:"switch",content:[{when:"viewRoot",content:{view:"block",className:"view-root",content:"text:viewRoot.name"}},{when:"$ = #.selected",content:{view:"block",className:[K=>K.view&&K.view.skipped?"skipped":!1,"selected"],content:'text:(view.config.view or "#root" | $ + "" = $ ? $ : "\u0192n")',postRender(K){requestAnimationFrame(()=>K.scrollIntoView())}}},{content:{view:"link",className:K=>K.leaf.view&&K.leaf.view.skipped?"skipped":!1,data:'{ text: view.config.view or "#root" | $ + "" = $ ? $ : "\u0192n", href: false, leaf: $ }',onClick(K,W){A(W.leaf)}}}]}},content:{view:"context",modifiers:{view:"block",className:"toolbar",content:[{view:"toggle-group",className:"stack-view-chain",name:"view",data:".({ value: $ })",value:"=$[-1].value",toggleConfig:{className:[K=>K.value.viewRoot?"view-root":!1,K=>K.value.view&&K.value.view.skipped?"skipped":!1],content:['text:value | viewRoot.name or view.config.view | $ + "" = $ ? $ : "\u0192n"',{view:"list",when:!1,className:"data-flow-changes",data:`
                                                $self: value | viewRoot or view;
                                                $parent: value.parent | viewRoot or view or #.host;
                                                ['data', 'context'].[$parent[$] != $self[$]]
                                            `,whenData:!0,itemConfig:{view:"block",className:K=>K,content:"text:$[0]"}}]}},{view:"button",when:u!==null,content:'text:"Close inspector"',onClick(){n.inspectMode.set(!1)}}]},content:[{view:"block",className:["content","props-config"],data:"#.view | view or viewRoot",content:[{view:"block",className:"content-section skip",when:"skipped",content:'block{ content: "badge:{ text: skipped }" }'},{view:"block",className:"content-section render",when:'config | view + "" != view',content:'source:{ content: config.view + "", syntax: "js" }'},{view:"block",when:"props != undefined",className:"content-section props",content:{view:"struct",expanded:2,data:"props"}},{view:"block",className:"content-section config",content:[{view:"struct",expanded:1,data:"config"},{view:"tree",data:K=>n.view.getViewConfigTransitionTree(K.config).deps,whenData:!0,expanded:3,children:"deps",item:{view:"struct",expanded:1,data:"value"}}]}]},{view:"block",className:["content","data-context"],data:"$map: => parent and { ..., v: view or viewRoot, parent: parent.$map() }; #.view.$map()",content:[{view:"block",className:"content-section data",content:{view:"struct",expanded:1,data:"v.data"}},{view:"tree",when:!1,children:"[..parent[=>v.data != @.v.data]].[]",item:["struct:v.data",'source:{ content: v | config.data or "???", syntax: "discovery-query" }']},{view:"block",className:"content-section context",content:{view:"struct",expanded:1,data:"v.context"}}]}]}},q,{selected:$,host:n})}});n.actions.startInspect=M,n.actions.stopInspect=N,n.inspectMode.subscribeSync(_=>_?M():N());let R=!1};var jl={};$t(jl,{localStorageEntry:()=>Nl,sessionStorageEntry:()=>Cw});function kw(n){let t="__storage_test__"+Math.random(),i;try{i=window[n]}catch(a){return null}try{i.setItem(t,t),i.removeItem(t)}catch(a){if(!(a instanceof DOMException&&(a.code===22||a.code===1014||a.name==="QuotaExceededError"||a.name==="NS_ERROR_DOM_QUOTA_REACHED")&&i.length!==0))return null}return i}function Gp(n){let t=new Map;return t.storage=kw(n),t.getOrCreate=i=>t.get(i)||Sw(i,t),t.getOrCreate.available=t.storage!==null,t}var El=new Map([["session",Gp("sessionStorage")],["local",Gp("localStorage")]]),Cw=El.get("session").getOrCreate,Nl=El.get("local").getOrCreate;addEventListener("storage",n=>{for(let[,t]of El)t.storage===n.storageArea&&t.has(n.key)&&t.get(n.key).forceSync()});function Sw(n,t){let i=null,a=new dn,u=(d=t.storage.getItem(n))=>{i!==d&&a.emit("change",i=d)},c={get value(){return this.get()},get(){return i},set(d){t.storage&&(t.storage.setItem(n,d),u())},delete(){t.storage&&(t.storage.removeItem(n),u())},forceSync(){return t.storage&&u(),this.get()},on(d,h){return a.on("change",d),h&&d(i),()=>a.off("change",d)},off(d){a.off("change",d)}};return t.set(n,c),c.forceSync(),c}var Yp=new Set([!0,!1,"auto","disabled"]),ys=new Set,bs=matchMedia("(prefers-color-scheme:dark)"),Al=Nl("discoveryjs:darkmode"),Kp=new Map([["true",!0],["false",!1],["auto","auto"]]),ws=null;function Lw(){for(let n of ys)n.mode==="auto"&&n.set("auto")}function Qp(n){let t=Kp.has(n)?Kp.get(n):null;if(ws!==t){ws=t;for(let i of ys)i.persistent&&i.mode!=="disabled"&&i.set(t!==null?t:"auto")}}Qp(Al.value);Al.on(Qp);bs.addListener(Lw);function Zp(n,t){return(n==="off"||n==="disable")&&(n="disabled"),n!=="disabled"&&t&&ws!==null&&(n=ws),n}function Jp(n){return Yp.has(n)||(n="disabled"),n==="auto"?bs.matches:n===!0}function Xp(n,t){return Jp(Zp(n,t))}var Ol=class{constructor(t,i){this.persistent=i?Al:null,this.handlers=[],this.set(Zp(t,i),!0),ys.add(this)}subscribe(t,i){let a={fn:t};return this.handlers.push(a),i&&a.fn(this.value,this.mode),()=>{let u=this.handlers.indexOf(a);a=null,u!==-1&&this.handlers.splice(u,1)}}destroy(){ys.delete(this)}set(t,i){let a=this.value,u=this.mode;Yp.has(t)||(console.warn('Bad value "'+t+'" for darkmode, fallback to "disabled"'),t="disabled"),this.mode=typeof t=="boolean"?"manual":t,this.value=Jp(t),this.mode!=="disabled"&&(this.persistent&&!i&&this.persistent.set(this.mode==="auto"?"auto":this.value),(this.value!==a||this.mode!==u)&&this.handlers.forEach(({fn:c})=>c(this.value,this.mode)))}toggle(t){switch(this.mode){case"auto":this.set(!bs.matches);break;case"manual":this.set(t&&this.value!==bs.matches?"auto":!this.value);break}}};var Dl={};$t(Dl,{ContentRect:()=>xs});var Tw=typeof ResizeObserver=="function",xs=class extends Hr{constructor(){super();this.el=null,Tw&&(this.observer=new ResizeObserver(t=>{for(let i of t)this.set(i.contentRect)}))}observe(t){t=t||null,this.observer&&this.el!==t&&(this.el!==null&&this.observer.unobserve(this.el),t!==null&&this.observer.observe(t)),this.el=t}};var ks={};$t(ks,{darkmodeToggle:()=>Rl,indexPage:()=>Il,inspect:()=>_l,loadData:()=>zl,reportPage:()=>Pl});function Il(n){n.nav.append({name:"index-page",when:"#.widget | pageId != defaultPageId",data:'{ text: "Index", href: pageLink(#.widget.defaultPageId) }'})}function Pl(n){n.nav.append({name:"report-page",when:"#.widget | pageId != reportPageId",data:'{ text: "Make report", href: pageLink(#.widget.reportPageId) }'})}function zl(n){n.nav.append({name:"load-data",when:"#.actions.uploadFile and (#.dataLoaded or (#.widget | pageId != defaultPageId))",content:'text:"Open file\u2026"',onClick:"=#.actions.uploadFile"})}function Rl(n){let t=()=>{};n.nav.menu.append({view:"block",className:["toggle-menu-item","dark-mode-switcher"],name:"dark-mode",when:'#.widget | darkmode.mode != "disabled"',postRender:(i,a,u,{widget:c,hide:d})=>{let h;t(),t=c.darkmode.subscribe((g,b)=>{let x=b==="auto"?"auto":g;x!==h&&(i.innerHTML="",h=x,c.view.render(i,{view:"toggle-group",beforeToggles:'text:"Color schema"',onChange:C=>{h=C,c.darkmode.set(C),d()},value:x,data:[{value:!1,text:"Light"},{value:!0,text:"Dark"},{value:"auto",text:"Auto"}]},null,{widget:c}))},!0)}})}function _l(n){n.nav.append({name:"inspect",onClick:()=>n.inspectMode.set(!n.inspectMode.value),postRender(t){t.title="Enable view inspection"}})}function Hl(n,t){let i=[],a=(u,c,d)=>{switch(c){case"after":c=i.findIndex(h=>h.name===d),c===-1?c=i.length:c++;break;case"before":c=i.findIndex(h=>h.name===d),c===-1&&(c=i.length);break;default:(c===void 0||isNaN(c)||!isFinite(c))&&(c=i.length)}i.splice(Math.max(0,Math.min(i.length,c)),0,n.view.composeConfig(t,u))};return Object.assign(i,{insert:a,prepend(u){a(u,0)},append(u){a(u)},before(u,c){a(c,"before",u)},after(u,c){a(c,"after",u)},replace(u,c){let d=i.findIndex(h=>h.name===u);d!==-1?i[d]=c:a(c)},remove(u){let c=i.findIndex(d=>d.name===u);if(c!==-1)return i.splice(c,1)[0]}})}var Fl=class{constructor(t){this.host=t,this.popup=null,this.primary=Hl(t,"nav-button"),this.secondary=Hl(t,"nav-button"),this.menu=Hl(t,"menu-item"),this.config=[this.secondary,{view:"nav-button",name:"burger",data:()=>{let i=Pn();return this.host.view.render(i,this.menu,this.host.data,{...this.host.context,widget:this.host,hide:()=>this.popup&&this.popup.hide()}).then(()=>[...i.childNodes].filter(a=>a.nodeType===1||a.nodeType===3))},whenData:!0,onClick:(i,a)=>{this.popup||(this.popup=new this.host.view.Popup({className:"discovery-nav-popup"}),this.popup.el.addEventListener("click",({target:u})=>{u.closest("a[href]")&&setTimeout(()=>this.popup.hide(),50)},!0)),this.popup.toggle(i,u=>u.append(...a))}},this.primary],Object.assign(this,this.secondary),this.contentRect=new xs,this.contentRect.subscribe(({width:i,height:a})=>{let{container:u}=t.dom;u&&(u.style.setProperty("--discovery-nav-width",i+"px"),u.style.setProperty("--discovery-nav-height",a+"px"))})}render(){let{data:t,dom:i}=this.host,a=i&&i.nav;if(this.contentRect.observe(a),a){let u={...this.host.getRenderContext(),widget:this.host};this.host.view.setViewRoot(a,"nav",{config:this.config,data:t,context:u}),a.innerHTML="",this.host.view.render(a,this.config,t,u)}}};var pi=new Map,Bl=null;function Mw(){Bl=null;for(let[n,t]of pi.entries())console.groupCollapsed(`${n} (${t.length})`),t.forEach(i=>console.warn(...i)),console.groupEnd();pi.clear()}function Ew(n,...t){Bl===null&&pi.size===0&&(Bl=setTimeout(Mw,1)),pi.has(n)?pi.get(n).push(t):pi.set(n,[t])}function eg(n,t,i){switch(typeof t){case"function":return t;case"string":return Object.assign(a=>a&&Object.hasOwnProperty.call(a,t)?a[t]:void 0,{getterFromString:`object[${JSON.stringify(t)}]`});default:throw new Error(`[Discovery] Bad type "${typeof key}" for ${i} in object marker "${n}" config (must be a string or a function)`)}}function tg(n,t,i,a){return t&&hasOwnProperty.call(t,i)?eg(n,t[i],`"${i}" option`):a}function rg(n,t,i){return(Array.isArray(t[i])?t[i]:[]).map(a=>eg(n,a,`"${i}" option`))}function Nw(n){let{name:t,indexRefs:i,lookupRefs:a,page:u,getRef:c,getTitle:d}=n;u&&(c!==null?i.unshift(c):console.warn(`Option "ref" for "${t}" marker must be specified when "page" options is defined ("page" option ignored)`)),i.length>0&&a.unshift(L=>L);let h=new Set,g=new Map,b=new Map,x=new WeakMap;return{page:c!==null?u:null,mark:L=>{if(L===null||typeof L!="object"){console.warn(`Invalid value used for "${t}" marker (should be an object)`);return}h.add(L);for(let T of i){let M=T(L),N=M===null?"null":typeof M;if(N==="object"||N==="string"||N==="number"){if(!g.has(M)){g.set(M,L);continue}g.get(M)!==L&&Ew(`The same reference value used for different objects for "${t}" marker`,`Reference value "${M}"`,{refGetter:T.getterFromString||T,ref:M,currentObject:g.get(M),newObject:L})}}},lookup:L=>{let T=L===null?"null":typeof L;if(T!=="object"&&T!=="string"&&T!=="number")return null;if(b.has(L))return b.get(L);if(x.has(L))return x.get(L);let M=null,N=null;if(h.has(L))N=L;else for(let A of a){let j=A(L);if(g.has(j)){N=g.get(j);break}}if(N!==null){if(b.has(N))M=b.get(N);else{let A=c!==null?c(N):null;M=Object.freeze({type:t,object:N,ref:A,title:d(N),href:u!==null&&A!==null?`#${encodeURIComponent(u)}:${encodeURIComponent(A)}`:null}),b.set(N,M)}L!==N&&(typeof L!="object"?b.set(L,M):x.set(L,M))}return M}}}var Wl=class extends pn{define(t,i){if(this.isDefined(t)){console.error(`[Discovery] Object marker "${t}" is already defined, new definition ignored`);return}i=i||{};let a=rg(t,i,"refs"),u=rg(t,i,"lookupRefs"),c=typeof i.page=="string"?i.page:null,d=tg(t,i,"ref",null),h=tg(t,i,"title",d||(()=>null));return super.define(t,Nw({name:t,indexRefs:a,lookupRefs:u,page:c,getRef:d,getTitle:h}))}lookup(t,i){if(i)return this.get(i).lookup(t);for(let{lookup:a}of this.values){let u=a(t);if(u!==null)return u}return null}resolveAll(t){let i=[];for(let{lookup:a}of this.values){let u=a(t);u!==null&&i.push(u)}return null}},ng=Wl;var Xl=sr(Jl());function eu(n){let t=new ng,i=[],a=[],u=(x,C)=>t.lookup(x,C),c=x=>t.lookupAll(x),d=(x,C=!1)=>{typeof C=="boolean"&&(C={debug:C}),a.push({query:x,...C})},h=x=>{let C=[],S=typeof x;if(x&&(S==="object"||S==="string"))for(let L of i){let T=L(x);T&&C.push(T)}return C.length?C:null},g={query:(...x)=>n.query(...x),pageLink:(x,C,S)=>n.encodePageHash(C,x,S),marker:u,markerAll:c},b=Xl.default.setup(g);return{apply(){Object.assign(n,{objectMarkers:t,linkResolvers:i,resolveValueLinks:h,annotations:a,queryFnFromString:b})},methods:{lookupObjectMarker:u,lookupObjectMarkerAll:c,resolveValueLinks:h,defineObjectMarker(x,C){let{page:S,mark:L,lookup:T}=t.define(x,C)||{};if(!T)return()=>{};if(S!==null){if(!n.page.isDefined(C.page)){console.error(`[Discovery] Page reference "${C.page}" doesn't exist`);return}i.push(M=>{let N=T(M);if(N!==null)return{type:S,text:N.title,href:N.href,entity:N.object}}),d((M,N)=>{let A=T(M);if(A&&A.object!==N.host)return{place:"before",style:"badge",text:S,href:A.href}})}else d((M,N)=>{let A=T(M);if(A&&A.object!==N.host)return{place:"before",style:"badge",text:x}});return L},addValueAnnotation:d,addQueryHelpers(x){g={...g,...x},b=Xl.default.setup(g)},query(x,...C){return n.queryFn.call({queryFnFromString:b},x)(...C)}}}}var vi=sr(Jl()),rv=new WeakMap,nv=new WeakMap,yi=new WeakMap,N0=n=>n,j0=n=>Object.fromEntries(n);function tu(n,t,i){i?n.dataset[t]=i:delete n.dataset[t]}function A0(n,t,i,a){let u=n.page.get(t);return u&&Object.hasOwnProperty.call(u.options,i)?u.options[i]:a}function iv(n,t,i,a){let u=A0(n,t,i,a);return typeof u=="function"?u:a}var ru=class extends dn{constructor(t,i,a){super();this.lib=nu,this.options=a||{},this.actions={};let{darkmode:u="disabled",darkmodePersistent:c=!1,defaultPageId:d,reportPageId:h,extensions:g,inspector:b=!1}=this.options;this.darkmode=new Ol(u,c),this.inspectMode=new Hr(!1),this.initDom(),this.view=new ff(this),this.nav=new Fl(this),this.preset=new df(this.view),this.page=new gf(this),this.page.on("define",(x,C)=>{let{resolveLink:S}=C.options;if(typeof S!="undefined"&&console.warn('"resolveLink" in "page.define()" options is deprecated, use "page" option for "defineObjectMarker()" method in prepare function'),this.pageId===x&&this.pageHash!=="#"){let L=this.pageHash;this.pageHash="#",this.setPageHash(L),this.cancelScheduledRender()}}),yi.set(this,new Set),this.dataLoaded=!1,this.data=void 0,this.context=void 0,this.prepare=x=>x,eu(this).apply(),this.defaultPageId=d||"default",this.reportPageId=h||"report",this.pageId=this.defaultPageId,this.pageRef=null,this.pageParams={},this.pageHash=this.encodePageHash(this.pageId,this.pageRef,this.pageParams),this.apply(io),this.apply(lo),i&&this.page.define(this.defaultPageId,i),g&&this.apply(g),b&&this.apply(vs),this.nav.render(this.dom.nav),this.setContainer(t)}apply(t){Array.isArray(t)?t.forEach(i=>this.apply(i)):typeof t=="function"?t.call(window,this):t?this.apply(Object.values(t)):console.error("Bad type of extension:",t)}setPrepare(t){if(typeof t!="function")throw new Error("An argument should be a function");this.prepare=t}setData(t,i={},a){a=a||{};let u=Date.now(),c=eu(this),d=()=>{if(rv.get(this)!==h)throw new Error("Prevented by another setData()")},h=Promise.resolve().then(()=>(d(),this.prepare(t,c.methods)||t)).then(g=>{d(),this.dataLoaded=!0,this.data=g,this.context=i,c.apply(),this.emit("data"),console.log(`[Discovery] Data prepared in ${Date.now()-u}ms`)});return rv.set(this,h),(!("render"in a)||a.render)&&h.then(()=>{this.scheduleRender("sidebar"),this.scheduleRender("page")}),h}async setDataProgress(t,i,a={setState(){}}){await a.setState({stage:"prepare"}),await this.setData(t,i,{render:!1}),await a.setState({stage:"initui"}),this.scheduleRender("sidebar"),this.scheduleRender("page"),await Promise.all([await this.dom.ready,yi.get(this).timer])}unloadData(){!this.dataLoaded||(this.dataLoaded=!1,this.data=void 0,this.context=void 0,this.scheduleRender("sidebar"),this.scheduleRender("page"))}addEntityResolver(){console.error('[Discovery] "Widget#addEntityResolver()" method was removed, use "defineObjectMarker()" instead, i.e. setPrepare((data, { defineObjectMarker }) => objects.forEach(defineObjectMarker(...)))')}addValueLinkResolver(){console.error('[Discovery] "Widget#addValueLinkResolver()" method was removed, use "defineObjectMarker()" with "page" option instead, i.e. setPrepare((data, { defineObjectMarker }) => objects.forEach(defineObjectMarker("marker-name", { ..., page: "page-name" })))')}resolveValueLinks(){return null}queryFn(t){switch(typeof t){case"function":return t;case"string":return this.queryFnFromString(t)}}query(t,i,a){switch(typeof t){case"function":return t(i,a);case"string":return this.queryFn(t)(i,a);default:return t}}queryBool(...t){return vi.default.buildin.bool(this.query(...t))}queryToConfig(t,i){let{ast:a}=vi.default.syntax.parse(i),u={view:t};if(a.type!=="Block")throw new SyntaxError('[Discovery] Widget#queryToConfig(): query root must be a "Block"');if(a.body.type!=="Object")throw new SyntaxError('[Discovery] Widget#queryToConfig(): query root must return an "Object"');for(let c of a.body.properties){if(c.type!=="ObjectEntry")throw new SyntaxError('[Discovery] Widget#queryToConfig(): unsupported object entry type "'+c.type+'"');let d;switch(c.key.type){case"Literal":d=c.key.value;break;case"Identifier":d=c.key.name,c.value=c.value||c.key;break;case"Reference":d=c.key.name.name,c.value=c.value||c.key;break;default:throw new SyntaxError('[Discovery] Widget#queryToConfig(): unsupported object key type "'+c.key.type+'"')}if(d==="view"||d==="postRender"||d==="className")throw new SyntaxError('[Discovery] Widget#queryToConfig(): set a value for "'+d+'" property via query is prohibited');d==="when"||d==="data"||d==="whenData"?c.value.type==="Literal"?u[d]=typeof c.value.value=="string"?JSON.stringify(c.value.value):c.value.value:u[d]=vi.default.syntax.stringify(c.value):u[d]=c.value.type==="Literal"&&(typeof c.value.value!="string"||c.value.value[0]!=="=")?c.value.value:"="+vi.default.syntax.stringify(c.value)}return u}querySuggestions(t,i,a,u){let c=["property","value","method"],d;try{let h=nv.get(this);if(!h||h.query!==t||h.data!==a||h.context!==u){let g={tolerant:!0,stat:!0};nv.set(this,h={query:t,data:a,context:u,suggestion(){}}),Object.assign(h,this.queryFnFromString(t,g)(a,u))}if(d=h.suggestion(i),d)return d.filter(g=>g.value!==g.current&&cl(g.current,g.value)).sort((g,b)=>{let x=c.indexOf(g.type),C=c.indexOf(b.type);return x-C||(g.value<b.value?-1:1)})}catch(h){console.groupCollapsed("[Discovery] Error on getting suggestions for query"),console.error(h),console.groupEnd();return}}pathToQuery(t){return t.map((i,a)=>i==="*"?a===0?"values()":".values()":typeof i=="number"||!/^[a-zA-Z_][a-zA-Z_$0-9]*$/.test(i)?a===0?`$[${JSON.stringify(i)}]`:`[${JSON.stringify(i)}]`:a===0?i:"."+i).join("")}getQueryEngineInfo(){return{name:"jora",version:vi.default.version,link:"https://github.com/discoveryjs/jora"}}addQueryHelpers(){console.error('[Discovery] "Widget#addQueryHelpers()" method was removed, use "addQueryHelpers()" instead, i.e. setPrepare((data, { addQueryHelpers }) => addQueryHelpers(...))')}initDom(){let t=X("div","discovery"),i=t.attachShadow({mode:"open"}),a=uo(i,this.options.styles);t.style.opacity=0;let u=i.appendChild(X("div"));this.dom={},this.dom.ready=Promise.all([a]),this.dom.wrapper=t,this.dom.root=i,this.dom.container=u,this.dom.detachDarkMode=this.darkmode.subscribe(c=>u.classList.toggle("discovery-root-darkmode",c),!0),u.classList.add("discovery-root","discovery"),u.append(this.dom.nav=X("div","discovery-nav discovery-hidden-in-dzen"),this.dom.sidebar=X("nav","discovery-sidebar discovery-hidden-in-dzen"),this.dom.content=X("main","discovery-content",[this.dom.pageContent=X("article")]))}setContainer(t){t instanceof Node?t.append(this.dom.wrapper):this.dom.wrapper.remove()}disposeDom(){typeof this.dom.detachDarkMode=="function"&&(this.dom.detachDarkMode(),this.dom.detachDarkMode=null),this.dom.container.remove(),this.dom=null}addGlobalEventListener(t,i,a){return document.addEventListener(t,i,a),()=>document.removeEventListener(t,i,a)}addHostElEventListener(t,i,a){let u=this.dom.container;return u.addEventListener(t,i,a),()=>u.removeEventListener(t,i,a)}addBadge(){console.error("Widget#addBadge() is obsoleted, use Widget#nav API instead")}scheduleRender(t){let i=yi.get(this);if(!i.has(t)&&(i.add(t),!i.timer))return i.timer=Promise.resolve().then(async()=>{for(let a of i)switch(a){case"sidebar":await this.renderSidebar();break;case"page":await this.renderPage();break}i.timer=null}),i.timer}cancelScheduledRender(t){let i=yi.get(this);i&&(t?i.delete(t):i.clear())}getRenderContext(){return{page:this.pageId,id:this.pageRef,params:this.pageParams,actions:this.actions,dataLoaded:this.dataLoaded,...this.context}}renderSidebar(){if(yi.get(this).delete("sidebar"),this.dataLoaded&&this.view.isDefined("sidebar")){let t=Date.now(),i=this.data,a=this.getRenderContext();return this.view.setViewRoot(this.dom.sidebar,"sidebar",{data:i,context:a}),this.dom.sidebar.innerHTML="",this.view.render(this.dom.sidebar,"sidebar",i,a).then(()=>console.log(`[Discovery] Sidebar rendered in ${Date.now()-t}ms`))}}encodePageHash(t,i,a){let c=iv(this,t,"encodeParams",N0)(a||{});return c&&typeof c!="string"&&(Array.isArray(c)||(c=Object.entries(c)),c=c.map(d=>d.map(encodeURIComponent).join("=")).join("&")),`#${t!==this.defaultPageId?encodeURIComponent(t):""}${typeof i=="string"&&i||typeof i=="number"?":"+encodeURIComponent(i):""}${c?"&"+c:""}`}decodePageHash(t){let i=(t.indexOf("&")+1||t.length+1)-1,[a,u]=t.substring(1,i).split(":").map(decodeURIComponent),c=iv(this,a||this.defaultPageId,"decodeParams",j0),d=t.substr(i+1).split("&").filter(Boolean).map(h=>{let g=h.indexOf("=");return g!==-1?[decodeURIComponent(h.slice(0,g)),decodeURIComponent(h.slice(g+1))]:[decodeURIComponent(h),!0]});return{pageId:a||this.defaultPageId,pageRef:u,pageParams:c(d)}}setPage(t,i,a,u=!1){return this.setPageHash(this.encodePageHash(t||this.defaultPageId,i,a),u)}setPageRef(t,i=!1){return this.setPage(this.pageId,t,this.pageParams,i)}setPageParams(t,i=!1){return this.setPage(this.pageId,this.pageRef,t,i)}setPageHash(t,i=!1){let{pageId:a,pageRef:u,pageParams:c}=this.decodePageHash(t);return(this.pageId!==a||this.pageRef!==u||!to(this.pageParams,c))&&(this.pageId=a,this.pageRef=u,this.pageParams=c,this.scheduleRender("page"),t!==this.pageHash)?(this.pageHash=t,this.emit("pageHashChange",i),!0):!1}renderPage(){yi.get(this).delete("page");let t=this.data,i=this.getRenderContext(),{pageEl:a,renderState:u,config:c}=this.page.render(this.dom.pageContent,this.pageId,t,i);return this.view.setViewRoot(a,"Page: "+this.pageId,{config:c,data:t,context:i}),this.dom.pageContent=a,this.nav.render(this.dom.nav),tu(this.dom.container,"page",this.pageId),tu(this.dom.container,"dzen",Boolean(this.pageParams.dzen)),tu(this.dom.container,"compact",Boolean(this.options.compact)),u.then(()=>this.dom.wrapper.style.opacity=1),u.then(()=>{if(this.pageParams["!anchor"]){let d=a.querySelector("#"+CSS.escape("!anchor:"+this.pageParams["!anchor"]));if(d){let h=a.querySelector(".view-page-header");d.style.scrollMargin=h?h.offsetHeight+"px":"",d.scrollIntoView(!0)}}}),u}},Os=ru;var ov=n=>/^\./.test(n);function Ds(n){let t=n.options.upload||!0,i=t.accept?String(t.accept):"application/json,.json",a=i.split(",");(t.dragdrop||t.dragdrop===void 0)&&(n.dom.container.addEventListener("drop",u=>{n.loadDataFromEvent(u)},!0),n.dom.container.addEventListener("dragover",u=>{u.stopPropagation(),u.preventDefault()},!0)),n.actions.unloadData=()=>{n.unloadData()},n.actions.uploadFile=Object.assign(()=>{X("input",{type:"file",accept:i,onchange:u=>n.loadDataFromEvent(u)}).click()},{fileExtensions:a.filter(u=>ov(u)),mimeTypes:a.filter(u=>!ov(u))})}function Is(n){n.setPageHash(location.hash),n.cancelScheduledRender(),window.addEventListener("hashchange",()=>n.setPageHash(location.hash),!1),n.on("pageHashChange",function(t){let i=n.pageHash||"#";i==="#"&&!location.hash||(t?location.replace(i):location.hash=i)})}var yo={request:{value:0,title:"Awaiting data"},receive:{value:.1,title:"Receiving data"},parse:{value:.9,title:"Processing data (parse)"},prepare:{value:.925,title:"Processing data (prepare)"},initui:{value:.975,title:"Preparing UI"},done:{value:1,title:"Done!"}};Object.values(yo).forEach((n,t,i)=>{n.duration=(t!==i.length-1?i[t+1].value:0)-n.value});var O0=async()=>{if(await new Promise(n=>setTimeout(n,1)),!document.hidden)return Promise.race([new Promise(requestAnimationFrame),new Promise(n=>setTimeout(n,8))])},iu=class{constructor({onTiming:t,delay:i}){this.finished=!1,this.awaitRepaint=null,this.lastStage=null,this.lastStageStart=null,this.timings=[],this.onTiming=typeof t=="function"?t:()=>{},this.el=X("div",{class:"view-progress init",style:`--appearance-delay: ${i===!0?200:Number(i)||0}ms`},[X("div","title"),X("div","progress")])}async setState(t){let{stage:i,progress:a,error:u}=t;if(u||this.finished)return;let{value:c,title:d,duration:h}=yo[i],g=i!==this.lastStage,b=Date.now(),x=0,C;if(this.lastStage||(this.startTime=b,requestAnimationFrame(()=>this.el.classList.remove("init"))),g){if(this.lastStageStart!==null){let S={stage:this.lastStage,title:yo[this.lastStage].title,duration:b-this.lastStageStart};this.timings.push(S),this.onTiming(S)}this.lastStage=i,this.lastStageStart=b,this.awaitRepaint=b}if(a){let{done:S,elapsed:L,units:T,completed:M,total:N}=a;N?(x=S?1:M/N,C=T==="bytes"?Math.round(x*100)+"%":`${M}/${N}`):(x=S?1:.1+Math.min(.9,L/2e4),C=T==="bytes"?(M/(1024*1024)).toFixed(1)+"MB":M)}this.el.style.setProperty("--progress",c+x*h),this.el.querySelector(".title").textContent=C?`${d} (${C})...`:i!=="done"?`${d}...`:d,(g||b-this.awaitRepaint>65&&b-this.lastStageStart>200)&&(await O0(),this.awaitRepaint=Date.now())}finish(){if(!this.finished&&this.lastStageStart!==null){let t=this.lastStage,i=Date.now()-this.lastStageStart,a=yo[t].title,u={stage:t,title:a,duration:i};this.timings.push(u),this.onTiming(u),this.onTiming({stage:"done",title:yo.done.title,duration:Date.now()-this.startTime})}this.finished=!0}dispose(){this.finish(),this.el.remove()}},Ps=iu;var su={};$t(su,{dataSource:()=>D0,jsonFromStream:()=>dv,loadDataFromEvent:()=>zs,loadDataFromFile:()=>bo,loadDataFromPush:()=>hv,loadDataFromStream:()=>Hn,loadDataFromUrl:()=>Rs,syncLoaderWithProgressbar:()=>ou});var sv=!1,av=!1,lv=!1;try{new ReadableStream({}),av=!0}catch(n){}try{new ReadableStream({type:"bytes"}),sv=!0}catch(n){}try{new Response(new Blob).getReader(),lv=!0}catch(n){}function uv(n){return typeof n.arrayBuffer=="function"?n.arrayBuffer():new Promise((t,i)=>{let a=new FileReader;a.readAsArrayBuffer(n),a.onload=a.onerror=({type:u})=>{a.onload=a.onerror=null,u==="load"?t(a.result||a):i(new Error("Failed to read the blob/file"))}})}function cv(n){let t=0;if(typeof n.stream=="function"&&!/Version\/14\.1/.test(navigator.userAgent))return n.stream();if(sv)return new ReadableStream({type:"bytes",autoAllocateChunkSize:512*1024,pull(i){let a=i.byobRequest.view,u=n.slice(t,t+a.byteLength);return uv(u).then(function(c){let d=new Uint8Array(c),h=d.byteLength;t+=h,a.set(d),i.byobRequest.respond(h),t>=n.size&&i.close()})}});if(av)return new ReadableStream({pull(i){let a=n.slice(t,t+512*1024);return uv(a).then(function(u){t+=u.byteLength,i.enqueue(new Uint8Array(u)),t==n.size&&i.close()})}});if(lv)return new Response(n).body;throw new Error("Include https://github.com/creatorrr/web-streams-polyfill")}var fv=sr(vl()),D0={stream:Hn,event:zs,file:bo,url:Rs,push:hv};function I0(n){try{return new URL(n,location.origin).origin===location.origin}catch(t){return!1}}function dv(n,t,i){let a=1024*1024,u=0;return(0,fv.default)(async function*(){let c=n.getReader(),d=Date.now();try{for(;;){let{done:h,value:g}=await c.read();if(h){await i({done:!0,elapsed:Date.now()-d,units:"bytes",completed:u,total:t});break}for(let b=0;b<g.length;b+=a){let x=b===0&&g.length-b<a?g:g.slice(b,b+a);u+=x.length,yield x,await i({done:!1,elapsed:Date.now()-d,units:"bytes",completed:u,total:t})}}}finally{c.releaseLock()}}).then(c=>({data:c,size:u}))}async function P0(n,t){let i=async(a,u)=>(await t.asyncSet({stage:a}),await u());try{let a=Date.now(),{stream:u,data:c,size:d,validateData:h}=await i("request",n),g=Date.now()-a,{data:b,size:x}=c||await i("receive",()=>dv(u,Number(d)||0,C=>t.asyncSet({stage:"receive",progress:C})));return typeof h=="function"&&h(b),await t.asyncSet({stage:"done"}),{data:b,size:x,payloadSize:Number(d)||0,time:Date.now()-a,requestTime:g}}catch(a){throw console.error("[Discovery] Error loading data:",a),await t.asyncSet({stage:"error",error:a}),a}}function Hn(n,t,i){let a=new Hr;return{state:a,result:P0(n,a).then(u=>({...u,...t(u.data)})),...i}}function bo(n){return Hn(()=>({stream:cv(n),size:n.size}),t=>({data:t,context:{name:`File: ${n.name}`,createdAt:new Date(n.lastModified||Date.now()),data:t}}))}function zs(n){let t=n.dataTransfer||n.target,i=t&&t.files&&t.files[0];return n.stopPropagation(),n.preventDefault(),bo(i)}function Rs(n,t,i){i=i||{};let a=typeof n=="string"?void 0:n,u=i.isResponseOk||(d=>d.ok),c=i.getContentSize||((d,h)=>I0(d)&&!h.headers.get("content-encoding")?h.headers.get("content-length"):h.headers.get("x-file-size"));return Hn(async()=>{let d=await fetch(a?"data:application/json,{}":n,i.fetch);if(u(d))return a?{data:a}:{stream:d.body,size:c(n,d),validateData:i.validateData};let h=d.headers.get("content-type")||"",g=await d.text();if(h.toLowerCase().startsWith("application/json")){let b=JSON.parse(g);g=b.error||b}throw g=new Error(g),g.stack=null,g},d=>({data:t?d[t]:d,context:{name:"Discovery",createdAt:t&&d.createdAt?new Date(Date.parse(d.createdAt)):new Date,...t?d:{data:d}}}))}function hv(n,t){let i;return Hn(()=>({size:n,stream:new ReadableStream({start(a){i=a},cancel(){i=null}})}),a=>({data:a.data,context:{name:a.name||"Discovery",createdAt:t||a.createdAt||Date.now(),data:a.data}}),{push(a){i.enqueue(a)},finish(){i.close(),i=null}})}function ou({result:n,state:t},i){return new Promise((a,u)=>{let c=t.subscribeSync(({stage:d,progress:h,error:g})=>{if(g){c(),u(g);return}if(d==="done"){c(),a(n);return}return i.setState({stage:d,progress:h})})})}var wo=(n,t)=>n!==void 0?n:t,au=class extends Os{constructor(t,i={}){let a=i.extensions?[i.extensions]:[],u=i.mode==="modelfree";a.push(Rl),wo(i.router,!0)&&a.push(Is),u||(a.push(Il),a.push(Pl)),(wo(i.upload,!1)||u)&&(a.push(Ds),a.push(zl)),wo(i.inspector,!0)&&a.push(_l),super(t,null,{...i,extensions:i.extensions?a.concat(i.extensions):a,upload:i.upload,darkmode:wo(i.darkmode,"auto"),darkmodePersistent:wo(i.darkmodePersistent,!0)}),this.mode=this.options.mode}progressbar(t){return new Ps({onTiming:({title:i,duration:a})=>console.log(`[Discovery] Data loading / ${i} \u2013 ${a}ms`),...t})}trackLoadDataProgress(t){let i=this.progressbar(),a=this.dom.loadingOverlay;return a.innerHTML="",a.append(i.el),a.classList.remove("error","done"),a.classList.add("init"),this.dom.wrapper.style.opacity=1,requestAnimationFrame(()=>a.classList.remove("init")),ou(t,i).then(({data:u,context:c})=>this.setDataProgress(u,c,i)).then(async()=>{a.classList.add("done"),await i.setState({stage:"done"})},u=>{a.classList.add("error"),a.innerHTML=['<div class="view-alert view-alert-danger">','<h3 class="view-header">Ooops, something went wrong on data loading</h3>',"<pre>"+lt(u.stack||String(u)).replace(/^Error:\s*(\S+Error:)/,"$1")+"</pre>","</div>"].join(""),this.options.cache&&a.prepend(X("button",{class:"view-button",async onclick(){await fetch("drop-cache"),location.reload()}},"Reload with no cache"))}),t.result}loadDataFromStream(t,i){return this.trackLoadDataProgress(Hn(()=>({stream:t,totalSize:i})))}loadDataFromEvent(t){return this.mode==="modelfree"&&this.defaultPageId!==this.reportPageId&&(this._defaultPageId=this.defaultPageId,this.defaultPageId=this.reportPageId,this.setPageHash(this.pageHash,!0),this.cancelScheduledRender()),this.trackLoadDataProgress(zs(t))}loadDataFromFile(t){return this.trackLoadDataProgress(bo(t))}loadDataFromUrl(t,i,a){return this.trackLoadDataProgress(Rs(t,i,a))}unloadData(){this.dataLoaded&&this.mode==="modelfree"&&this._defaultPageId!==this.defaultPageId&&(this.defaultPageId=this._defaultPageId,this.setPageHash(this.pageHash,!0),this.cancelScheduledRender()),super.unloadData()}initDom(){super.initDom(),this.dom.container.append(this.dom.loadingOverlay=X("div","loading-overlay done"))}getRenderContext(){return{...super.getRenderContext(),modelfree:this.mode==="modelfree"}}renderPage(){return document.title=this.getRenderContext().name||document.title,super.renderPage()}},_s=au;var uu={};$t(uu,{applyContainerStyles:()=>_0,rollbackContainerStyles:()=>H0});var z0={"font-family":"Tahoma, Verdana, Arial, sans-serif","font-size":"16px","line-height":"1.6","-webkit-text-size-adjust":"none","text-size-adjust":"none","background-color":"var(--discovery-background-color, white)",color:"var(--discovery-color, black)","transition-property":"background-color, color","transition-duration":".25s","transition-timing-function":"ease-in"},R0={"--discovery-background-color":"#242424","--discovery-color":"#cccccc"},lu=new WeakSet,Fn=new WeakMap;function pv(n,t,i){t in i||(i[t]=[n.style.getPropertyValue(t),n.style.getPropertyPriority(t)])}function _0(n,t){t=t||{},Fn.has(n)||Fn.set(n,Object.create(null));let i=Xp(t.darkmode,t.darkmodePersistent),a=Fn.get(n);for(let[u,c]of Object.entries(z0))(lu.has(n)||!/^transition/.test(u))&&(pv(n,u,a),n.style.setProperty(u,c));for(let[u,c]of Object.entries(R0))pv(n,u,a),i?n.style.setProperty(u,c):n.style.removeProperty(u);lu.add(n)}function H0(n){if(Fn.has(n)){let t=Fn.get(n);for(let[i,a]of Object.entries(t))n.style.setProperty(i,...a);Fn.delete(Fn),lu.delete(n)}}var gv={...uu,base64:Tl,...fl,copyText:fr,...su,debounce:Rn,...za,...Ha,injectStyles:uo,...yl,...Ya,pattern:Ll,persistent:jl,...Xa,progressbar:Ps,safeFilterRx:Zi,...Dl};function I6(n,t,i,a){let u=location.pathname.endsWith("/index.html")?"/index.html":"",c=new _s(document.body,n);return c.apply(tf),c.apply(rf),a={...a,meta:n.meta},n.mode==="multi"&&c.nav.menu.append({name:"switch-model",data:{text:"Switch model",href:`..${u}`}}),i?c.setDataProgress(i,a,t):(c.context=a,c.renderPage())}export{I6 as default};
